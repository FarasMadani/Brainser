var ST=Object.defineProperty;var zS=a=>{throw TypeError(a)};var bT=(a,e,t)=>e in a?ST(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var xe=(a,e,t)=>bT(a,typeof e!="symbol"?e+"":e,t),Qv=(a,e,t)=>e.has(a)||zS("Cannot "+t);var c=(a,e,t)=>(Qv(a,e,"read from private field"),t?t.call(a):e.get(a)),C=(a,e,t)=>e.has(a)?zS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),A=(a,e,t,n)=>(Qv(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),x=(a,e,t)=>(Qv(a,e,"access private method"),t);var gn=(a,e,t,n)=>({set _(r){A(a,e,r,t)},get _(){return c(a,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ET(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Jv={exports:{}},Ku={},Zv={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function CT(){if(HS)return Fe;HS=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,b={};function k(I,F,q){this.props=I,this.context=F,this.refs=b,this.updater=q||_}k.prototype.isReactComponent={},k.prototype.setState=function(I,F){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,F,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=k.prototype;function P(I,F,q){this.props=I,this.context=F,this.refs=b,this.updater=q||_}var L=P.prototype=new T;L.constructor=P,S(L,k.prototype),L.isPureReactComponent=!0;var D=Array.isArray,j=Object.prototype.hasOwnProperty,G={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function Y(I,F,q){var ne,ge={},fe=null,le=null;if(F!=null)for(ne in F.ref!==void 0&&(le=F.ref),F.key!==void 0&&(fe=""+F.key),F)j.call(F,ne)&&!V.hasOwnProperty(ne)&&(ge[ne]=F[ne]);var Se=arguments.length-2;if(Se===1)ge.children=q;else if(1<Se){for(var ce=Array(Se),be=0;be<Se;be++)ce[be]=arguments[be+2];ge.children=ce}if(I&&I.defaultProps)for(ne in Se=I.defaultProps,Se)ge[ne]===void 0&&(ge[ne]=Se[ne]);return{$$typeof:a,type:I,key:fe,ref:le,props:ge,_owner:G.current}}function J(I,F){return{$$typeof:a,type:I.type,key:F,ref:I.ref,props:I.props,_owner:I._owner}}function ue(I){return typeof I=="object"&&I!==null&&I.$$typeof===a}function ae(I){var F={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(q){return F[q]})}var Me=/\/+/g;function Te(I,F){return typeof I=="object"&&I!==null&&I.key!=null?ae(""+I.key):F.toString(36)}function Ae(I,F,q,ne,ge){var fe=typeof I;(fe==="undefined"||fe==="boolean")&&(I=null);var le=!1;if(I===null)le=!0;else switch(fe){case"string":case"number":le=!0;break;case"object":switch(I.$$typeof){case a:case e:le=!0}}if(le)return le=I,ge=ge(le),I=ne===""?"."+Te(le,0):ne,D(ge)?(q="",I!=null&&(q=I.replace(Me,"$&/")+"/"),Ae(ge,F,q,"",function(be){return be})):ge!=null&&(ue(ge)&&(ge=J(ge,q+(!ge.key||le&&le.key===ge.key?"":(""+ge.key).replace(Me,"$&/")+"/")+I)),F.push(ge)),1;if(le=0,ne=ne===""?".":ne+":",D(I))for(var Se=0;Se<I.length;Se++){fe=I[Se];var ce=ne+Te(fe,Se);le+=Ae(fe,F,q,ce,ge)}else if(ce=y(I),typeof ce=="function")for(I=ce.call(I),Se=0;!(fe=I.next()).done;)fe=fe.value,ce=ne+Te(fe,Se++),le+=Ae(fe,F,q,ce,ge);else if(fe==="object")throw F=String(I),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return le}function ze(I,F,q){if(I==null)return I;var ne=[],ge=0;return Ae(I,ne,"","",function(fe){return F.call(q,fe,ge++)}),ne}function te(I){if(I._status===-1){var F=I._result;F=F(),F.then(function(q){(I._status===0||I._status===-1)&&(I._status=1,I._result=q)},function(q){(I._status===0||I._status===-1)&&(I._status=2,I._result=q)}),I._status===-1&&(I._status=0,I._result=F)}if(I._status===1)return I._result.default;throw I._result}var ie={current:null},Z={transition:null},U={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:G};function N(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:ze,forEach:function(I,F,q){ze(I,function(){F.apply(this,arguments)},q)},count:function(I){var F=0;return ze(I,function(){F++}),F},toArray:function(I){return ze(I,function(F){return F})||[]},only:function(I){if(!ue(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Fe.Component=k,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=P,Fe.StrictMode=n,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Fe.act=N,Fe.cloneElement=function(I,F,q){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var ne=S({},I.props),ge=I.key,fe=I.ref,le=I._owner;if(F!=null){if(F.ref!==void 0&&(fe=F.ref,le=G.current),F.key!==void 0&&(ge=""+F.key),I.type&&I.type.defaultProps)var Se=I.type.defaultProps;for(ce in F)j.call(F,ce)&&!V.hasOwnProperty(ce)&&(ne[ce]=F[ce]===void 0&&Se!==void 0?Se[ce]:F[ce])}var ce=arguments.length-2;if(ce===1)ne.children=q;else if(1<ce){Se=Array(ce);for(var be=0;be<ce;be++)Se[be]=arguments[be+2];ne.children=Se}return{$$typeof:a,type:I.type,key:ge,ref:fe,props:ne,_owner:le}},Fe.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:o,_context:I},I.Consumer=I},Fe.createElement=Y,Fe.createFactory=function(I){var F=Y.bind(null,I);return F.type=I,F},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(I){return{$$typeof:h,render:I}},Fe.isValidElement=ue,Fe.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:te}},Fe.memo=function(I,F){return{$$typeof:p,type:I,compare:F===void 0?null:F}},Fe.startTransition=function(I){var F=Z.transition;Z.transition={};try{I()}finally{Z.transition=F}},Fe.unstable_act=N,Fe.useCallback=function(I,F){return ie.current.useCallback(I,F)},Fe.useContext=function(I){return ie.current.useContext(I)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(I){return ie.current.useDeferredValue(I)},Fe.useEffect=function(I,F){return ie.current.useEffect(I,F)},Fe.useId=function(){return ie.current.useId()},Fe.useImperativeHandle=function(I,F,q){return ie.current.useImperativeHandle(I,F,q)},Fe.useInsertionEffect=function(I,F){return ie.current.useInsertionEffect(I,F)},Fe.useLayoutEffect=function(I,F){return ie.current.useLayoutEffect(I,F)},Fe.useMemo=function(I,F){return ie.current.useMemo(I,F)},Fe.useReducer=function(I,F,q){return ie.current.useReducer(I,F,q)},Fe.useRef=function(I){return ie.current.useRef(I)},Fe.useState=function(I){return ie.current.useState(I)},Fe.useSyncExternalStore=function(I,F,q){return ie.current.useSyncExternalStore(I,F,q)},Fe.useTransition=function(){return ie.current.useTransition()},Fe.version="18.3.1",Fe}var $S;function cw(){return $S||($S=1,Zv.exports=CT()),Zv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function xT(){if(VS)return Ku;VS=1;var a=cw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(h,d,p){var g,v={},y=null,_=null;p!==void 0&&(y=""+p),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(_=d.ref);for(g in d)n.call(d,g)&&!o.hasOwnProperty(g)&&(v[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:h,key:y,ref:_,props:v,_owner:r.current}}return Ku.Fragment=t,Ku.jsx=l,Ku.jsxs=l,Ku}var WS;function kT(){return WS||(WS=1,Jv.exports=xT()),Jv.exports}var $=kT(),W=cw(),_p={},ey={exports:{}},Pn={},ty={exports:{}},ny={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GS;function TT(){return GS||(GS=1,function(a){function e(Z,U){var N=Z.length;Z.push(U);e:for(;0<N;){var I=N-1>>>1,F=Z[I];if(0<r(F,U))Z[I]=U,Z[N]=F,N=I;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var U=Z[0],N=Z.pop();if(N!==U){Z[0]=N;e:for(var I=0,F=Z.length,q=F>>>1;I<q;){var ne=2*(I+1)-1,ge=Z[ne],fe=ne+1,le=Z[fe];if(0>r(ge,N))fe<F&&0>r(le,ge)?(Z[I]=le,Z[fe]=N,I=fe):(Z[I]=ge,Z[ne]=N,I=ne);else if(fe<F&&0>r(le,N))Z[I]=le,Z[fe]=N,I=fe;else break e}}return U}function r(Z,U){var N=Z.sortIndex-U.sortIndex;return N!==0?N:Z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();a.unstable_now=function(){return l.now()-h}}var d=[],p=[],g=1,v=null,y=3,_=!1,S=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Z){for(var U=t(p);U!==null;){if(U.callback===null)n(p);else if(U.startTime<=Z)n(p),U.sortIndex=U.expirationTime,e(d,U);else break;U=t(p)}}function D(Z){if(b=!1,L(Z),!S)if(t(d)!==null)S=!0,te(j);else{var U=t(p);U!==null&&ie(D,U.startTime-Z)}}function j(Z,U){S=!1,b&&(b=!1,T(Y),Y=-1),_=!0;var N=y;try{for(L(U),v=t(d);v!==null&&(!(v.expirationTime>U)||Z&&!ae());){var I=v.callback;if(typeof I=="function"){v.callback=null,y=v.priorityLevel;var F=I(v.expirationTime<=U);U=a.unstable_now(),typeof F=="function"?v.callback=F:v===t(d)&&n(d),L(U)}else n(d);v=t(d)}if(v!==null)var q=!0;else{var ne=t(p);ne!==null&&ie(D,ne.startTime-U),q=!1}return q}finally{v=null,y=N,_=!1}}var G=!1,V=null,Y=-1,J=5,ue=-1;function ae(){return!(a.unstable_now()-ue<J)}function Me(){if(V!==null){var Z=a.unstable_now();ue=Z;var U=!0;try{U=V(!0,Z)}finally{U?Te():(G=!1,V=null)}}else G=!1}var Te;if(typeof P=="function")Te=function(){P(Me)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,ze=Ae.port2;Ae.port1.onmessage=Me,Te=function(){ze.postMessage(null)}}else Te=function(){k(Me,0)};function te(Z){V=Z,G||(G=!0,Te())}function ie(Z,U){Y=k(function(){Z(a.unstable_now())},U)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Z){Z.callback=null},a.unstable_continueExecution=function(){S||_||(S=!0,te(j))},a.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Z?Math.floor(1e3/Z):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(Z){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var N=y;y=U;try{return Z()}finally{y=N}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Z,U){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var N=y;y=Z;try{return U()}finally{y=N}},a.unstable_scheduleCallback=function(Z,U,N){var I=a.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?I+N:I):N=I,Z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=N+F,Z={id:g++,callback:U,priorityLevel:Z,startTime:N,expirationTime:F,sortIndex:-1},N>I?(Z.sortIndex=N,e(p,Z),t(d)===null&&Z===t(p)&&(b?(T(Y),Y=-1):b=!0,ie(D,N-I))):(Z.sortIndex=F,e(d,Z),S||_||(S=!0,te(j))),Z},a.unstable_shouldYield=ae,a.unstable_wrapCallback=function(Z){var U=y;return function(){var N=y;y=U;try{return Z.apply(this,arguments)}finally{y=N}}}}(ny)),ny}var qS;function IT(){return qS||(qS=1,ty.exports=TT()),ty.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function RT(){if(XS)return Pn;XS=1;var a=cw(),e=IT();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(i,s){l(i,s),l(i+"Capture",s)}function l(i,s){for(r[i]=s,i=0;i<s.length;i++)n.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(i){return d.call(v,i)?!0:d.call(g,i)?!1:p.test(i)?v[i]=!0:(g[i]=!0,!1)}function _(i,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,s,u,f){if(s===null||typeof s>"u"||_(i,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function b(i,s,u,f,m,w,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=s,this.sanitizeURL=w,this.removeEmptyString=E}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];k[s]=new b(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function P(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(T,P);k[s]=new b(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(T,P);k[s]=new b(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(T,P);k[s]=new b(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function L(i,s,u,f){var m=k.hasOwnProperty(s)?k[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,u,m,f)&&(u=null),f||m===null?y(s)&&(u===null?i.removeAttribute(s):i.setAttribute(s,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(s=m.attributeName,f=m.attributeNamespace,u===null?i.removeAttribute(s):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?i.setAttributeNS(f,s,u):i.setAttribute(s,u))))}var D=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),G=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),ae=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var N=Object.assign,I;function F(i){if(I===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+i}var q=!1;function ne(i,s){if(!i||q)return"";q=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var f=H}Reflect.construct(i,[],s)}else{try{s.call()}catch(H){f=H}i.call(s.prototype)}else{try{throw Error()}catch(H){f=H}i()}}catch(H){if(H&&f&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),w=f.stack.split(`
`),E=m.length-1,R=w.length-1;1<=E&&0<=R&&m[E]!==w[R];)R--;for(;1<=E&&0<=R;E--,R--)if(m[E]!==w[R]){if(E!==1||R!==1)do if(E--,R--,0>R||m[E]!==w[R]){var M=`
`+m[E].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=E&&0<=R);break}}}finally{q=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?F(i):""}function ge(i){switch(i.tag){case 5:return F(i.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return i=ne(i.type,!1),i;case 11:return i=ne(i.type.render,!1),i;case 1:return i=ne(i.type,!0),i;default:return""}}function fe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case G:return"Portal";case J:return"Profiler";case Y:return"StrictMode";case Te:return"Suspense";case Ae:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ae:return(i.displayName||"Context")+".Consumer";case ue:return(i._context.displayName||"Context")+".Provider";case Me:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ze:return s=i.displayName||null,s!==null?s:fe(i.type)||"Memo";case te:s=i._payload,i=i._init;try{return fe(i(s))}catch{}}return null}function le(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ce(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function be(i){var s=ce(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),f=""+i[s];if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,w=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(E){f=""+E,w.call(this,E)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ye(i){i._valueTracker||(i._valueTracker=be(i))}function dn(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return i&&(f=ce(i)?i.checked?"true":"false":i.value),i=f,i!==u?(s.setValue(i),!0):!1}function $t(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Cn(i,s){var u=s.checked;return N({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function sm(i,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=Se(s.value!=null?s.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function hl(i,s){s=s.checked,s!=null&&L(i,"checked",s,!1)}function cu(i,s){hl(i,s);var u=Se(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?om(i,s.type,u):s.hasOwnProperty("defaultValue")&&om(i,s.type,Se(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function Yw(i,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,u||s===i.value||(i.value=s),i.defaultValue=s}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function om(i,s,u){(s!=="number"||$t(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var uu=Array.isArray;function dl(i,s,u,f){if(i=i.options,s){s={};for(var m=0;m<u.length;m++)s["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=s.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Se(u),s=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function am(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return N({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qw(i,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(uu(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}i._wrapperState={initialValue:Se(u)}}function Jw(i,s){var u=Se(s.value),f=Se(s.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),s.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Zw(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function e_(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?e_(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var df,t_=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,m){MSApp.execUnsafeLocalFunction(function(){return i(s,u,f,m)})}:i}(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(df=df||document.createElement("div"),df.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=df.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function hu(i,s){if(s){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=s;return}}i.textContent=s}var du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xx=["Webkit","ms","Moz","O"];Object.keys(du).forEach(function(i){xx.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),du[s]=du[i]})});function n_(i,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||du.hasOwnProperty(i)&&du[i]?(""+s).trim():s+"px"}function i_(i,s){i=i.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=n_(u,s[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,m):i[u]=m}}var kx=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cm(i,s){if(s){if(kx[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function um(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hm=null;function dm(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fm=null,fl=null,pl=null;function r_(i){if(i=Nu(i)){if(typeof fm!="function")throw Error(t(280));var s=i.stateNode;s&&(s=Df(s),fm(i.stateNode,i.type,s))}}function s_(i){fl?pl?pl.push(i):pl=[i]:fl=i}function o_(){if(fl){var i=fl,s=pl;if(pl=fl=null,r_(i),s)for(i=0;i<s.length;i++)r_(s[i])}}function a_(i,s){return i(s)}function l_(){}var pm=!1;function c_(i,s,u){if(pm)return i(s,u);pm=!0;try{return a_(i,s,u)}finally{pm=!1,(fl!==null||pl!==null)&&(l_(),o_())}}function fu(i,s){var u=i.stateNode;if(u===null)return null;var f=Df(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var gm=!1;if(h)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){gm=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{gm=!1}function Tx(i,s,u,f,m,w,E,R,M){var H=Array.prototype.slice.call(arguments,3);try{s.apply(u,H)}catch(K){this.onError(K)}}var gu=!1,ff=null,pf=!1,mm=null,Ix={onError:function(i){gu=!0,ff=i}};function Rx(i,s,u,f,m,w,E,R,M){gu=!1,ff=null,Tx.apply(Ix,arguments)}function Px(i,s,u,f,m,w,E,R,M){if(Rx.apply(this,arguments),gu){if(gu){var H=ff;gu=!1,ff=null}else throw Error(t(198));pf||(pf=!0,mm=H)}}function No(i){var s=i,u=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,s.flags&4098&&(u=s.return),i=s.return;while(i)}return s.tag===3?u:null}function u_(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h_(i){if(No(i)!==i)throw Error(t(188))}function Lx(i){var s=i.alternate;if(!s){if(s=No(i),s===null)throw Error(t(188));return s!==i?null:i}for(var u=i,f=s;;){var m=u.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===u)return h_(m),i;if(w===f)return h_(m),s;w=w.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=w;else{for(var E=!1,R=m.child;R;){if(R===u){E=!0,u=m,f=w;break}if(R===f){E=!0,f=m,u=w;break}R=R.sibling}if(!E){for(R=w.child;R;){if(R===u){E=!0,u=w,f=m;break}if(R===f){E=!0,f=w,u=m;break}R=R.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:s}function d_(i){return i=Lx(i),i!==null?f_(i):null}function f_(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=f_(i);if(s!==null)return s;i=i.sibling}return null}var p_=e.unstable_scheduleCallback,g_=e.unstable_cancelCallback,Mx=e.unstable_shouldYield,Nx=e.unstable_requestPaint,yt=e.unstable_now,Dx=e.unstable_getCurrentPriorityLevel,vm=e.unstable_ImmediatePriority,m_=e.unstable_UserBlockingPriority,gf=e.unstable_NormalPriority,Ox=e.unstable_LowPriority,v_=e.unstable_IdlePriority,mf=null,Ki=null;function Fx(i){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(mf,i,void 0,(i.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:jx,Ux=Math.log,Bx=Math.LN2;function jx(i){return i>>>=0,i===0?32:31-(Ux(i)/Bx|0)|0}var vf=64,yf=4194304;function mu(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function wf(i,s){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,w=i.pingedLanes,E=u&268435455;if(E!==0){var R=E&~m;R!==0?f=mu(R):(w&=E,w!==0&&(f=mu(w)))}else E=u&~m,E!==0?f=mu(E):w!==0&&(f=mu(w));if(f===0)return 0;if(s!==0&&s!==f&&!(s&m)&&(m=f&-f,w=s&-s,m>=w||m===16&&(w&4194240)!==0))return s;if(f&4&&(f|=u&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=f;0<s;)u=31-Si(s),m=1<<u,f|=i[u],s&=~m;return f}function zx(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hx(i,s){for(var u=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,w=i.pendingLanes;0<w;){var E=31-Si(w),R=1<<E,M=m[E];M===-1?(!(R&u)||R&f)&&(m[E]=zx(R,s)):M<=s&&(i.expiredLanes|=R),w&=~R}}function ym(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function y_(){var i=vf;return vf<<=1,!(vf&4194240)&&(vf=64),i}function wm(i){for(var s=[],u=0;31>u;u++)s.push(i);return s}function vu(i,s,u){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-Si(s),i[s]=u}function $x(i,s){var u=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-Si(u),w=1<<m;s[m]=0,f[m]=-1,i[m]=-1,u&=~w}}function _m(i,s){var u=i.entangledLanes|=s;for(i=i.entanglements;u;){var f=31-Si(u),m=1<<f;m&s|i[f]&s&&(i[f]|=s),u&=~m}}var qe=0;function w_(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var __,Am,A_,S_,b_,Sm=!1,_f=[],bs=null,Es=null,Cs=null,yu=new Map,wu=new Map,xs=[],Vx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E_(i,s){switch(i){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":yu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function _u(i,s,u,f,m,w){return i===null||i.nativeEvent!==w?(i={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},s!==null&&(s=Nu(s),s!==null&&Am(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function Wx(i,s,u,f,m){switch(s){case"focusin":return bs=_u(bs,i,s,u,f,m),!0;case"dragenter":return Es=_u(Es,i,s,u,f,m),!0;case"mouseover":return Cs=_u(Cs,i,s,u,f,m),!0;case"pointerover":var w=m.pointerId;return yu.set(w,_u(yu.get(w)||null,i,s,u,f,m)),!0;case"gotpointercapture":return w=m.pointerId,wu.set(w,_u(wu.get(w)||null,i,s,u,f,m)),!0}return!1}function C_(i){var s=Do(i.target);if(s!==null){var u=No(s);if(u!==null){if(s=u.tag,s===13){if(s=u_(u),s!==null){i.blockedOn=s,b_(i.priority,function(){A_(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Af(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var u=Em(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);hm=f,u.target.dispatchEvent(f),hm=null}else return s=Nu(u),s!==null&&Am(s),i.blockedOn=u,!1;s.shift()}return!0}function x_(i,s,u){Af(i)&&u.delete(s)}function Gx(){Sm=!1,bs!==null&&Af(bs)&&(bs=null),Es!==null&&Af(Es)&&(Es=null),Cs!==null&&Af(Cs)&&(Cs=null),yu.forEach(x_),wu.forEach(x_)}function Au(i,s){i.blockedOn===s&&(i.blockedOn=null,Sm||(Sm=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gx)))}function Su(i){function s(m){return Au(m,i)}if(0<_f.length){Au(_f[0],i);for(var u=1;u<_f.length;u++){var f=_f[u];f.blockedOn===i&&(f.blockedOn=null)}}for(bs!==null&&Au(bs,i),Es!==null&&Au(Es,i),Cs!==null&&Au(Cs,i),yu.forEach(s),wu.forEach(s),u=0;u<xs.length;u++)f=xs[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<xs.length&&(u=xs[0],u.blockedOn===null);)C_(u),u.blockedOn===null&&xs.shift()}var gl=D.ReactCurrentBatchConfig,Sf=!0;function qx(i,s,u,f){var m=qe,w=gl.transition;gl.transition=null;try{qe=1,bm(i,s,u,f)}finally{qe=m,gl.transition=w}}function Xx(i,s,u,f){var m=qe,w=gl.transition;gl.transition=null;try{qe=4,bm(i,s,u,f)}finally{qe=m,gl.transition=w}}function bm(i,s,u,f){if(Sf){var m=Em(i,s,u,f);if(m===null)zm(i,s,f,bf,u),E_(i,f);else if(Wx(m,i,s,u,f))f.stopPropagation();else if(E_(i,f),s&4&&-1<Vx.indexOf(i)){for(;m!==null;){var w=Nu(m);if(w!==null&&__(w),w=Em(i,s,u,f),w===null&&zm(i,s,f,bf,u),w===m)break;m=w}m!==null&&f.stopPropagation()}else zm(i,s,f,null,u)}}var bf=null;function Em(i,s,u,f){if(bf=null,i=dm(f),i=Do(i),i!==null)if(s=No(i),s===null)i=null;else if(u=s.tag,u===13){if(i=u_(s),i!==null)return i;i=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return bf=i,null}function k_(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dx()){case vm:return 1;case m_:return 4;case gf:case Ox:return 16;case v_:return 536870912;default:return 16}default:return 16}}var ks=null,Cm=null,Ef=null;function T_(){if(Ef)return Ef;var i,s=Cm,u=s.length,f,m="value"in ks?ks.value:ks.textContent,w=m.length;for(i=0;i<u&&s[i]===m[i];i++);var E=u-i;for(f=1;f<=E&&s[u-f]===m[w-f];f++);return Ef=m.slice(i,1<f?1-f:void 0)}function Cf(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function xf(){return!0}function I_(){return!1}function Bn(i){function s(u,f,m,w,E){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(u=i[R],this[R]=u?u(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?xf:I_,this.isPropagationStopped=I_,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),s}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Bn(ml),bu=N({},ml,{view:0,detail:0}),Kx=Bn(bu),km,Tm,Eu,kf=N({},bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rm,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Eu&&(Eu&&i.type==="mousemove"?(km=i.screenX-Eu.screenX,Tm=i.screenY-Eu.screenY):Tm=km=0,Eu=i),km)},movementY:function(i){return"movementY"in i?i.movementY:Tm}}),R_=Bn(kf),Yx=N({},kf,{dataTransfer:0}),Qx=Bn(Yx),Jx=N({},bu,{relatedTarget:0}),Im=Bn(Jx),Zx=N({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=Bn(Zx),tk=N({},ml,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nk=Bn(tk),ik=N({},ml,{data:0}),P_=Bn(ik),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ak(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ok[i])?!!s[i]:!1}function Rm(){return ak}var lk=N({},bu,{key:function(i){if(i.key){var s=rk[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Cf(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rm,charCode:function(i){return i.type==="keypress"?Cf(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cf(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ck=Bn(lk),uk=N({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L_=Bn(uk),hk=N({},bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rm}),dk=Bn(hk),fk=N({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=Bn(fk),gk=N({},kf,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=Bn(gk),vk=[9,13,27,32],Pm=h&&"CompositionEvent"in window,Cu=null;h&&"documentMode"in document&&(Cu=document.documentMode);var yk=h&&"TextEvent"in window&&!Cu,M_=h&&(!Pm||Cu&&8<Cu&&11>=Cu),N_=" ",D_=!1;function O_(i,s){switch(i){case"keyup":return vk.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var vl=!1;function wk(i,s){switch(i){case"compositionend":return F_(s);case"keypress":return s.which!==32?null:(D_=!0,N_);case"textInput":return i=s.data,i===N_&&D_?null:i;default:return null}}function _k(i,s){if(vl)return i==="compositionend"||!Pm&&O_(i,s)?(i=T_(),Ef=Cm=ks=null,vl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return M_&&s.locale!=="ko"?null:s.data;default:return null}}var Ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U_(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Ak[i.type]:s==="textarea"}function B_(i,s,u,f){s_(f),s=Lf(s,"onChange"),0<s.length&&(u=new xm("onChange","change",null,u,f),i.push({event:u,listeners:s}))}var xu=null,ku=null;function Sk(i){iA(i,0)}function Tf(i){var s=Sl(i);if(dn(s))return i}function bk(i,s){if(i==="change")return s}var j_=!1;if(h){var Lm;if(h){var Mm="oninput"in document;if(!Mm){var z_=document.createElement("div");z_.setAttribute("oninput","return;"),Mm=typeof z_.oninput=="function"}Lm=Mm}else Lm=!1;j_=Lm&&(!document.documentMode||9<document.documentMode)}function H_(){xu&&(xu.detachEvent("onpropertychange",$_),ku=xu=null)}function $_(i){if(i.propertyName==="value"&&Tf(ku)){var s=[];B_(s,ku,i,dm(i)),c_(Sk,s)}}function Ek(i,s,u){i==="focusin"?(H_(),xu=s,ku=u,xu.attachEvent("onpropertychange",$_)):i==="focusout"&&H_()}function Ck(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tf(ku)}function xk(i,s){if(i==="click")return Tf(s)}function kk(i,s){if(i==="input"||i==="change")return Tf(s)}function Tk(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var bi=typeof Object.is=="function"?Object.is:Tk;function Tu(i,s){if(bi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var u=Object.keys(i),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!d.call(s,m)||!bi(i[m],s[m]))return!1}return!0}function V_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function W_(i,s){var u=V_(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=s&&f>=s)return{node:u,offset:s-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=V_(u)}}function G_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?G_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function q_(){for(var i=window,s=$t();s instanceof i.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)i=s.contentWindow;else break;s=$t(i.document)}return s}function Nm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function Ik(i){var s=q_(),u=i.focusedElem,f=i.selectionRange;if(s!==u&&u&&u.ownerDocument&&G_(u.ownerDocument.documentElement,u)){if(f!==null&&Nm(u)){if(s=f.start,i=f.end,i===void 0&&(i=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(i,u.value.length);else if(i=(s=u.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,w=Math.min(f.start,m);f=f.end===void 0?w:Math.min(f.end,m),!i.extend&&w>f&&(m=f,f=w,w=m),m=W_(u,w);var E=W_(u,f);m&&E&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),i.removeAllRanges(),w>f?(i.addRange(s),i.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),i.addRange(s)))}}for(s=[],i=u;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)i=s[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Rk=h&&"documentMode"in document&&11>=document.documentMode,yl=null,Dm=null,Iu=null,Om=!1;function X_(i,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Om||yl==null||yl!==$t(f)||(f=yl,"selectionStart"in f&&Nm(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Iu&&Tu(Iu,f)||(Iu=f,f=Lf(Dm,"onSelect"),0<f.length&&(s=new xm("onSelect","select",null,s,u),i.push({event:s,listeners:f}),s.target=yl)))}function If(i,s){var u={};return u[i.toLowerCase()]=s.toLowerCase(),u["Webkit"+i]="webkit"+s,u["Moz"+i]="moz"+s,u}var wl={animationend:If("Animation","AnimationEnd"),animationiteration:If("Animation","AnimationIteration"),animationstart:If("Animation","AnimationStart"),transitionend:If("Transition","TransitionEnd")},Fm={},K_={};h&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Rf(i){if(Fm[i])return Fm[i];if(!wl[i])return i;var s=wl[i],u;for(u in s)if(s.hasOwnProperty(u)&&u in K_)return Fm[i]=s[u];return i}var Y_=Rf("animationend"),Q_=Rf("animationiteration"),J_=Rf("animationstart"),Z_=Rf("transitionend"),eA=new Map,tA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(i,s){eA.set(i,s),o(s,[i])}for(var Um=0;Um<tA.length;Um++){var Bm=tA[Um],Pk=Bm.toLowerCase(),Lk=Bm[0].toUpperCase()+Bm.slice(1);Ts(Pk,"on"+Lk)}Ts(Y_,"onAnimationEnd"),Ts(Q_,"onAnimationIteration"),Ts(J_,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(Z_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ru));function nA(i,s,u){var f=i.type||"unknown-event";i.currentTarget=u,Px(f,s,void 0,i),i.currentTarget=null}function iA(i,s){s=(s&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],m=f.event;f=f.listeners;e:{var w=void 0;if(s)for(var E=f.length-1;0<=E;E--){var R=f[E],M=R.instance,H=R.currentTarget;if(R=R.listener,M!==w&&m.isPropagationStopped())break e;nA(m,R,H),w=M}else for(E=0;E<f.length;E++){if(R=f[E],M=R.instance,H=R.currentTarget,R=R.listener,M!==w&&m.isPropagationStopped())break e;nA(m,R,H),w=M}}}if(pf)throw i=mm,pf=!1,mm=null,i}function it(i,s){var u=s[qm];u===void 0&&(u=s[qm]=new Set);var f=i+"__bubble";u.has(f)||(rA(s,i,2,!1),u.add(f))}function jm(i,s,u){var f=0;s&&(f|=4),rA(u,i,f,s)}var Pf="_reactListening"+Math.random().toString(36).slice(2);function Pu(i){if(!i[Pf]){i[Pf]=!0,n.forEach(function(u){u!=="selectionchange"&&(Mk.has(u)||jm(u,!1,i),jm(u,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Pf]||(s[Pf]=!0,jm("selectionchange",!1,s))}}function rA(i,s,u,f){switch(k_(s)){case 1:var m=qx;break;case 4:m=Xx;break;default:m=bm}u=m.bind(null,s,u,i),m=void 0,!gm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(s,u,{capture:!0,passive:m}):i.addEventListener(s,u,!0):m!==void 0?i.addEventListener(s,u,{passive:m}):i.addEventListener(s,u,!1)}function zm(i,s,u,f,m){var w=f;if(!(s&1)&&!(s&2)&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var R=f.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(E===4)for(E=f.return;E!==null;){var M=E.tag;if((M===3||M===4)&&(M=E.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;E=E.return}for(;R!==null;){if(E=Do(R),E===null)return;if(M=E.tag,M===5||M===6){f=w=E;continue e}R=R.parentNode}}f=f.return}c_(function(){var H=w,K=dm(u),Q=[];e:{var X=eA.get(i);if(X!==void 0){var se=xm,me=i;switch(i){case"keypress":if(Cf(u)===0)break e;case"keydown":case"keyup":se=ck;break;case"focusin":me="focus",se=Im;break;case"focusout":me="blur",se=Im;break;case"beforeblur":case"afterblur":se=Im;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=R_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=dk;break;case Y_:case Q_:case J_:se=ek;break;case Z_:se=pk;break;case"scroll":se=Kx;break;case"wheel":se=mk;break;case"copy":case"cut":case"paste":se=nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=L_}var ve=(s&4)!==0,wt=!ve&&i==="scroll",B=ve?X!==null?X+"Capture":null:X;ve=[];for(var O=H,z;O!==null;){z=O;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,B!==null&&(ee=fu(O,B),ee!=null&&ve.push(Lu(O,ee,z)))),wt)break;O=O.return}0<ve.length&&(X=new se(X,me,null,u,K),Q.push({event:X,listeners:ve}))}}if(!(s&7)){e:{if(X=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",X&&u!==hm&&(me=u.relatedTarget||u.fromElement)&&(Do(me)||me[Cr]))break e;if((se||X)&&(X=K.window===K?K:(X=K.ownerDocument)?X.defaultView||X.parentWindow:window,se?(me=u.relatedTarget||u.toElement,se=H,me=me?Do(me):null,me!==null&&(wt=No(me),me!==wt||me.tag!==5&&me.tag!==6)&&(me=null)):(se=null,me=H),se!==me)){if(ve=R_,ee="onMouseLeave",B="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(ve=L_,ee="onPointerLeave",B="onPointerEnter",O="pointer"),wt=se==null?X:Sl(se),z=me==null?X:Sl(me),X=new ve(ee,O+"leave",se,u,K),X.target=wt,X.relatedTarget=z,ee=null,Do(K)===H&&(ve=new ve(B,O+"enter",me,u,K),ve.target=z,ve.relatedTarget=wt,ee=ve),wt=ee,se&&me)t:{for(ve=se,B=me,O=0,z=ve;z;z=_l(z))O++;for(z=0,ee=B;ee;ee=_l(ee))z++;for(;0<O-z;)ve=_l(ve),O--;for(;0<z-O;)B=_l(B),z--;for(;O--;){if(ve===B||B!==null&&ve===B.alternate)break t;ve=_l(ve),B=_l(B)}ve=null}else ve=null;se!==null&&sA(Q,X,se,ve,!1),me!==null&&wt!==null&&sA(Q,wt,me,ve,!0)}}e:{if(X=H?Sl(H):window,se=X.nodeName&&X.nodeName.toLowerCase(),se==="select"||se==="input"&&X.type==="file")var ye=bk;else if(U_(X))if(j_)ye=kk;else{ye=Ck;var Ee=Ek}else(se=X.nodeName)&&se.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ye=xk);if(ye&&(ye=ye(i,H))){B_(Q,ye,u,K);break e}Ee&&Ee(i,X,H),i==="focusout"&&(Ee=X._wrapperState)&&Ee.controlled&&X.type==="number"&&om(X,"number",X.value)}switch(Ee=H?Sl(H):window,i){case"focusin":(U_(Ee)||Ee.contentEditable==="true")&&(yl=Ee,Dm=H,Iu=null);break;case"focusout":Iu=Dm=yl=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,X_(Q,u,K);break;case"selectionchange":if(Rk)break;case"keydown":case"keyup":X_(Q,u,K)}var Ce;if(Pm)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else vl?O_(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(M_&&u.locale!=="ko"&&(vl||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&vl&&(Ce=T_()):(ks=K,Cm="value"in ks?ks.value:ks.textContent,vl=!0)),Ee=Lf(H,Ie),0<Ee.length&&(Ie=new P_(Ie,i,null,u,K),Q.push({event:Ie,listeners:Ee}),Ce?Ie.data=Ce:(Ce=F_(u),Ce!==null&&(Ie.data=Ce)))),(Ce=yk?wk(i,u):_k(i,u))&&(H=Lf(H,"onBeforeInput"),0<H.length&&(K=new P_("onBeforeInput","beforeinput",null,u,K),Q.push({event:K,listeners:H}),K.data=Ce))}iA(Q,s)})}function Lu(i,s,u){return{instance:i,listener:s,currentTarget:u}}function Lf(i,s){for(var u=s+"Capture",f=[];i!==null;){var m=i,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=fu(i,u),w!=null&&f.unshift(Lu(i,w,m)),w=fu(i,s),w!=null&&f.push(Lu(i,w,m))),i=i.return}return f}function _l(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function sA(i,s,u,f,m){for(var w=s._reactName,E=[];u!==null&&u!==f;){var R=u,M=R.alternate,H=R.stateNode;if(M!==null&&M===f)break;R.tag===5&&H!==null&&(R=H,m?(M=fu(u,w),M!=null&&E.unshift(Lu(u,M,R))):m||(M=fu(u,w),M!=null&&E.push(Lu(u,M,R)))),u=u.return}E.length!==0&&i.push({event:s,listeners:E})}var Nk=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function oA(i){return(typeof i=="string"?i:""+i).replace(Nk,`
`).replace(Dk,"")}function Mf(i,s,u){if(s=oA(s),oA(i)!==s&&u)throw Error(t(425))}function Nf(){}var Hm=null,$m=null;function Vm(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wm=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,aA=typeof Promise=="function"?Promise:void 0,Fk=typeof queueMicrotask=="function"?queueMicrotask:typeof aA<"u"?function(i){return aA.resolve(null).then(i).catch(Uk)}:Wm;function Uk(i){setTimeout(function(){throw i})}function Gm(i,s){var u=s,f=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){i.removeChild(m),Su(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);Su(s)}function Is(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function lA(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return i;s--}else u==="/$"&&s++}i=i.previousSibling}return null}var Al=Math.random().toString(36).slice(2),Yi="__reactFiber$"+Al,Mu="__reactProps$"+Al,Cr="__reactContainer$"+Al,qm="__reactEvents$"+Al,Bk="__reactListeners$"+Al,jk="__reactHandles$"+Al;function Do(i){var s=i[Yi];if(s)return s;for(var u=i.parentNode;u;){if(s=u[Cr]||u[Yi]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(i=lA(i);i!==null;){if(u=i[Yi])return u;i=lA(i)}return s}i=u,u=i.parentNode}return null}function Nu(i){return i=i[Yi]||i[Cr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Sl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Df(i){return i[Mu]||null}var Xm=[],bl=-1;function Rs(i){return{current:i}}function rt(i){0>bl||(i.current=Xm[bl],Xm[bl]=null,bl--)}function tt(i,s){bl++,Xm[bl]=i.current,i.current=s}var Ps={},Jt=Rs(Ps),xn=Rs(!1),Oo=Ps;function El(i,s){var u=i.type.contextTypes;if(!u)return Ps;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in u)m[w]=s[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=m),m}function kn(i){return i=i.childContextTypes,i!=null}function Of(){rt(xn),rt(Jt)}function cA(i,s,u){if(Jt.current!==Ps)throw Error(t(168));tt(Jt,s),tt(xn,u)}function uA(i,s,u){var f=i.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(t(108,le(i)||"Unknown",m));return N({},u,f)}function Ff(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ps,Oo=Jt.current,tt(Jt,i),tt(xn,xn.current),!0}function hA(i,s,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=uA(i,s,Oo),f.__reactInternalMemoizedMergedChildContext=i,rt(xn),rt(Jt),tt(Jt,i)):rt(xn),tt(xn,u)}var xr=null,Uf=!1,Km=!1;function dA(i){xr===null?xr=[i]:xr.push(i)}function zk(i){Uf=!0,dA(i)}function Ls(){if(!Km&&xr!==null){Km=!0;var i=0,s=qe;try{var u=xr;for(qe=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}xr=null,Uf=!1}catch(m){throw xr!==null&&(xr=xr.slice(i+1)),p_(vm,Ls),m}finally{qe=s,Km=!1}}return null}var Cl=[],xl=0,Bf=null,jf=0,si=[],oi=0,Fo=null,kr=1,Tr="";function Uo(i,s){Cl[xl++]=jf,Cl[xl++]=Bf,Bf=i,jf=s}function fA(i,s,u){si[oi++]=kr,si[oi++]=Tr,si[oi++]=Fo,Fo=i;var f=kr;i=Tr;var m=32-Si(f)-1;f&=~(1<<m),u+=1;var w=32-Si(s)+m;if(30<w){var E=m-m%5;w=(f&(1<<E)-1).toString(32),f>>=E,m-=E,kr=1<<32-Si(s)+m|u<<m|f,Tr=w+i}else kr=1<<w|u<<m|f,Tr=i}function Ym(i){i.return!==null&&(Uo(i,1),fA(i,1,0))}function Qm(i){for(;i===Bf;)Bf=Cl[--xl],Cl[xl]=null,jf=Cl[--xl],Cl[xl]=null;for(;i===Fo;)Fo=si[--oi],si[oi]=null,Tr=si[--oi],si[oi]=null,kr=si[--oi],si[oi]=null}var jn=null,zn=null,ot=!1,Ei=null;function pA(i,s){var u=ui(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=i,s=i.deletions,s===null?(i.deletions=[u],i.flags|=16):s.push(u)}function gA(i,s){switch(i.tag){case 5:var u=i.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,jn=i,zn=Is(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,jn=i,zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=Fo!==null?{id:kr,overflow:Tr}:null,i.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=ui(18,null,null,0),u.stateNode=s,u.return=i,i.child=u,jn=i,zn=null,!0):!1;default:return!1}}function Jm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Zm(i){if(ot){var s=zn;if(s){var u=s;if(!gA(i,s)){if(Jm(i))throw Error(t(418));s=Is(u.nextSibling);var f=jn;s&&gA(i,s)?pA(f,u):(i.flags=i.flags&-4097|2,ot=!1,jn=i)}}else{if(Jm(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,jn=i}}}function mA(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;jn=i}function zf(i){if(i!==jn)return!1;if(!ot)return mA(i),ot=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Vm(i.type,i.memoizedProps)),s&&(s=zn)){if(Jm(i))throw vA(),Error(t(418));for(;s;)pA(i,s),s=Is(s.nextSibling)}if(mA(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(s===0){zn=Is(i.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}i=i.nextSibling}zn=null}}else zn=jn?Is(i.stateNode.nextSibling):null;return!0}function vA(){for(var i=zn;i;)i=Is(i.nextSibling)}function kl(){zn=jn=null,ot=!1}function ev(i){Ei===null?Ei=[i]:Ei.push(i)}var Hk=D.ReactCurrentBatchConfig;function Du(i,s,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var m=f,w=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===w?s.ref:(s=function(E){var R=m.refs;E===null?delete R[w]:R[w]=E},s._stringRef=w,s)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Hf(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function yA(i){var s=i._init;return s(i._payload)}function wA(i){function s(B,O){if(i){var z=B.deletions;z===null?(B.deletions=[O],B.flags|=16):z.push(O)}}function u(B,O){if(!i)return null;for(;O!==null;)s(B,O),O=O.sibling;return null}function f(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function m(B,O){return B=js(B,O),B.index=0,B.sibling=null,B}function w(B,O,z){return B.index=z,i?(z=B.alternate,z!==null?(z=z.index,z<O?(B.flags|=2,O):z):(B.flags|=2,O)):(B.flags|=1048576,O)}function E(B){return i&&B.alternate===null&&(B.flags|=2),B}function R(B,O,z,ee){return O===null||O.tag!==6?(O=Wv(z,B.mode,ee),O.return=B,O):(O=m(O,z),O.return=B,O)}function M(B,O,z,ee){var ye=z.type;return ye===V?K(B,O,z.props.children,ee,z.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===te&&yA(ye)===O.type)?(ee=m(O,z.props),ee.ref=Du(B,O,z),ee.return=B,ee):(ee=dp(z.type,z.key,z.props,null,B.mode,ee),ee.ref=Du(B,O,z),ee.return=B,ee)}function H(B,O,z,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Gv(z,B.mode,ee),O.return=B,O):(O=m(O,z.children||[]),O.return=B,O)}function K(B,O,z,ee,ye){return O===null||O.tag!==7?(O=Go(z,B.mode,ee,ye),O.return=B,O):(O=m(O,z),O.return=B,O)}function Q(B,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Wv(""+O,B.mode,z),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return z=dp(O.type,O.key,O.props,null,B.mode,z),z.ref=Du(B,null,O),z.return=B,z;case G:return O=Gv(O,B.mode,z),O.return=B,O;case te:var ee=O._init;return Q(B,ee(O._payload),z)}if(uu(O)||U(O))return O=Go(O,B.mode,z,null),O.return=B,O;Hf(B,O)}return null}function X(B,O,z,ee){var ye=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:R(B,O,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return z.key===ye?M(B,O,z,ee):null;case G:return z.key===ye?H(B,O,z,ee):null;case te:return ye=z._init,X(B,O,ye(z._payload),ee)}if(uu(z)||U(z))return ye!==null?null:K(B,O,z,ee,null);Hf(B,z)}return null}function se(B,O,z,ee,ye){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return B=B.get(z)||null,R(O,B,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return B=B.get(ee.key===null?z:ee.key)||null,M(O,B,ee,ye);case G:return B=B.get(ee.key===null?z:ee.key)||null,H(O,B,ee,ye);case te:var Ee=ee._init;return se(B,O,z,Ee(ee._payload),ye)}if(uu(ee)||U(ee))return B=B.get(z)||null,K(O,B,ee,ye,null);Hf(O,ee)}return null}function me(B,O,z,ee){for(var ye=null,Ee=null,Ce=O,Ie=O=0,Ot=null;Ce!==null&&Ie<z.length;Ie++){Ce.index>Ie?(Ot=Ce,Ce=null):Ot=Ce.sibling;var Ve=X(B,Ce,z[Ie],ee);if(Ve===null){Ce===null&&(Ce=Ot);break}i&&Ce&&Ve.alternate===null&&s(B,Ce),O=w(Ve,O,Ie),Ee===null?ye=Ve:Ee.sibling=Ve,Ee=Ve,Ce=Ot}if(Ie===z.length)return u(B,Ce),ot&&Uo(B,Ie),ye;if(Ce===null){for(;Ie<z.length;Ie++)Ce=Q(B,z[Ie],ee),Ce!==null&&(O=w(Ce,O,Ie),Ee===null?ye=Ce:Ee.sibling=Ce,Ee=Ce);return ot&&Uo(B,Ie),ye}for(Ce=f(B,Ce);Ie<z.length;Ie++)Ot=se(Ce,B,Ie,z[Ie],ee),Ot!==null&&(i&&Ot.alternate!==null&&Ce.delete(Ot.key===null?Ie:Ot.key),O=w(Ot,O,Ie),Ee===null?ye=Ot:Ee.sibling=Ot,Ee=Ot);return i&&Ce.forEach(function(zs){return s(B,zs)}),ot&&Uo(B,Ie),ye}function ve(B,O,z,ee){var ye=U(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var Ee=ye=null,Ce=O,Ie=O=0,Ot=null,Ve=z.next();Ce!==null&&!Ve.done;Ie++,Ve=z.next()){Ce.index>Ie?(Ot=Ce,Ce=null):Ot=Ce.sibling;var zs=X(B,Ce,Ve.value,ee);if(zs===null){Ce===null&&(Ce=Ot);break}i&&Ce&&zs.alternate===null&&s(B,Ce),O=w(zs,O,Ie),Ee===null?ye=zs:Ee.sibling=zs,Ee=zs,Ce=Ot}if(Ve.done)return u(B,Ce),ot&&Uo(B,Ie),ye;if(Ce===null){for(;!Ve.done;Ie++,Ve=z.next())Ve=Q(B,Ve.value,ee),Ve!==null&&(O=w(Ve,O,Ie),Ee===null?ye=Ve:Ee.sibling=Ve,Ee=Ve);return ot&&Uo(B,Ie),ye}for(Ce=f(B,Ce);!Ve.done;Ie++,Ve=z.next())Ve=se(Ce,B,Ie,Ve.value,ee),Ve!==null&&(i&&Ve.alternate!==null&&Ce.delete(Ve.key===null?Ie:Ve.key),O=w(Ve,O,Ie),Ee===null?ye=Ve:Ee.sibling=Ve,Ee=Ve);return i&&Ce.forEach(function(AT){return s(B,AT)}),ot&&Uo(B,Ie),ye}function wt(B,O,z,ee){if(typeof z=="object"&&z!==null&&z.type===V&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case j:e:{for(var ye=z.key,Ee=O;Ee!==null;){if(Ee.key===ye){if(ye=z.type,ye===V){if(Ee.tag===7){u(B,Ee.sibling),O=m(Ee,z.props.children),O.return=B,B=O;break e}}else if(Ee.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===te&&yA(ye)===Ee.type){u(B,Ee.sibling),O=m(Ee,z.props),O.ref=Du(B,Ee,z),O.return=B,B=O;break e}u(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}z.type===V?(O=Go(z.props.children,B.mode,ee,z.key),O.return=B,B=O):(ee=dp(z.type,z.key,z.props,null,B.mode,ee),ee.ref=Du(B,O,z),ee.return=B,B=ee)}return E(B);case G:e:{for(Ee=z.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){u(B,O.sibling),O=m(O,z.children||[]),O.return=B,B=O;break e}else{u(B,O);break}else s(B,O);O=O.sibling}O=Gv(z,B.mode,ee),O.return=B,B=O}return E(B);case te:return Ee=z._init,wt(B,O,Ee(z._payload),ee)}if(uu(z))return me(B,O,z,ee);if(U(z))return ve(B,O,z,ee);Hf(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(u(B,O.sibling),O=m(O,z),O.return=B,B=O):(u(B,O),O=Wv(z,B.mode,ee),O.return=B,B=O),E(B)):u(B,O)}return wt}var Tl=wA(!0),_A=wA(!1),$f=Rs(null),Vf=null,Il=null,tv=null;function nv(){tv=Il=Vf=null}function iv(i){var s=$f.current;rt($f),i._currentValue=s}function rv(i,s,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===u)break;i=i.return}}function Rl(i,s){Vf=i,tv=Il=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&s&&(Tn=!0),i.firstContext=null)}function ai(i){var s=i._currentValue;if(tv!==i)if(i={context:i,memoizedValue:s,next:null},Il===null){if(Vf===null)throw Error(t(308));Il=i,Vf.dependencies={lanes:0,firstContext:i}}else Il=Il.next=i;return s}var Bo=null;function sv(i){Bo===null?Bo=[i]:Bo.push(i)}function AA(i,s,u,f){var m=s.interleaved;return m===null?(u.next=u,sv(s)):(u.next=m.next,m.next=u),s.interleaved=u,Ir(i,f)}function Ir(i,s){i.lanes|=s;var u=i.alternate;for(u!==null&&(u.lanes|=s),u=i,i=i.return;i!==null;)i.childLanes|=s,u=i.alternate,u!==null&&(u.childLanes|=s),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ms=!1;function ov(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SA(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Rr(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Ns(i,s,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,He&2){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,Ir(i,u)}return m=f.interleaved,m===null?(s.next=s,sv(f)):(s.next=m.next,m.next=s),f.interleaved=s,Ir(i,u)}function Wf(i,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,_m(i,u)}}function bA(i,s){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};w===null?m=w=E:w=w.next=E,u=u.next}while(u!==null);w===null?m=w=s:w=w.next=s}else m=w=s;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=s:i.next=s,u.lastBaseUpdate=s}function Gf(i,s,u,f){var m=i.updateQueue;Ms=!1;var w=m.firstBaseUpdate,E=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var M=R,H=M.next;M.next=null,E===null?w=H:E.next=H,E=M;var K=i.alternate;K!==null&&(K=K.updateQueue,R=K.lastBaseUpdate,R!==E&&(R===null?K.firstBaseUpdate=H:R.next=H,K.lastBaseUpdate=M))}if(w!==null){var Q=m.baseState;E=0,K=H=M=null,R=w;do{var X=R.lane,se=R.eventTime;if((f&X)===X){K!==null&&(K=K.next={eventTime:se,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var me=i,ve=R;switch(X=s,se=u,ve.tag){case 1:if(me=ve.payload,typeof me=="function"){Q=me.call(se,Q,X);break e}Q=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ve.payload,X=typeof me=="function"?me.call(se,Q,X):me,X==null)break e;Q=N({},Q,X);break e;case 2:Ms=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,X=m.effects,X===null?m.effects=[R]:X.push(R))}else se={eventTime:se,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},K===null?(H=K=se,M=Q):K=K.next=se,E|=X;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;X=R,R=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);if(K===null&&(M=Q),m.baseState=M,m.firstBaseUpdate=H,m.lastBaseUpdate=K,s=m.shared.interleaved,s!==null){m=s;do E|=m.lane,m=m.next;while(m!==s)}else w===null&&(m.shared.lanes=0);Ho|=E,i.lanes=E,i.memoizedState=Q}}function EA(i,s,u){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var f=i[s],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Ou={},Qi=Rs(Ou),Fu=Rs(Ou),Uu=Rs(Ou);function jo(i){if(i===Ou)throw Error(t(174));return i}function av(i,s){switch(tt(Uu,s),tt(Fu,i),tt(Qi,Ou),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lm(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=lm(s,i)}rt(Qi),tt(Qi,s)}function Pl(){rt(Qi),rt(Fu),rt(Uu)}function CA(i){jo(Uu.current);var s=jo(Qi.current),u=lm(s,i.type);s!==u&&(tt(Fu,i),tt(Qi,u))}function lv(i){Fu.current===i&&(rt(Qi),rt(Fu))}var ht=Rs(0);function qf(i){for(var s=i;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var cv=[];function uv(){for(var i=0;i<cv.length;i++)cv[i]._workInProgressVersionPrimary=null;cv.length=0}var Xf=D.ReactCurrentDispatcher,hv=D.ReactCurrentBatchConfig,zo=0,dt=null,kt=null,Nt=null,Kf=!1,Bu=!1,ju=0,$k=0;function Zt(){throw Error(t(321))}function dv(i,s){if(s===null)return!1;for(var u=0;u<s.length&&u<i.length;u++)if(!bi(i[u],s[u]))return!1;return!0}function fv(i,s,u,f,m,w){if(zo=w,dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Xf.current=i===null||i.memoizedState===null?qk:Xk,i=u(f,m),Bu){w=0;do{if(Bu=!1,ju=0,25<=w)throw Error(t(301));w+=1,Nt=kt=null,s.updateQueue=null,Xf.current=Kk,i=u(f,m)}while(Bu)}if(Xf.current=Jf,s=kt!==null&&kt.next!==null,zo=0,Nt=kt=dt=null,Kf=!1,s)throw Error(t(300));return i}function pv(){var i=ju!==0;return ju=0,i}function Ji(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?dt.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function li(){if(kt===null){var i=dt.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var s=Nt===null?dt.memoizedState:Nt.next;if(s!==null)Nt=s,kt=i;else{if(i===null)throw Error(t(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Nt===null?dt.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function zu(i,s){return typeof s=="function"?s(i):s}function gv(i){var s=li(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=kt,m=f.baseQueue,w=u.pending;if(w!==null){if(m!==null){var E=m.next;m.next=w.next,w.next=E}f.baseQueue=m=w,u.pending=null}if(m!==null){w=m.next,f=f.baseState;var R=E=null,M=null,H=w;do{var K=H.lane;if((zo&K)===K)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),f=H.hasEagerState?H.eagerState:i(f,H.action);else{var Q={lane:K,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(R=M=Q,E=f):M=M.next=Q,dt.lanes|=K,Ho|=K}H=H.next}while(H!==null&&H!==w);M===null?E=f:M.next=R,bi(f,s.memoizedState)||(Tn=!0),s.memoizedState=f,s.baseState=E,s.baseQueue=M,u.lastRenderedState=f}if(i=u.interleaved,i!==null){m=i;do w=m.lane,dt.lanes|=w,Ho|=w,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function mv(i){var s=li(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,m=u.pending,w=s.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do w=i(w,E.action),E=E.next;while(E!==m);bi(w,s.memoizedState)||(Tn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),u.lastRenderedState=w}return[w,f]}function xA(){}function kA(i,s){var u=dt,f=li(),m=s(),w=!bi(f.memoizedState,m);if(w&&(f.memoizedState=m,Tn=!0),f=f.queue,vv(RA.bind(null,u,f,i),[i]),f.getSnapshot!==s||w||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Hu(9,IA.bind(null,u,f,m,s),void 0,null),Dt===null)throw Error(t(349));zo&30||TA(u,s,m)}return m}function TA(i,s,u){i.flags|=16384,i={getSnapshot:s,value:u},s=dt.updateQueue,s===null?(s={lastEffect:null,stores:null},dt.updateQueue=s,s.stores=[i]):(u=s.stores,u===null?s.stores=[i]:u.push(i))}function IA(i,s,u,f){s.value=u,s.getSnapshot=f,PA(s)&&LA(i)}function RA(i,s,u){return u(function(){PA(s)&&LA(i)})}function PA(i){var s=i.getSnapshot;i=i.value;try{var u=s();return!bi(i,u)}catch{return!0}}function LA(i){var s=Ir(i,1);s!==null&&Ti(s,i,1,-1)}function MA(i){var s=Ji();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:i},s.queue=i,i=i.dispatch=Gk.bind(null,dt,i),[s.memoizedState,i]}function Hu(i,s,u,f){return i={tag:i,create:s,destroy:u,deps:f,next:null},s=dt.updateQueue,s===null?(s={lastEffect:null,stores:null},dt.updateQueue=s,s.lastEffect=i.next=i):(u=s.lastEffect,u===null?s.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,s.lastEffect=i)),i}function NA(){return li().memoizedState}function Yf(i,s,u,f){var m=Ji();dt.flags|=i,m.memoizedState=Hu(1|s,u,void 0,f===void 0?null:f)}function Qf(i,s,u,f){var m=li();f=f===void 0?null:f;var w=void 0;if(kt!==null){var E=kt.memoizedState;if(w=E.destroy,f!==null&&dv(f,E.deps)){m.memoizedState=Hu(s,u,w,f);return}}dt.flags|=i,m.memoizedState=Hu(1|s,u,w,f)}function DA(i,s){return Yf(8390656,8,i,s)}function vv(i,s){return Qf(2048,8,i,s)}function OA(i,s){return Qf(4,2,i,s)}function FA(i,s){return Qf(4,4,i,s)}function UA(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function BA(i,s,u){return u=u!=null?u.concat([i]):null,Qf(4,4,UA.bind(null,s,i),u)}function yv(){}function jA(i,s){var u=li();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&dv(s,f[1])?f[0]:(u.memoizedState=[i,s],i)}function zA(i,s){var u=li();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&dv(s,f[1])?f[0]:(i=i(),u.memoizedState=[i,s],i)}function HA(i,s,u){return zo&21?(bi(u,s)||(u=y_(),dt.lanes|=u,Ho|=u,i.baseState=!0),s):(i.baseState&&(i.baseState=!1,Tn=!0),i.memoizedState=u)}function Vk(i,s){var u=qe;qe=u!==0&&4>u?u:4,i(!0);var f=hv.transition;hv.transition={};try{i(!1),s()}finally{qe=u,hv.transition=f}}function $A(){return li().memoizedState}function Wk(i,s,u){var f=Us(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},VA(i))WA(s,u);else if(u=AA(i,s,u,f),u!==null){var m=pn();Ti(u,i,f,m),GA(u,s,f)}}function Gk(i,s,u){var f=Us(i),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(VA(i))WA(s,m);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var E=s.lastRenderedState,R=w(E,u);if(m.hasEagerState=!0,m.eagerState=R,bi(R,E)){var M=s.interleaved;M===null?(m.next=m,sv(s)):(m.next=M.next,M.next=m),s.interleaved=m;return}}catch{}finally{}u=AA(i,s,m,f),u!==null&&(m=pn(),Ti(u,i,f,m),GA(u,s,f))}}function VA(i){var s=i.alternate;return i===dt||s!==null&&s===dt}function WA(i,s){Bu=Kf=!0;var u=i.pending;u===null?s.next=s:(s.next=u.next,u.next=s),i.pending=s}function GA(i,s,u){if(u&4194240){var f=s.lanes;f&=i.pendingLanes,u|=f,s.lanes=u,_m(i,u)}}var Jf={readContext:ai,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},qk={readContext:ai,useCallback:function(i,s){return Ji().memoizedState=[i,s===void 0?null:s],i},useContext:ai,useEffect:DA,useImperativeHandle:function(i,s,u){return u=u!=null?u.concat([i]):null,Yf(4194308,4,UA.bind(null,s,i),u)},useLayoutEffect:function(i,s){return Yf(4194308,4,i,s)},useInsertionEffect:function(i,s){return Yf(4,2,i,s)},useMemo:function(i,s){var u=Ji();return s=s===void 0?null:s,i=i(),u.memoizedState=[i,s],i},useReducer:function(i,s,u){var f=Ji();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},f.queue=i,i=i.dispatch=Wk.bind(null,dt,i),[f.memoizedState,i]},useRef:function(i){var s=Ji();return i={current:i},s.memoizedState=i},useState:MA,useDebugValue:yv,useDeferredValue:function(i){return Ji().memoizedState=i},useTransition:function(){var i=MA(!1),s=i[0];return i=Vk.bind(null,i[1]),Ji().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,u){var f=dt,m=Ji();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),Dt===null)throw Error(t(349));zo&30||TA(f,s,u)}m.memoizedState=u;var w={value:u,getSnapshot:s};return m.queue=w,DA(RA.bind(null,f,w,i),[i]),f.flags|=2048,Hu(9,IA.bind(null,f,w,u,s),void 0,null),u},useId:function(){var i=Ji(),s=Dt.identifierPrefix;if(ot){var u=Tr,f=kr;u=(f&~(1<<32-Si(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=ju++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=$k++,s=":"+s+"r"+u.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},Xk={readContext:ai,useCallback:jA,useContext:ai,useEffect:vv,useImperativeHandle:BA,useInsertionEffect:OA,useLayoutEffect:FA,useMemo:zA,useReducer:gv,useRef:NA,useState:function(){return gv(zu)},useDebugValue:yv,useDeferredValue:function(i){var s=li();return HA(s,kt.memoizedState,i)},useTransition:function(){var i=gv(zu)[0],s=li().memoizedState;return[i,s]},useMutableSource:xA,useSyncExternalStore:kA,useId:$A,unstable_isNewReconciler:!1},Kk={readContext:ai,useCallback:jA,useContext:ai,useEffect:vv,useImperativeHandle:BA,useInsertionEffect:OA,useLayoutEffect:FA,useMemo:zA,useReducer:mv,useRef:NA,useState:function(){return mv(zu)},useDebugValue:yv,useDeferredValue:function(i){var s=li();return kt===null?s.memoizedState=i:HA(s,kt.memoizedState,i)},useTransition:function(){var i=mv(zu)[0],s=li().memoizedState;return[i,s]},useMutableSource:xA,useSyncExternalStore:kA,useId:$A,unstable_isNewReconciler:!1};function Ci(i,s){if(i&&i.defaultProps){s=N({},s),i=i.defaultProps;for(var u in i)s[u]===void 0&&(s[u]=i[u]);return s}return s}function wv(i,s,u,f){s=i.memoizedState,u=u(f,s),u=u==null?s:N({},s,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Zf={isMounted:function(i){return(i=i._reactInternals)?No(i)===i:!1},enqueueSetState:function(i,s,u){i=i._reactInternals;var f=pn(),m=Us(i),w=Rr(f,m);w.payload=s,u!=null&&(w.callback=u),s=Ns(i,w,m),s!==null&&(Ti(s,i,m,f),Wf(s,i,m))},enqueueReplaceState:function(i,s,u){i=i._reactInternals;var f=pn(),m=Us(i),w=Rr(f,m);w.tag=1,w.payload=s,u!=null&&(w.callback=u),s=Ns(i,w,m),s!==null&&(Ti(s,i,m,f),Wf(s,i,m))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var u=pn(),f=Us(i),m=Rr(u,f);m.tag=2,s!=null&&(m.callback=s),s=Ns(i,m,f),s!==null&&(Ti(s,i,f,u),Wf(s,i,f))}};function qA(i,s,u,f,m,w,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,E):s.prototype&&s.prototype.isPureReactComponent?!Tu(u,f)||!Tu(m,w):!0}function XA(i,s,u){var f=!1,m=Ps,w=s.contextType;return typeof w=="object"&&w!==null?w=ai(w):(m=kn(s)?Oo:Jt.current,f=s.contextTypes,w=(f=f!=null)?El(i,m):Ps),s=new s(u,w),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zf,i.stateNode=s,s._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=w),s}function KA(i,s,u,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==i&&Zf.enqueueReplaceState(s,s.state,null)}function _v(i,s,u,f){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},ov(i);var w=s.contextType;typeof w=="object"&&w!==null?m.context=ai(w):(w=kn(s)?Oo:Jt.current,m.context=El(i,w)),m.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(wv(i,s,w,u),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Zf.enqueueReplaceState(m,m.state,null),Gf(i,u,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ll(i,s){try{var u="",f=s;do u+=ge(f),f=f.return;while(f);var m=u}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:s,stack:m,digest:null}}function Av(i,s,u){return{value:i,source:null,stack:u??null,digest:s??null}}function Sv(i,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var Yk=typeof WeakMap=="function"?WeakMap:Map;function YA(i,s,u){u=Rr(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){op||(op=!0,Fv=f),Sv(i,s)},u}function QA(i,s,u){u=Rr(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;u.payload=function(){return f(m)},u.callback=function(){Sv(i,s)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(u.callback=function(){Sv(i,s),typeof f!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),u}function JA(i,s,u){var f=i.pingCache;if(f===null){f=i.pingCache=new Yk;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(u)||(m.add(u),i=uT.bind(null,i,s,u),s.then(i,i))}function ZA(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function eS(i,s,u,f,m){return i.mode&1?(i.flags|=65536,i.lanes=m,i):(i===s?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=Rr(-1,1),s.tag=2,Ns(u,s,1))),u.lanes|=1),i)}var Qk=D.ReactCurrentOwner,Tn=!1;function fn(i,s,u,f){s.child=i===null?_A(s,null,u,f):Tl(s,i.child,u,f)}function tS(i,s,u,f,m){u=u.render;var w=s.ref;return Rl(s,m),f=fv(i,s,u,f,w,m),u=pv(),i!==null&&!Tn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,Pr(i,s,m)):(ot&&u&&Ym(s),s.flags|=1,fn(i,s,f,m),s.child)}function nS(i,s,u,f,m){if(i===null){var w=u.type;return typeof w=="function"&&!Vv(w)&&w.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=w,iS(i,s,w,f,m)):(i=dp(u.type,null,f,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(w=i.child,!(i.lanes&m)){var E=w.memoizedProps;if(u=u.compare,u=u!==null?u:Tu,u(E,f)&&i.ref===s.ref)return Pr(i,s,m)}return s.flags|=1,i=js(w,f),i.ref=s.ref,i.return=s,s.child=i}function iS(i,s,u,f,m){if(i!==null){var w=i.memoizedProps;if(Tu(w,f)&&i.ref===s.ref)if(Tn=!1,s.pendingProps=f=w,(i.lanes&m)!==0)i.flags&131072&&(Tn=!0);else return s.lanes=i.lanes,Pr(i,s,m)}return bv(i,s,u,f,m)}function rS(i,s,u){var f=s.pendingProps,m=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Nl,Hn),Hn|=u;else{if(!(u&1073741824))return i=w!==null?w.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,tt(Nl,Hn),Hn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:u,tt(Nl,Hn),Hn|=f}else w!==null?(f=w.baseLanes|u,s.memoizedState=null):f=u,tt(Nl,Hn),Hn|=f;return fn(i,s,m,u),s.child}function sS(i,s){var u=s.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function bv(i,s,u,f,m){var w=kn(u)?Oo:Jt.current;return w=El(s,w),Rl(s,m),u=fv(i,s,u,f,w,m),f=pv(),i!==null&&!Tn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,Pr(i,s,m)):(ot&&f&&Ym(s),s.flags|=1,fn(i,s,u,m),s.child)}function oS(i,s,u,f,m){if(kn(u)){var w=!0;Ff(s)}else w=!1;if(Rl(s,m),s.stateNode===null)tp(i,s),XA(s,u,f),_v(s,u,f,m),f=!0;else if(i===null){var E=s.stateNode,R=s.memoizedProps;E.props=R;var M=E.context,H=u.contextType;typeof H=="object"&&H!==null?H=ai(H):(H=kn(u)?Oo:Jt.current,H=El(s,H));var K=u.getDerivedStateFromProps,Q=typeof K=="function"||typeof E.getSnapshotBeforeUpdate=="function";Q||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==f||M!==H)&&KA(s,E,f,H),Ms=!1;var X=s.memoizedState;E.state=X,Gf(s,f,E,m),M=s.memoizedState,R!==f||X!==M||xn.current||Ms?(typeof K=="function"&&(wv(s,u,K,f),M=s.memoizedState),(R=Ms||qA(s,u,R,f,X,M,H))?(Q||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=M),E.props=f,E.state=M,E.context=H,f=R):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{E=s.stateNode,SA(i,s),R=s.memoizedProps,H=s.type===s.elementType?R:Ci(s.type,R),E.props=H,Q=s.pendingProps,X=E.context,M=u.contextType,typeof M=="object"&&M!==null?M=ai(M):(M=kn(u)?Oo:Jt.current,M=El(s,M));var se=u.getDerivedStateFromProps;(K=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==Q||X!==M)&&KA(s,E,f,M),Ms=!1,X=s.memoizedState,E.state=X,Gf(s,f,E,m);var me=s.memoizedState;R!==Q||X!==me||xn.current||Ms?(typeof se=="function"&&(wv(s,u,se,f),me=s.memoizedState),(H=Ms||qA(s,u,H,f,X,me,M)||!1)?(K||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(f,me,M),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(f,me,M)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=me),E.props=f,E.state=me,E.context=M,f=H):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),f=!1)}return Ev(i,s,u,f,w,m)}function Ev(i,s,u,f,m,w){sS(i,s);var E=(s.flags&128)!==0;if(!f&&!E)return m&&hA(s,u,!1),Pr(i,s,w);f=s.stateNode,Qk.current=s;var R=E&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,i!==null&&E?(s.child=Tl(s,i.child,null,w),s.child=Tl(s,null,R,w)):fn(i,s,R,w),s.memoizedState=f.state,m&&hA(s,u,!0),s.child}function aS(i){var s=i.stateNode;s.pendingContext?cA(i,s.pendingContext,s.pendingContext!==s.context):s.context&&cA(i,s.context,!1),av(i,s.containerInfo)}function lS(i,s,u,f,m){return kl(),ev(m),s.flags|=256,fn(i,s,u,f),s.child}var Cv={dehydrated:null,treeContext:null,retryLane:0};function xv(i){return{baseLanes:i,cachePool:null,transitions:null}}function cS(i,s,u){var f=s.pendingProps,m=ht.current,w=!1,E=(s.flags&128)!==0,R;if((R=E)||(R=i!==null&&i.memoizedState===null?!1:(m&2)!==0),R?(w=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),tt(ht,m&1),i===null)return Zm(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(s.mode&1?i.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=f.children,i=f.fallback,w?(f=s.mode,w=s.child,E={mode:"hidden",children:E},!(f&1)&&w!==null?(w.childLanes=0,w.pendingProps=E):w=fp(E,f,0,null),i=Go(i,f,u,null),w.return=s,i.return=s,w.sibling=i,s.child=w,s.child.memoizedState=xv(u),s.memoizedState=Cv,i):kv(s,E));if(m=i.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return Jk(i,s,E,f,R,m,u);if(w){w=f.fallback,E=s.mode,m=i.child,R=m.sibling;var M={mode:"hidden",children:f.children};return!(E&1)&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=M,s.deletions=null):(f=js(m,M),f.subtreeFlags=m.subtreeFlags&14680064),R!==null?w=js(R,w):(w=Go(w,E,u,null),w.flags|=2),w.return=s,f.return=s,f.sibling=w,s.child=f,f=w,w=s.child,E=i.child.memoizedState,E=E===null?xv(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},w.memoizedState=E,w.childLanes=i.childLanes&~u,s.memoizedState=Cv,f}return w=i.child,i=w.sibling,f=js(w,{mode:"visible",children:f.children}),!(s.mode&1)&&(f.lanes=u),f.return=s,f.sibling=null,i!==null&&(u=s.deletions,u===null?(s.deletions=[i],s.flags|=16):u.push(i)),s.child=f,s.memoizedState=null,f}function kv(i,s){return s=fp({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function ep(i,s,u,f){return f!==null&&ev(f),Tl(s,i.child,null,u),i=kv(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Jk(i,s,u,f,m,w,E){if(u)return s.flags&256?(s.flags&=-257,f=Av(Error(t(422))),ep(i,s,E,f)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(w=f.fallback,m=s.mode,f=fp({mode:"visible",children:f.children},m,0,null),w=Go(w,m,E,null),w.flags|=2,f.return=s,w.return=s,f.sibling=w,s.child=f,s.mode&1&&Tl(s,i.child,null,E),s.child.memoizedState=xv(E),s.memoizedState=Cv,w);if(!(s.mode&1))return ep(i,s,E,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var R=f.dgst;return f=R,w=Error(t(419)),f=Av(w,f,void 0),ep(i,s,E,f)}if(R=(E&i.childLanes)!==0,Tn||R){if(f=Dt,f!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|E)?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,Ir(i,m),Ti(f,i,m,-1))}return $v(),f=Av(Error(t(421))),ep(i,s,E,f)}return m.data==="$?"?(s.flags|=128,s.child=i.child,s=hT.bind(null,i),m._reactRetry=s,null):(i=w.treeContext,zn=Is(m.nextSibling),jn=s,ot=!0,Ei=null,i!==null&&(si[oi++]=kr,si[oi++]=Tr,si[oi++]=Fo,kr=i.id,Tr=i.overflow,Fo=s),s=kv(s,f.children),s.flags|=4096,s)}function uS(i,s,u){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),rv(i.return,s,u)}function Tv(i,s,u,f,m){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=u,w.tailMode=m)}function hS(i,s,u){var f=s.pendingProps,m=f.revealOrder,w=f.tail;if(fn(i,s,f.children,u),f=ht.current,f&2)f=f&1|2,s.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&uS(i,u,s);else if(i.tag===19)uS(i,u,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(tt(ht,f),!(s.mode&1))s.memoizedState=null;else switch(m){case"forwards":for(u=s.child,m=null;u!==null;)i=u.alternate,i!==null&&qf(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=s.child,s.child=null):(m=u.sibling,u.sibling=null),Tv(s,!1,m,u,w);break;case"backwards":for(u=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&qf(i)===null){s.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Tv(s,!0,u,null,w);break;case"together":Tv(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function tp(i,s){!(s.mode&1)&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function Pr(i,s,u){if(i!==null&&(s.dependencies=i.dependencies),Ho|=s.lanes,!(u&s.childLanes))return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,u=js(i,i.pendingProps),s.child=u,u.return=s;i.sibling!==null;)i=i.sibling,u=u.sibling=js(i,i.pendingProps),u.return=s;u.sibling=null}return s.child}function Zk(i,s,u){switch(s.tag){case 3:aS(s),kl();break;case 5:CA(s);break;case 1:kn(s.type)&&Ff(s);break;case 4:av(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;tt($f,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(tt(ht,ht.current&1),s.flags|=128,null):u&s.child.childLanes?cS(i,s,u):(tt(ht,ht.current&1),i=Pr(i,s,u),i!==null?i.sibling:null);tt(ht,ht.current&1);break;case 19:if(f=(u&s.childLanes)!==0,i.flags&128){if(f)return hS(i,s,u);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(ht,ht.current),f)break;return null;case 22:case 23:return s.lanes=0,rS(i,s,u)}return Pr(i,s,u)}var dS,Iv,fS,pS;dS=function(i,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Iv=function(){},fS=function(i,s,u,f){var m=i.memoizedProps;if(m!==f){i=s.stateNode,jo(Qi.current);var w=null;switch(u){case"input":m=Cn(i,m),f=Cn(i,f),w=[];break;case"select":m=N({},m,{value:void 0}),f=N({},f,{value:void 0}),w=[];break;case"textarea":m=am(i,m),f=am(i,f),w=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Nf)}cm(u,f);var E;u=null;for(H in m)if(!f.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var R=m[H];for(E in R)R.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(r.hasOwnProperty(H)?w||(w=[]):(w=w||[]).push(H,null));for(H in f){var M=f[H];if(R=m!=null?m[H]:void 0,f.hasOwnProperty(H)&&M!==R&&(M!=null||R!=null))if(H==="style")if(R){for(E in R)!R.hasOwnProperty(E)||M&&M.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in M)M.hasOwnProperty(E)&&R[E]!==M[E]&&(u||(u={}),u[E]=M[E])}else u||(w||(w=[]),w.push(H,u)),u=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,R=R?R.__html:void 0,M!=null&&R!==M&&(w=w||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(w=w||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(r.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&it("scroll",i),w||R===M||(w=[])):(w=w||[]).push(H,M))}u&&(w=w||[]).push("style",u);var H=w;(s.updateQueue=H)&&(s.flags|=4)}},pS=function(i,s,u,f){u!==f&&(s.flags|=4)};function $u(i,s){if(!ot)switch(i.tailMode){case"hidden":s=i.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function en(i){var s=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(s)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=u,s}function eT(i,s,u){var f=s.pendingProps;switch(Qm(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(s),null;case 1:return kn(s.type)&&Of(),en(s),null;case 3:return f=s.stateNode,Pl(),rt(xn),rt(Jt),uv(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(zf(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ei!==null&&(jv(Ei),Ei=null))),Iv(i,s),en(s),null;case 5:lv(s);var m=jo(Uu.current);if(u=s.type,i!==null&&s.stateNode!=null)fS(i,s,u,f,m),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return en(s),null}if(i=jo(Qi.current),zf(s)){f=s.stateNode,u=s.type;var w=s.memoizedProps;switch(f[Yi]=s,f[Mu]=w,i=(s.mode&1)!==0,u){case"dialog":it("cancel",f),it("close",f);break;case"iframe":case"object":case"embed":it("load",f);break;case"video":case"audio":for(m=0;m<Ru.length;m++)it(Ru[m],f);break;case"source":it("error",f);break;case"img":case"image":case"link":it("error",f),it("load",f);break;case"details":it("toggle",f);break;case"input":sm(f,w),it("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},it("invalid",f);break;case"textarea":Qw(f,w),it("invalid",f)}cm(u,w),m=null;for(var E in w)if(w.hasOwnProperty(E)){var R=w[E];E==="children"?typeof R=="string"?f.textContent!==R&&(w.suppressHydrationWarning!==!0&&Mf(f.textContent,R,i),m=["children",R]):typeof R=="number"&&f.textContent!==""+R&&(w.suppressHydrationWarning!==!0&&Mf(f.textContent,R,i),m=["children",""+R]):r.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&it("scroll",f)}switch(u){case"input":Ye(f),Yw(f,w,!0);break;case"textarea":Ye(f),Zw(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Nf)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=e_(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=E.createElement(u,{is:f.is}):(i=E.createElement(u),u==="select"&&(E=i,f.multiple?E.multiple=!0:f.size&&(E.size=f.size))):i=E.createElementNS(i,u),i[Yi]=s,i[Mu]=f,dS(i,s,!1,!1),s.stateNode=i;e:{switch(E=um(u,f),u){case"dialog":it("cancel",i),it("close",i),m=f;break;case"iframe":case"object":case"embed":it("load",i),m=f;break;case"video":case"audio":for(m=0;m<Ru.length;m++)it(Ru[m],i);m=f;break;case"source":it("error",i),m=f;break;case"img":case"image":case"link":it("error",i),it("load",i),m=f;break;case"details":it("toggle",i),m=f;break;case"input":sm(i,f),m=Cn(i,f),it("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=N({},f,{value:void 0}),it("invalid",i);break;case"textarea":Qw(i,f),m=am(i,f),it("invalid",i);break;default:m=f}cm(u,m),R=m;for(w in R)if(R.hasOwnProperty(w)){var M=R[w];w==="style"?i_(i,M):w==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&t_(i,M)):w==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&hu(i,M):typeof M=="number"&&hu(i,""+M):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(r.hasOwnProperty(w)?M!=null&&w==="onScroll"&&it("scroll",i):M!=null&&L(i,w,M,E))}switch(u){case"input":Ye(i),Yw(i,f,!1);break;case"textarea":Ye(i),Zw(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Se(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?dl(i,!!f.multiple,w,!1):f.defaultValue!=null&&dl(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Nf)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return en(s),null;case 6:if(i&&s.stateNode!=null)pS(i,s,i.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=jo(Uu.current),jo(Qi.current),zf(s)){if(f=s.stateNode,u=s.memoizedProps,f[Yi]=s,(w=f.nodeValue!==u)&&(i=jn,i!==null))switch(i.tag){case 3:Mf(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Mf(f.nodeValue,u,(i.mode&1)!==0)}w&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Yi]=s,s.stateNode=f}return en(s),null;case 13:if(rt(ht),f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&zn!==null&&s.mode&1&&!(s.flags&128))vA(),kl(),s.flags|=98560,w=!1;else if(w=zf(s),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Yi]=s}else kl(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;en(s),w=!1}else Ei!==null&&(jv(Ei),Ei=null),w=!0;if(!w)return s.flags&65536?s:null}return s.flags&128?(s.lanes=u,s):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(s.child.flags|=8192,s.mode&1&&(i===null||ht.current&1?Tt===0&&(Tt=3):$v())),s.updateQueue!==null&&(s.flags|=4),en(s),null);case 4:return Pl(),Iv(i,s),i===null&&Pu(s.stateNode.containerInfo),en(s),null;case 10:return iv(s.type._context),en(s),null;case 17:return kn(s.type)&&Of(),en(s),null;case 19:if(rt(ht),w=s.memoizedState,w===null)return en(s),null;if(f=(s.flags&128)!==0,E=w.rendering,E===null)if(f)$u(w,!1);else{if(Tt!==0||i!==null&&i.flags&128)for(i=s.child;i!==null;){if(E=qf(i),E!==null){for(s.flags|=128,$u(w,!1),f=E.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)w=u,i=f,w.flags&=14680066,E=w.alternate,E===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=E.childLanes,w.lanes=E.lanes,w.child=E.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=E.memoizedProps,w.memoizedState=E.memoizedState,w.updateQueue=E.updateQueue,w.type=E.type,i=E.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return tt(ht,ht.current&1|2),s.child}i=i.sibling}w.tail!==null&&yt()>Dl&&(s.flags|=128,f=!0,$u(w,!1),s.lanes=4194304)}else{if(!f)if(i=qf(E),i!==null){if(s.flags|=128,f=!0,u=i.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),$u(w,!0),w.tail===null&&w.tailMode==="hidden"&&!E.alternate&&!ot)return en(s),null}else 2*yt()-w.renderingStartTime>Dl&&u!==1073741824&&(s.flags|=128,f=!0,$u(w,!1),s.lanes=4194304);w.isBackwards?(E.sibling=s.child,s.child=E):(u=w.last,u!==null?u.sibling=E:s.child=E,w.last=E)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=yt(),s.sibling=null,u=ht.current,tt(ht,f?u&1|2:u&1),s):(en(s),null);case 22:case 23:return Hv(),f=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(s.flags|=8192),f&&s.mode&1?Hn&1073741824&&(en(s),s.subtreeFlags&6&&(s.flags|=8192)):en(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tT(i,s){switch(Qm(s),s.tag){case 1:return kn(s.type)&&Of(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Pl(),rt(xn),rt(Jt),uv(),i=s.flags,i&65536&&!(i&128)?(s.flags=i&-65537|128,s):null;case 5:return lv(s),null;case 13:if(rt(ht),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));kl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return rt(ht),null;case 4:return Pl(),null;case 10:return iv(s.type._context),null;case 22:case 23:return Hv(),null;case 24:return null;default:return null}}var np=!1,tn=!1,nT=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ml(i,s){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){mt(i,s,f)}else u.current=null}function Rv(i,s,u){try{u()}catch(f){mt(i,s,f)}}var gS=!1;function iT(i,s){if(Hm=Sf,i=q_(),Nm(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var E=0,R=-1,M=-1,H=0,K=0,Q=i,X=null;t:for(;;){for(var se;Q!==u||m!==0&&Q.nodeType!==3||(R=E+m),Q!==w||f!==0&&Q.nodeType!==3||(M=E+f),Q.nodeType===3&&(E+=Q.nodeValue.length),(se=Q.firstChild)!==null;)X=Q,Q=se;for(;;){if(Q===i)break t;if(X===u&&++H===m&&(R=E),X===w&&++K===f&&(M=E),(se=Q.nextSibling)!==null)break;Q=X,X=Q.parentNode}Q=se}u=R===-1||M===-1?null:{start:R,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for($m={focusedElem:i,selectionRange:u},Sf=!1,he=s;he!==null;)if(s=he,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,he=i;else for(;he!==null;){s=he;try{var me=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ve=me.memoizedProps,wt=me.memoizedState,B=s.stateNode,O=B.getSnapshotBeforeUpdate(s.elementType===s.type?ve:Ci(s.type,ve),wt);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){mt(s,s.return,ee)}if(i=s.sibling,i!==null){i.return=s.return,he=i;break}he=s.return}return me=gS,gS=!1,me}function Vu(i,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var w=m.destroy;m.destroy=void 0,w!==void 0&&Rv(s,u,w)}m=m.next}while(m!==f)}}function ip(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function Pv(i){var s=i.ref;if(s!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof s=="function"?s(i):s.current=i}}function mS(i){var s=i.alternate;s!==null&&(i.alternate=null,mS(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Yi],delete s[Mu],delete s[qm],delete s[Bk],delete s[jk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function vS(i){return i.tag===5||i.tag===3||i.tag===4}function yS(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||vS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lv(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(i,s):u.insertBefore(i,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(i,u)):(s=u,s.appendChild(i)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Nf));else if(f!==4&&(i=i.child,i!==null))for(Lv(i,s,u),i=i.sibling;i!==null;)Lv(i,s,u),i=i.sibling}function Mv(i,s,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?u.insertBefore(i,s):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Mv(i,s,u),i=i.sibling;i!==null;)Mv(i,s,u),i=i.sibling}var Vt=null,xi=!1;function Ds(i,s,u){for(u=u.child;u!==null;)wS(i,s,u),u=u.sibling}function wS(i,s,u){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(mf,u)}catch{}switch(u.tag){case 5:tn||Ml(u,s);case 6:var f=Vt,m=xi;Vt=null,Ds(i,s,u),Vt=f,xi=m,Vt!==null&&(xi?(i=Vt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Vt.removeChild(u.stateNode));break;case 18:Vt!==null&&(xi?(i=Vt,u=u.stateNode,i.nodeType===8?Gm(i.parentNode,u):i.nodeType===1&&Gm(i,u),Su(i)):Gm(Vt,u.stateNode));break;case 4:f=Vt,m=xi,Vt=u.stateNode.containerInfo,xi=!0,Ds(i,s,u),Vt=f,xi=m;break;case 0:case 11:case 14:case 15:if(!tn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var w=m,E=w.destroy;w=w.tag,E!==void 0&&(w&2||w&4)&&Rv(u,s,E),m=m.next}while(m!==f)}Ds(i,s,u);break;case 1:if(!tn&&(Ml(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(R){mt(u,s,R)}Ds(i,s,u);break;case 21:Ds(i,s,u);break;case 22:u.mode&1?(tn=(f=tn)||u.memoizedState!==null,Ds(i,s,u),tn=f):Ds(i,s,u);break;default:Ds(i,s,u)}}function _S(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new nT),s.forEach(function(f){var m=dT.bind(null,i,f);u.has(f)||(u.add(f),f.then(m,m))})}}function ki(i,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var w=i,E=s,R=E;e:for(;R!==null;){switch(R.tag){case 5:Vt=R.stateNode,xi=!1;break e;case 3:Vt=R.stateNode.containerInfo,xi=!0;break e;case 4:Vt=R.stateNode.containerInfo,xi=!0;break e}R=R.return}if(Vt===null)throw Error(t(160));wS(w,E,m),Vt=null,xi=!1;var M=m.alternate;M!==null&&(M.return=null),m.return=null}catch(H){mt(m,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)AS(s,i),s=s.sibling}function AS(i,s){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ki(s,i),Zi(i),f&4){try{Vu(3,i,i.return),ip(3,i)}catch(ve){mt(i,i.return,ve)}try{Vu(5,i,i.return)}catch(ve){mt(i,i.return,ve)}}break;case 1:ki(s,i),Zi(i),f&512&&u!==null&&Ml(u,u.return);break;case 5:if(ki(s,i),Zi(i),f&512&&u!==null&&Ml(u,u.return),i.flags&32){var m=i.stateNode;try{hu(m,"")}catch(ve){mt(i,i.return,ve)}}if(f&4&&(m=i.stateNode,m!=null)){var w=i.memoizedProps,E=u!==null?u.memoizedProps:w,R=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{R==="input"&&w.type==="radio"&&w.name!=null&&hl(m,w),um(R,E);var H=um(R,w);for(E=0;E<M.length;E+=2){var K=M[E],Q=M[E+1];K==="style"?i_(m,Q):K==="dangerouslySetInnerHTML"?t_(m,Q):K==="children"?hu(m,Q):L(m,K,Q,H)}switch(R){case"input":cu(m,w);break;case"textarea":Jw(m,w);break;case"select":var X=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var se=w.value;se!=null?dl(m,!!w.multiple,se,!1):X!==!!w.multiple&&(w.defaultValue!=null?dl(m,!!w.multiple,w.defaultValue,!0):dl(m,!!w.multiple,w.multiple?[]:"",!1))}m[Mu]=w}catch(ve){mt(i,i.return,ve)}}break;case 6:if(ki(s,i),Zi(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,w=i.memoizedProps;try{m.nodeValue=w}catch(ve){mt(i,i.return,ve)}}break;case 3:if(ki(s,i),Zi(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Su(s.containerInfo)}catch(ve){mt(i,i.return,ve)}break;case 4:ki(s,i),Zi(i);break;case 13:ki(s,i),Zi(i),m=i.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(Ov=yt())),f&4&&_S(i);break;case 22:if(K=u!==null&&u.memoizedState!==null,i.mode&1?(tn=(H=tn)||K,ki(s,i),tn=H):ki(s,i),Zi(i),f&8192){if(H=i.memoizedState!==null,(i.stateNode.isHidden=H)&&!K&&i.mode&1)for(he=i,K=i.child;K!==null;){for(Q=he=K;he!==null;){switch(X=he,se=X.child,X.tag){case 0:case 11:case 14:case 15:Vu(4,X,X.return);break;case 1:Ml(X,X.return);var me=X.stateNode;if(typeof me.componentWillUnmount=="function"){f=X,u=X.return;try{s=f,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ve){mt(f,u,ve)}}break;case 5:Ml(X,X.return);break;case 22:if(X.memoizedState!==null){ES(Q);continue}}se!==null?(se.return=X,he=se):ES(Q)}K=K.sibling}e:for(K=null,Q=i;;){if(Q.tag===5){if(K===null){K=Q;try{m=Q.stateNode,H?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(R=Q.stateNode,M=Q.memoizedProps.style,E=M!=null&&M.hasOwnProperty("display")?M.display:null,R.style.display=n_("display",E))}catch(ve){mt(i,i.return,ve)}}}else if(Q.tag===6){if(K===null)try{Q.stateNode.nodeValue=H?"":Q.memoizedProps}catch(ve){mt(i,i.return,ve)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===i)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===i)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===i)break e;K===Q&&(K=null),Q=Q.return}K===Q&&(K=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:ki(s,i),Zi(i),f&4&&_S(i);break;case 21:break;default:ki(s,i),Zi(i)}}function Zi(i){var s=i.flags;if(s&2){try{e:{for(var u=i.return;u!==null;){if(vS(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(hu(m,""),f.flags&=-33);var w=yS(i);Mv(i,w,m);break;case 3:case 4:var E=f.stateNode.containerInfo,R=yS(i);Lv(i,R,E);break;default:throw Error(t(161))}}catch(M){mt(i,i.return,M)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function rT(i,s,u){he=i,SS(i)}function SS(i,s,u){for(var f=(i.mode&1)!==0;he!==null;){var m=he,w=m.child;if(m.tag===22&&f){var E=m.memoizedState!==null||np;if(!E){var R=m.alternate,M=R!==null&&R.memoizedState!==null||tn;R=np;var H=tn;if(np=E,(tn=M)&&!H)for(he=m;he!==null;)E=he,M=E.child,E.tag===22&&E.memoizedState!==null?CS(m):M!==null?(M.return=E,he=M):CS(m);for(;w!==null;)he=w,SS(w),w=w.sibling;he=m,np=R,tn=H}bS(i)}else m.subtreeFlags&8772&&w!==null?(w.return=m,he=w):bS(i)}}function bS(i){for(;he!==null;){var s=he;if(s.flags&8772){var u=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:tn||ip(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!tn)if(u===null)f.componentDidMount();else{var m=s.elementType===s.type?u.memoizedProps:Ci(s.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=s.updateQueue;w!==null&&EA(s,w,f);break;case 3:var E=s.updateQueue;if(E!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}EA(s,E,u)}break;case 5:var R=s.stateNode;if(u===null&&s.flags&4){u=R;var M=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var K=H.memoizedState;if(K!==null){var Q=K.dehydrated;Q!==null&&Su(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}tn||s.flags&512&&Pv(s)}catch(X){mt(s,s.return,X)}}if(s===i){he=null;break}if(u=s.sibling,u!==null){u.return=s.return,he=u;break}he=s.return}}function ES(i){for(;he!==null;){var s=he;if(s===i){he=null;break}var u=s.sibling;if(u!==null){u.return=s.return,he=u;break}he=s.return}}function CS(i){for(;he!==null;){var s=he;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{ip(4,s)}catch(M){mt(s,u,M)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(M){mt(s,m,M)}}var w=s.return;try{Pv(s)}catch(M){mt(s,w,M)}break;case 5:var E=s.return;try{Pv(s)}catch(M){mt(s,E,M)}}}catch(M){mt(s,s.return,M)}if(s===i){he=null;break}var R=s.sibling;if(R!==null){R.return=s.return,he=R;break}he=s.return}}var sT=Math.ceil,rp=D.ReactCurrentDispatcher,Nv=D.ReactCurrentOwner,ci=D.ReactCurrentBatchConfig,He=0,Dt=null,bt=null,Wt=0,Hn=0,Nl=Rs(0),Tt=0,Wu=null,Ho=0,sp=0,Dv=0,Gu=null,In=null,Ov=0,Dl=1/0,Lr=null,op=!1,Fv=null,Os=null,ap=!1,Fs=null,lp=0,qu=0,Uv=null,cp=-1,up=0;function pn(){return He&6?yt():cp!==-1?cp:cp=yt()}function Us(i){return i.mode&1?He&2&&Wt!==0?Wt&-Wt:Hk.transition!==null?(up===0&&(up=y_()),up):(i=qe,i!==0||(i=window.event,i=i===void 0?16:k_(i.type)),i):1}function Ti(i,s,u,f){if(50<qu)throw qu=0,Uv=null,Error(t(185));vu(i,u,f),(!(He&2)||i!==Dt)&&(i===Dt&&(!(He&2)&&(sp|=u),Tt===4&&Bs(i,Wt)),Rn(i,f),u===1&&He===0&&!(s.mode&1)&&(Dl=yt()+500,Uf&&Ls()))}function Rn(i,s){var u=i.callbackNode;Hx(i,s);var f=wf(i,i===Dt?Wt:0);if(f===0)u!==null&&g_(u),i.callbackNode=null,i.callbackPriority=0;else if(s=f&-f,i.callbackPriority!==s){if(u!=null&&g_(u),s===1)i.tag===0?zk(kS.bind(null,i)):dA(kS.bind(null,i)),Fk(function(){!(He&6)&&Ls()}),u=null;else{switch(w_(f)){case 1:u=vm;break;case 4:u=m_;break;case 16:u=gf;break;case 536870912:u=v_;break;default:u=gf}u=DS(u,xS.bind(null,i))}i.callbackPriority=s,i.callbackNode=u}}function xS(i,s){if(cp=-1,up=0,He&6)throw Error(t(327));var u=i.callbackNode;if(Ol()&&i.callbackNode!==u)return null;var f=wf(i,i===Dt?Wt:0);if(f===0)return null;if(f&30||f&i.expiredLanes||s)s=hp(i,f);else{s=f;var m=He;He|=2;var w=IS();(Dt!==i||Wt!==s)&&(Lr=null,Dl=yt()+500,Vo(i,s));do try{lT();break}catch(R){TS(i,R)}while(!0);nv(),rp.current=w,He=m,bt!==null?s=0:(Dt=null,Wt=0,s=Tt)}if(s!==0){if(s===2&&(m=ym(i),m!==0&&(f=m,s=Bv(i,m))),s===1)throw u=Wu,Vo(i,0),Bs(i,f),Rn(i,yt()),u;if(s===6)Bs(i,f);else{if(m=i.current.alternate,!(f&30)&&!oT(m)&&(s=hp(i,f),s===2&&(w=ym(i),w!==0&&(f=w,s=Bv(i,w))),s===1))throw u=Wu,Vo(i,0),Bs(i,f),Rn(i,yt()),u;switch(i.finishedWork=m,i.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:Wo(i,In,Lr);break;case 3:if(Bs(i,f),(f&130023424)===f&&(s=Ov+500-yt(),10<s)){if(wf(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){pn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Wm(Wo.bind(null,i,In,Lr),s);break}Wo(i,In,Lr);break;case 4:if(Bs(i,f),(f&4194240)===f)break;for(s=i.eventTimes,m=-1;0<f;){var E=31-Si(f);w=1<<E,E=s[E],E>m&&(m=E),f&=~w}if(f=m,f=yt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*sT(f/1960))-f,10<f){i.timeoutHandle=Wm(Wo.bind(null,i,In,Lr),f);break}Wo(i,In,Lr);break;case 5:Wo(i,In,Lr);break;default:throw Error(t(329))}}}return Rn(i,yt()),i.callbackNode===u?xS.bind(null,i):null}function Bv(i,s){var u=Gu;return i.current.memoizedState.isDehydrated&&(Vo(i,s).flags|=256),i=hp(i,s),i!==2&&(s=In,In=u,s!==null&&jv(s)),i}function jv(i){In===null?In=i:In.push.apply(In,i)}function oT(i){for(var s=i;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],w=m.getSnapshot;m=m.value;try{if(!bi(w(),m))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bs(i,s){for(s&=~Dv,s&=~sp,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var u=31-Si(s),f=1<<u;i[u]=-1,s&=~f}}function kS(i){if(He&6)throw Error(t(327));Ol();var s=wf(i,0);if(!(s&1))return Rn(i,yt()),null;var u=hp(i,s);if(i.tag!==0&&u===2){var f=ym(i);f!==0&&(s=f,u=Bv(i,f))}if(u===1)throw u=Wu,Vo(i,0),Bs(i,s),Rn(i,yt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Wo(i,In,Lr),Rn(i,yt()),null}function zv(i,s){var u=He;He|=1;try{return i(s)}finally{He=u,He===0&&(Dl=yt()+500,Uf&&Ls())}}function $o(i){Fs!==null&&Fs.tag===0&&!(He&6)&&Ol();var s=He;He|=1;var u=ci.transition,f=qe;try{if(ci.transition=null,qe=1,i)return i()}finally{qe=f,ci.transition=u,He=s,!(He&6)&&Ls()}}function Hv(){Hn=Nl.current,rt(Nl)}function Vo(i,s){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Ok(u)),bt!==null)for(u=bt.return;u!==null;){var f=u;switch(Qm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Of();break;case 3:Pl(),rt(xn),rt(Jt),uv();break;case 5:lv(f);break;case 4:Pl();break;case 13:rt(ht);break;case 19:rt(ht);break;case 10:iv(f.type._context);break;case 22:case 23:Hv()}u=u.return}if(Dt=i,bt=i=js(i.current,null),Wt=Hn=s,Tt=0,Wu=null,Dv=sp=Ho=0,In=Gu=null,Bo!==null){for(s=0;s<Bo.length;s++)if(u=Bo[s],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,w=u.pending;if(w!==null){var E=w.next;w.next=m,f.next=E}u.pending=f}Bo=null}return i}function TS(i,s){do{var u=bt;try{if(nv(),Xf.current=Jf,Kf){for(var f=dt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Kf=!1}if(zo=0,Nt=kt=dt=null,Bu=!1,ju=0,Nv.current=null,u===null||u.return===null){Tt=1,Wu=s,bt=null;break}e:{var w=i,E=u.return,R=u,M=s;if(s=Wt,R.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,K=R,Q=K.tag;if(!(K.mode&1)&&(Q===0||Q===11||Q===15)){var X=K.alternate;X?(K.updateQueue=X.updateQueue,K.memoizedState=X.memoizedState,K.lanes=X.lanes):(K.updateQueue=null,K.memoizedState=null)}var se=ZA(E);if(se!==null){se.flags&=-257,eS(se,E,R,w,s),se.mode&1&&JA(w,H,s),s=se,M=H;var me=s.updateQueue;if(me===null){var ve=new Set;ve.add(M),s.updateQueue=ve}else me.add(M);break e}else{if(!(s&1)){JA(w,H,s),$v();break e}M=Error(t(426))}}else if(ot&&R.mode&1){var wt=ZA(E);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),eS(wt,E,R,w,s),ev(Ll(M,R));break e}}w=M=Ll(M,R),Tt!==4&&(Tt=2),Gu===null?Gu=[w]:Gu.push(w),w=E;do{switch(w.tag){case 3:w.flags|=65536,s&=-s,w.lanes|=s;var B=YA(w,M,s);bA(w,B);break e;case 1:R=M;var O=w.type,z=w.stateNode;if(!(w.flags&128)&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Os===null||!Os.has(z)))){w.flags|=65536,s&=-s,w.lanes|=s;var ee=QA(w,R,s);bA(w,ee);break e}}w=w.return}while(w!==null)}PS(u)}catch(ye){s=ye,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function IS(){var i=rp.current;return rp.current=Jf,i===null?Jf:i}function $v(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Dt===null||!(Ho&268435455)&&!(sp&268435455)||Bs(Dt,Wt)}function hp(i,s){var u=He;He|=2;var f=IS();(Dt!==i||Wt!==s)&&(Lr=null,Vo(i,s));do try{aT();break}catch(m){TS(i,m)}while(!0);if(nv(),He=u,rp.current=f,bt!==null)throw Error(t(261));return Dt=null,Wt=0,Tt}function aT(){for(;bt!==null;)RS(bt)}function lT(){for(;bt!==null&&!Mx();)RS(bt)}function RS(i){var s=NS(i.alternate,i,Hn);i.memoizedProps=i.pendingProps,s===null?PS(i):bt=s,Nv.current=null}function PS(i){var s=i;do{var u=s.alternate;if(i=s.return,s.flags&32768){if(u=tT(u,s),u!==null){u.flags&=32767,bt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tt=6,bt=null;return}}else if(u=eT(u,s,Hn),u!==null){bt=u;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=i}while(s!==null);Tt===0&&(Tt=5)}function Wo(i,s,u){var f=qe,m=ci.transition;try{ci.transition=null,qe=1,cT(i,s,u,f)}finally{ci.transition=m,qe=f}return null}function cT(i,s,u,f){do Ol();while(Fs!==null);if(He&6)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=u.lanes|u.childLanes;if($x(i,w),i===Dt&&(bt=Dt=null,Wt=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||ap||(ap=!0,DS(gf,function(){return Ol(),null})),w=(u.flags&15990)!==0,u.subtreeFlags&15990||w){w=ci.transition,ci.transition=null;var E=qe;qe=1;var R=He;He|=4,Nv.current=null,iT(i,u),AS(u,i),Ik($m),Sf=!!Hm,$m=Hm=null,i.current=u,rT(u),Nx(),He=R,qe=E,ci.transition=w}else i.current=u;if(ap&&(ap=!1,Fs=i,lp=m),w=i.pendingLanes,w===0&&(Os=null),Fx(u.stateNode),Rn(i,yt()),s!==null)for(f=i.onRecoverableError,u=0;u<s.length;u++)m=s[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(op)throw op=!1,i=Fv,Fv=null,i;return lp&1&&i.tag!==0&&Ol(),w=i.pendingLanes,w&1?i===Uv?qu++:(qu=0,Uv=i):qu=0,Ls(),null}function Ol(){if(Fs!==null){var i=w_(lp),s=ci.transition,u=qe;try{if(ci.transition=null,qe=16>i?16:i,Fs===null)var f=!1;else{if(i=Fs,Fs=null,lp=0,He&6)throw Error(t(331));var m=He;for(He|=4,he=i.current;he!==null;){var w=he,E=w.child;if(he.flags&16){var R=w.deletions;if(R!==null){for(var M=0;M<R.length;M++){var H=R[M];for(he=H;he!==null;){var K=he;switch(K.tag){case 0:case 11:case 15:Vu(8,K,w)}var Q=K.child;if(Q!==null)Q.return=K,he=Q;else for(;he!==null;){K=he;var X=K.sibling,se=K.return;if(mS(K),K===H){he=null;break}if(X!==null){X.return=se,he=X;break}he=se}}}var me=w.alternate;if(me!==null){var ve=me.child;if(ve!==null){me.child=null;do{var wt=ve.sibling;ve.sibling=null,ve=wt}while(ve!==null)}}he=w}}if(w.subtreeFlags&2064&&E!==null)E.return=w,he=E;else e:for(;he!==null;){if(w=he,w.flags&2048)switch(w.tag){case 0:case 11:case 15:Vu(9,w,w.return)}var B=w.sibling;if(B!==null){B.return=w.return,he=B;break e}he=w.return}}var O=i.current;for(he=O;he!==null;){E=he;var z=E.child;if(E.subtreeFlags&2064&&z!==null)z.return=E,he=z;else e:for(E=O;he!==null;){if(R=he,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:ip(9,R)}}catch(ye){mt(R,R.return,ye)}if(R===E){he=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,he=ee;break e}he=R.return}}if(He=m,Ls(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(mf,i)}catch{}f=!0}return f}finally{qe=u,ci.transition=s}}return!1}function LS(i,s,u){s=Ll(u,s),s=YA(i,s,1),i=Ns(i,s,1),s=pn(),i!==null&&(vu(i,1,s),Rn(i,s))}function mt(i,s,u){if(i.tag===3)LS(i,i,u);else for(;s!==null;){if(s.tag===3){LS(s,i,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Os===null||!Os.has(f))){i=Ll(u,i),i=QA(s,i,1),s=Ns(s,i,1),i=pn(),s!==null&&(vu(s,1,i),Rn(s,i));break}}s=s.return}}function uT(i,s,u){var f=i.pingCache;f!==null&&f.delete(s),s=pn(),i.pingedLanes|=i.suspendedLanes&u,Dt===i&&(Wt&u)===u&&(Tt===4||Tt===3&&(Wt&130023424)===Wt&&500>yt()-Ov?Vo(i,0):Dv|=u),Rn(i,s)}function MS(i,s){s===0&&(i.mode&1?(s=yf,yf<<=1,!(yf&130023424)&&(yf=4194304)):s=1);var u=pn();i=Ir(i,s),i!==null&&(vu(i,s,u),Rn(i,u))}function hT(i){var s=i.memoizedState,u=0;s!==null&&(u=s.retryLane),MS(i,u)}function dT(i,s){var u=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),MS(i,u)}var NS;NS=function(i,s,u){if(i!==null)if(i.memoizedProps!==s.pendingProps||xn.current)Tn=!0;else{if(!(i.lanes&u)&&!(s.flags&128))return Tn=!1,Zk(i,s,u);Tn=!!(i.flags&131072)}else Tn=!1,ot&&s.flags&1048576&&fA(s,jf,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;tp(i,s),i=s.pendingProps;var m=El(s,Jt.current);Rl(s,u),m=fv(null,s,f,i,m,u);var w=pv();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,kn(f)?(w=!0,Ff(s)):w=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ov(s),m.updater=Zf,s.stateNode=m,m._reactInternals=s,_v(s,f,i,u),s=Ev(null,s,f,!0,w,u)):(s.tag=0,ot&&w&&Ym(s),fn(null,s,m,u),s=s.child),s;case 16:f=s.elementType;e:{switch(tp(i,s),i=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=pT(f),i=Ci(f,i),m){case 0:s=bv(null,s,f,i,u);break e;case 1:s=oS(null,s,f,i,u);break e;case 11:s=tS(null,s,f,i,u);break e;case 14:s=nS(null,s,f,Ci(f.type,i),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ci(f,m),bv(i,s,f,m,u);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ci(f,m),oS(i,s,f,m,u);case 3:e:{if(aS(s),i===null)throw Error(t(387));f=s.pendingProps,w=s.memoizedState,m=w.element,SA(i,s),Gf(s,f,null,u);var E=s.memoizedState;if(f=E.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){m=Ll(Error(t(423)),s),s=lS(i,s,f,u,m);break e}else if(f!==m){m=Ll(Error(t(424)),s),s=lS(i,s,f,u,m);break e}else for(zn=Is(s.stateNode.containerInfo.firstChild),jn=s,ot=!0,Ei=null,u=_A(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(kl(),f===m){s=Pr(i,s,u);break e}fn(i,s,f,u)}s=s.child}return s;case 5:return CA(s),i===null&&Zm(s),f=s.type,m=s.pendingProps,w=i!==null?i.memoizedProps:null,E=m.children,Vm(f,m)?E=null:w!==null&&Vm(f,w)&&(s.flags|=32),sS(i,s),fn(i,s,E,u),s.child;case 6:return i===null&&Zm(s),null;case 13:return cS(i,s,u);case 4:return av(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=Tl(s,null,f,u):fn(i,s,f,u),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ci(f,m),tS(i,s,f,m,u);case 7:return fn(i,s,s.pendingProps,u),s.child;case 8:return fn(i,s,s.pendingProps.children,u),s.child;case 12:return fn(i,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,w=s.memoizedProps,E=m.value,tt($f,f._currentValue),f._currentValue=E,w!==null)if(bi(w.value,E)){if(w.children===m.children&&!xn.current){s=Pr(i,s,u);break e}}else for(w=s.child,w!==null&&(w.return=s);w!==null;){var R=w.dependencies;if(R!==null){E=w.child;for(var M=R.firstContext;M!==null;){if(M.context===f){if(w.tag===1){M=Rr(-1,u&-u),M.tag=2;var H=w.updateQueue;if(H!==null){H=H.shared;var K=H.pending;K===null?M.next=M:(M.next=K.next,K.next=M),H.pending=M}}w.lanes|=u,M=w.alternate,M!==null&&(M.lanes|=u),rv(w.return,u,s),R.lanes|=u;break}M=M.next}}else if(w.tag===10)E=w.type===s.type?null:w.child;else if(w.tag===18){if(E=w.return,E===null)throw Error(t(341));E.lanes|=u,R=E.alternate,R!==null&&(R.lanes|=u),rv(E,u,s),E=w.sibling}else E=w.child;if(E!==null)E.return=w;else for(E=w;E!==null;){if(E===s){E=null;break}if(w=E.sibling,w!==null){w.return=E.return,E=w;break}E=E.return}w=E}fn(i,s,m.children,u),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,Rl(s,u),m=ai(m),f=f(m),s.flags|=1,fn(i,s,f,u),s.child;case 14:return f=s.type,m=Ci(f,s.pendingProps),m=Ci(f.type,m),nS(i,s,f,m,u);case 15:return iS(i,s,s.type,s.pendingProps,u);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ci(f,m),tp(i,s),s.tag=1,kn(f)?(i=!0,Ff(s)):i=!1,Rl(s,u),XA(s,f,m),_v(s,f,m,u),Ev(null,s,f,!0,i,u);case 19:return hS(i,s,u);case 22:return rS(i,s,u)}throw Error(t(156,s.tag))};function DS(i,s){return p_(i,s)}function fT(i,s,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(i,s,u,f){return new fT(i,s,u,f)}function Vv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function pT(i){if(typeof i=="function")return Vv(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Me)return 11;if(i===ze)return 14}return 2}function js(i,s){var u=i.alternate;return u===null?(u=ui(i.tag,s,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=s,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,s=i.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function dp(i,s,u,f,m,w){var E=2;if(f=i,typeof i=="function")Vv(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case V:return Go(u.children,m,w,s);case Y:E=8,m|=8;break;case J:return i=ui(12,u,s,m|2),i.elementType=J,i.lanes=w,i;case Te:return i=ui(13,u,s,m),i.elementType=Te,i.lanes=w,i;case Ae:return i=ui(19,u,s,m),i.elementType=Ae,i.lanes=w,i;case ie:return fp(u,m,w,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ue:E=10;break e;case ae:E=9;break e;case Me:E=11;break e;case ze:E=14;break e;case te:E=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=ui(E,u,s,m),s.elementType=i,s.type=f,s.lanes=w,s}function Go(i,s,u,f){return i=ui(7,i,f,s),i.lanes=u,i}function fp(i,s,u,f){return i=ui(22,i,f,s),i.elementType=ie,i.lanes=u,i.stateNode={isHidden:!1},i}function Wv(i,s,u){return i=ui(6,i,null,s),i.lanes=u,i}function Gv(i,s,u){return s=ui(4,i.children!==null?i.children:[],i.key,s),s.lanes=u,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function gT(i,s,u,f,m){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wm(0),this.expirationTimes=wm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wm(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function qv(i,s,u,f,m,w,E,R,M){return i=new gT(i,s,u,R,M),s===1?(s=1,w===!0&&(s|=8)):s=0,w=ui(3,null,null,s),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ov(w),i}function mT(i,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:f==null?null:""+f,children:i,containerInfo:s,implementation:u}}function OS(i){if(!i)return Ps;i=i._reactInternals;e:{if(No(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(kn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(kn(u))return uA(i,u,s)}return s}function FS(i,s,u,f,m,w,E,R,M){return i=qv(u,f,!0,i,m,w,E,R,M),i.context=OS(null),u=i.current,f=pn(),m=Us(u),w=Rr(f,m),w.callback=s??null,Ns(u,w,m),i.current.lanes=m,vu(i,m,f),Rn(i,f),i}function pp(i,s,u,f){var m=s.current,w=pn(),E=Us(m);return u=OS(u),s.context===null?s.context=u:s.pendingContext=u,s=Rr(w,E),s.payload={element:i},f=f===void 0?null:f,f!==null&&(s.callback=f),i=Ns(m,s,E),i!==null&&(Ti(i,m,E,w),Wf(i,m,E)),E}function gp(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function US(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<s?u:s}}function Xv(i,s){US(i,s),(i=i.alternate)&&US(i,s)}function vT(){return null}var BS=typeof reportError=="function"?reportError:function(i){console.error(i)};function Kv(i){this._internalRoot=i}mp.prototype.render=Kv.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));pp(i,s,null,null)},mp.prototype.unmount=Kv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;$o(function(){pp(null,i,null,null)}),s[Cr]=null}};function mp(i){this._internalRoot=i}mp.prototype.unstable_scheduleHydration=function(i){if(i){var s=S_();i={blockedOn:null,target:i,priority:s};for(var u=0;u<xs.length&&s!==0&&s<xs[u].priority;u++);xs.splice(u,0,i),u===0&&C_(i)}};function Yv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function vp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function jS(){}function yT(i,s,u,f,m){if(m){if(typeof f=="function"){var w=f;f=function(){var H=gp(E);w.call(H)}}var E=FS(s,f,i,0,null,!1,!1,"",jS);return i._reactRootContainer=E,i[Cr]=E.current,Pu(i.nodeType===8?i.parentNode:i),$o(),E}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var R=f;f=function(){var H=gp(M);R.call(H)}}var M=qv(i,0,!1,null,null,!1,!1,"",jS);return i._reactRootContainer=M,i[Cr]=M.current,Pu(i.nodeType===8?i.parentNode:i),$o(function(){pp(s,M,u,f)}),M}function yp(i,s,u,f,m){var w=u._reactRootContainer;if(w){var E=w;if(typeof m=="function"){var R=m;m=function(){var M=gp(E);R.call(M)}}pp(s,E,i,m)}else E=yT(u,s,i,m,f);return gp(E)}__=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var u=mu(s.pendingLanes);u!==0&&(_m(s,u|1),Rn(s,yt()),!(He&6)&&(Dl=yt()+500,Ls()))}break;case 13:$o(function(){var f=Ir(i,1);if(f!==null){var m=pn();Ti(f,i,1,m)}}),Xv(i,1)}},Am=function(i){if(i.tag===13){var s=Ir(i,134217728);if(s!==null){var u=pn();Ti(s,i,134217728,u)}Xv(i,134217728)}},A_=function(i){if(i.tag===13){var s=Us(i),u=Ir(i,s);if(u!==null){var f=pn();Ti(u,i,s,f)}Xv(i,s)}},S_=function(){return qe},b_=function(i,s){var u=qe;try{return qe=i,s()}finally{qe=u}},fm=function(i,s,u){switch(s){case"input":if(cu(i,u),s=u.name,u.type==="radio"&&s!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==i&&f.form===i.form){var m=Df(f);if(!m)throw Error(t(90));dn(f),cu(f,m)}}}break;case"textarea":Jw(i,u);break;case"select":s=u.value,s!=null&&dl(i,!!u.multiple,s,!1)}},a_=zv,l_=$o;var wT={usingClientEntryPoint:!1,Events:[Nu,Sl,Df,s_,o_,zv]},Xu={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_T={bundleType:Xu.bundleType,version:Xu.version,rendererPackageName:Xu.rendererPackageName,rendererConfig:Xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=d_(i),i===null?null:i.stateNode},findFiberByHostInstance:Xu.findFiberByHostInstance||vT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wp.isDisabled&&wp.supportsFiber)try{mf=wp.inject(_T),Ki=wp}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wT,Pn.createPortal=function(i,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yv(s))throw Error(t(200));return mT(i,s,null,u)},Pn.createRoot=function(i,s){if(!Yv(i))throw Error(t(299));var u=!1,f="",m=BS;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=qv(i,1,!1,null,null,u,!1,f,m),i[Cr]=s.current,Pu(i.nodeType===8?i.parentNode:i),new Kv(s)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=d_(s),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return $o(i)},Pn.hydrate=function(i,s,u){if(!vp(s))throw Error(t(200));return yp(null,i,s,!0,u)},Pn.hydrateRoot=function(i,s,u){if(!Yv(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,w="",E=BS;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),s=FS(s,null,i,1,u??null,m,!1,w,E),i[Cr]=s.current,Pu(i),f)for(i=0;i<f.length;i++)u=f[i],m=u._getVersion,m=m(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,m]:s.mutableSourceEagerHydrationData.push(u,m);return new mp(s)},Pn.render=function(i,s,u){if(!vp(s))throw Error(t(200));return yp(null,i,s,!1,u)},Pn.unmountComponentAtNode=function(i){if(!vp(i))throw Error(t(40));return i._reactRootContainer?($o(function(){yp(null,null,i,!1,function(){i._reactRootContainer=null,i[Cr]=null})}),!0):!1},Pn.unstable_batchedUpdates=zv,Pn.unstable_renderSubtreeIntoContainer=function(i,s,u,f){if(!vp(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return yp(i,s,u,!1,f)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var KS;function PT(){if(KS)return ey.exports;KS=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),ey.exports=RT(),ey.exports}var YS;function LT(){if(YS)return _p;YS=1;var a=PT();return _p.createRoot=a.createRoot,_p.hydrateRoot=a.hydrateRoot,_p}var MT=LT(),Yu={},QS;function NT(){if(QS)return Yu;QS=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.parse=l,Yu.serialize=p;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function l(y,_){const S=new o,b=y.length;if(b<2)return S;const k=(_==null?void 0:_.decode)||g;let T=0;do{const P=y.indexOf("=",T);if(P===-1)break;const L=y.indexOf(";",T),D=L===-1?b:L;if(P>D){T=y.lastIndexOf(";",P-1)+1;continue}const j=h(y,T,P),G=d(y,P,j),V=y.slice(j,G);if(S[V]===void 0){let Y=h(y,P+1,D),J=d(y,D,Y);const ue=k(y.slice(Y,J));S[V]=ue}T=D+1}while(T<b);return S}function h(y,_,S){do{const b=y.charCodeAt(_);if(b!==32&&b!==9)return _}while(++_<S);return S}function d(y,_,S){for(;_>S;){const b=y.charCodeAt(--_);if(b!==32&&b!==9)return _+1}return S}function p(y,_,S){const b=(S==null?void 0:S.encode)||encodeURIComponent;if(!a.test(y))throw new TypeError(`argument name is invalid: ${y}`);const k=b(_);if(!e.test(k))throw new TypeError(`argument val is invalid: ${_}`);let T=y+"="+k;if(!S)return T;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);T+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);T+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);T+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);T+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(T+="; HttpOnly"),S.secure&&(T+="; Secure"),S.partitioned&&(T+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return T}function g(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return r.call(y)==="[object Date]"}return Yu}NT();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JS="popstate";function DT(a={}){function e(n,r){let{pathname:o,search:l,hash:h}=n.location;return By("",{pathname:o,search:l,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Sh(r)}return FT(e,t,null,a)}function ut(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function Wi(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OT(){return Math.random().toString(36).substring(2,10)}function ZS(a,e){return{usr:a.state,key:a.key,idx:e}}function By(a,e,t=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?su(e):e,state:t,key:e&&e.key||n||OT()}}function Sh({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function su(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let n=a.indexOf("?");n>=0&&(e.search=a.substring(n),a=a.substring(0,n)),a&&(e.pathname=a)}return e}function FT(a,e,t,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,h="POP",d=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function v(){h="POP";let k=g(),T=k==null?null:k-p;p=k,d&&d({action:h,location:b.location,delta:T})}function y(k,T){h="PUSH";let P=By(b.location,k,T);p=g()+1;let L=ZS(P,p),D=b.createHref(P);try{l.pushState(L,"",D)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(D)}o&&d&&d({action:h,location:b.location,delta:1})}function _(k,T){h="REPLACE";let P=By(b.location,k,T);p=g();let L=ZS(P,p),D=b.createHref(P);l.replaceState(L,"",D),o&&d&&d({action:h,location:b.location,delta:0})}function S(k){let T=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof k=="string"?k:Sh(k);return P=P.replace(/ $/,"%20"),ut(T,`No window.location.(origin|href) available to create URL for href: ${P}`),new URL(P,T)}let b={get action(){return h},get location(){return a(r,l)},listen(k){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(JS,v),d=k,()=>{r.removeEventListener(JS,v),d=null}},createHref(k){return e(r,k)},createURL:S,encodeLocation(k){let T=S(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:_,go(k){return l.go(k)}};return b}function vE(a,e,t="/"){return UT(a,e,t,!1)}function UT(a,e,t,n){let r=typeof e=="string"?su(e):e,o=To(r.pathname||"/",t);if(o==null)return null;let l=yE(a);BT(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=YT(o);h=XT(l[d],p,n)}return h}function yE(a,e=[],t=[],n=""){let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ut(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let p=ps([n,d.relativePath]),g=t.concat(d);o.children&&o.children.length>0&&(ut(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),yE(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:GT(p,o.index),routesMeta:g})};return a.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of wE(o.path))r(o,l,d)}),e}function wE(a){let e=a.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=wE(n.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>a.startsWith("/")&&d===""?"/":d)}function BT(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:qT(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var jT=/^:[\w-]+$/,zT=3,HT=2,$T=1,VT=10,WT=-2,eb=a=>a==="*";function GT(a,e){let t=a.split("/"),n=t.length;return t.some(eb)&&(n+=WT),e&&(n+=HT),t.filter(r=>!eb(r)).reduce((r,o)=>r+(jT.test(o)?zT:o===""?$T:VT),n)}function qT(a,e){return a.length===e.length&&a.slice(0,-1).every((n,r)=>n===e[r])?a[a.length-1]-e[e.length-1]:0}function XT(a,e,t=!1){let{routesMeta:n}=a,r={},o="/",l=[];for(let h=0;h<n.length;++h){let d=n[h],p=h===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=ug({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),y=d.route;if(!v&&p&&t&&!n[n.length-1].route.index&&(v=ug({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(r,v.params),l.push({params:r,pathname:ps([o,v.pathname]),pathnameBase:eI(ps([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=ps([o,v.pathnameBase]))}return l}function ug(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=KT(a.path,a.caseSensitive,a.end),r=e.match(t);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:n.reduce((p,{paramName:g,isOptional:v},y)=>{if(g==="*"){let S=h[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const _=h[y];return v&&!_?p[g]=void 0:p[g]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:a}}function KT(a,e=!1,t=!0){Wi(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(n.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function YT(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wi(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function To(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}function QT(a,e="/"){let{pathname:t,search:n="",hash:r=""}=typeof a=="string"?su(a):a;return{pathname:t?t.startsWith("/")?t:JT(t,e):e,search:tI(n),hash:nI(r)}}function JT(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function iy(a,e,t,n){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZT(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uw(a){let e=ZT(a);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function hw(a,e,t,n=!1){let r;typeof a=="string"?r=su(a):(r={...a},ut(!r.pathname||!r.pathname.includes("?"),iy("?","pathname","search",r)),ut(!r.pathname||!r.pathname.includes("#"),iy("#","pathname","hash",r)),ut(!r.search||!r.search.includes("#"),iy("#","search","hash",r)));let o=a===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=t;else{let v=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),v-=1;r.pathname=y.join("/")}h=v>=0?e[v]:"/"}let d=QT(r,h),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var ps=a=>a.join("/").replace(/\/\/+/g,"/"),eI=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),tI=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,nI=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function iI(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var _E=["POST","PUT","PATCH","DELETE"];new Set(_E);var rI=["GET",..._E];new Set(rI);var ou=W.createContext(null);ou.displayName="DataRouter";var Wg=W.createContext(null);Wg.displayName="DataRouterState";var AE=W.createContext({isTransitioning:!1});AE.displayName="ViewTransition";var sI=W.createContext(new Map);sI.displayName="Fetchers";var oI=W.createContext(null);oI.displayName="Await";var Xi=W.createContext(null);Xi.displayName="Navigation";var ef=W.createContext(null);ef.displayName="Location";var Er=W.createContext({outlet:null,matches:[],isDataRoute:!1});Er.displayName="Route";var dw=W.createContext(null);dw.displayName="RouteError";function aI(a,{relative:e}={}){ut(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=W.useContext(Xi),{hash:r,pathname:o,search:l}=tf(a,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:ps([t,o])),n.createHref({pathname:h,search:l,hash:r})}function au(){return W.useContext(ef)!=null}function As(){return ut(au(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(ef).location}var SE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bE(a){W.useContext(Xi).static||W.useLayoutEffect(a)}function Gg(){let{isDataRoute:a}=W.useContext(Er);return a?_I():lI()}function lI(){ut(au(),"useNavigate() may be used only in the context of a <Router> component.");let a=W.useContext(ou),{basename:e,navigator:t}=W.useContext(Xi),{matches:n}=W.useContext(Er),{pathname:r}=As(),o=JSON.stringify(uw(n)),l=W.useRef(!1);return bE(()=>{l.current=!0}),W.useCallback((d,p={})=>{if(Wi(l.current,SE),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=hw(d,JSON.parse(o),r,p.relative==="path");a==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ps([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,o,r,a])}W.createContext(null);function tf(a,{relative:e}={}){let{matches:t}=W.useContext(Er),{pathname:n}=As(),r=JSON.stringify(uw(t));return W.useMemo(()=>hw(a,JSON.parse(r),n,e==="path"),[a,r,n,e])}function cI(a,e){return EE(a,e)}function EE(a,e,t,n){var P;ut(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:o}=W.useContext(Xi),{matches:l}=W.useContext(Er),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let L=v&&v.path||"";CE(p,!v||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let y=As(),_;if(e){let L=typeof e=="string"?su(e):e;ut(g==="/"||((P=L.pathname)==null?void 0:P.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),_=L}else _=y;let S=_.pathname||"/",b=S;if(g!=="/"){let L=g.replace(/^\//,"").split("/");b="/"+S.replace(/^\//,"").split("/").slice(L.length).join("/")}let k=!o&&t&&t.matches&&t.matches.length>0?t.matches:vE(a,{pathname:b});Wi(v||k!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Wi(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=pI(k&&k.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:ps([g,r.encodeLocation?r.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:ps([g,r.encodeLocation?r.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,n);return e&&T?W.createElement(ef.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},T):T}function uI(){let a=wI(),e=iI(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",a),l=W.createElement(W.Fragment,null,W.createElement("p",null,"💿 Hey developer 👋"),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:o},"ErrorBoundary")," or"," ",W.createElement("code",{style:o},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:r},t):null,l)}var hI=W.createElement(uI,null),dI=class extends W.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){console.error("React Router caught the following error during render",a,e)}render(){return this.state.error!==void 0?W.createElement(Er.Provider,{value:this.props.routeContext},W.createElement(dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fI({routeContext:a,match:e,children:t}){let n=W.useContext(ou);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Er.Provider,{value:a},t)}function pI(a,e=[],t=null,n=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let r=a,o=t==null?void 0:t.errors;if(o!=null){let d=r.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);ut(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let l=!1,h=-1;if(t)for(let d=0;d<r.length;d++){let p=r[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:g,errors:v}=t,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||y){l=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}return r.reduceRight((d,p,g)=>{let v,y=!1,_=null,S=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,_=p.route.errorElement||hI,l&&(h<0&&g===0?(CE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,S=null):h===g&&(y=!0,S=p.route.hydrateFallbackElement||null)));let b=e.concat(r.slice(0,g+1)),k=()=>{let T;return v?T=_:y?T=S:p.route.Component?T=W.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=d,W.createElement(fI,{match:p,routeContext:{outlet:d,matches:b,isDataRoute:t!=null},children:T})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?W.createElement(dI,{location:t.location,revalidation:t.revalidation,component:_,error:v,children:k(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):k()},null)}function fw(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gI(a){let e=W.useContext(ou);return ut(e,fw(a)),e}function mI(a){let e=W.useContext(Wg);return ut(e,fw(a)),e}function vI(a){let e=W.useContext(Er);return ut(e,fw(a)),e}function pw(a){let e=vI(a),t=e.matches[e.matches.length-1];return ut(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function yI(){return pw("useRouteId")}function wI(){var n;let a=W.useContext(dw),e=mI("useRouteError"),t=pw("useRouteError");return a!==void 0?a:(n=e.errors)==null?void 0:n[t]}function _I(){let{router:a}=gI("useNavigate"),e=pw("useNavigate"),t=W.useRef(!1);return bE(()=>{t.current=!0}),W.useCallback(async(r,o={})=>{Wi(t.current,SE),t.current&&(typeof r=="number"?a.navigate(r):await a.navigate(r,{fromRouteId:e,...o}))},[a,e])}var tb={};function CE(a,e,t){!e&&!tb[a]&&(tb[a]=!0,Wi(!1,t))}W.memo(AI);function AI({routes:a,future:e,state:t}){return EE(a,void 0,t,e)}function SI({to:a,replace:e,state:t,relative:n}){ut(au(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=W.useContext(Xi);Wi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=W.useContext(Er),{pathname:l}=As(),h=Gg(),d=hw(a,uw(o),l,n==="path"),p=JSON.stringify(d);return W.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:n})},[h,p,n,e,t]),null}function kp(a){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bI({basename:a="/",children:e=null,location:t,navigationType:n="POP",navigator:r,static:o=!1}){ut(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=a.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof t=="string"&&(t=su(t));let{pathname:d="/",search:p="",hash:g="",state:v=null,key:y="default"}=t,_=W.useMemo(()=>{let S=To(d,l);return S==null?null:{location:{pathname:S,search:p,hash:g,state:v,key:y},navigationType:n}},[l,d,p,g,v,y,n]);return Wi(_!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:W.createElement(Xi.Provider,{value:h},W.createElement(ef.Provider,{children:e,value:_}))}function EI({children:a,location:e}){return cI(jy(a),e)}function jy(a,e=[]){let t=[];return W.Children.forEach(a,(n,r)=>{if(!W.isValidElement(n))return;let o=[...e,r];if(n.type===W.Fragment){t.push.apply(t,jy(n.props.children,o));return}ut(n.type===kp,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=jy(n.props.children,o)),t.push(l)}),t}var Tp="get",Ip="application/x-www-form-urlencoded";function qg(a){return a!=null&&typeof a.tagName=="string"}function CI(a){return qg(a)&&a.tagName.toLowerCase()==="button"}function xI(a){return qg(a)&&a.tagName.toLowerCase()==="form"}function kI(a){return qg(a)&&a.tagName.toLowerCase()==="input"}function TI(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function II(a,e){return a.button===0&&(!e||e==="_self")&&!TI(a)}var Ap=null;function RI(){if(Ap===null)try{new FormData(document.createElement("form"),0),Ap=!1}catch{Ap=!0}return Ap}var PI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ry(a){return a!=null&&!PI.has(a)?(Wi(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ip}"`),null):a}function LI(a,e){let t,n,r,o,l;if(xI(a)){let h=a.getAttribute("action");n=h?To(h,e):null,t=a.getAttribute("method")||Tp,r=ry(a.getAttribute("enctype"))||Ip,o=new FormData(a)}else if(CI(a)||kI(a)&&(a.type==="submit"||a.type==="image")){let h=a.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=a.getAttribute("formaction")||h.getAttribute("action");if(n=d?To(d,e):null,t=a.getAttribute("formmethod")||h.getAttribute("method")||Tp,r=ry(a.getAttribute("formenctype"))||ry(h.getAttribute("enctype"))||Ip,o=new FormData(h,a),!RI()){let{name:p,type:g,value:v}=a;if(g==="image"){let y=p?`${p}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else p&&o.append(p,v)}}else{if(qg(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tp,n=null,r=Ip,l=a}return o&&r==="text/plain"&&(l=o,o=void 0),{action:n,method:t.toLowerCase(),encType:r,formData:o,body:l}}function gw(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}async function MI(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NI(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function DI(a,e,t){let n=await Promise.all(a.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await MI(o,t);return l.links?l.links():[]}return[]}));return BI(n.flat(1).filter(NI).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function nb(a,e,t,n,r,o){let l=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>{var g;return t[p].pathname!==d.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>l(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{var v;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(a,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function OI(a,e,{includeHydrateFallback:t}={}){return FI(a.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function FI(a){return[...new Set(a)]}function UI(a){let e={},t=Object.keys(a).sort();for(let n of t)e[n]=a[n];return e}function BI(a,e){let t=new Set;return new Set(e),a.reduce((n,r)=>{let o=JSON.stringify(UI(r));return t.has(o)||(t.add(o),n.push({key:o,link:r})),n},[])}function jI(a){let e=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function zI(){let a=W.useContext(ou);return gw(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function HI(){let a=W.useContext(Wg);return gw(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var mw=W.createContext(void 0);mw.displayName="FrameworkContext";function xE(){let a=W.useContext(mw);return gw(a,"You must render this element inside a <HydratedRouter> element"),a}function $I(a,e){let t=W.useContext(mw),[n,r]=W.useState(!1),[o,l]=W.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:v}=e,y=W.useRef(null);W.useEffect(()=>{if(a==="render"&&l(!0),a==="viewport"){let b=T=>{T.forEach(P=>{l(P.isIntersecting)})},k=new IntersectionObserver(b,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[a]),W.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let _=()=>{r(!0)},S=()=>{r(!1),l(!1)};return t?a!=="intent"?[o,y,{}]:[o,y,{onFocus:Qu(h,_),onBlur:Qu(d,S),onMouseEnter:Qu(p,_),onMouseLeave:Qu(g,S),onTouchStart:Qu(v,_)}]:[!1,y,{}]}function Qu(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function VI({page:a,...e}){let{router:t}=zI(),n=W.useMemo(()=>vE(t.routes,a,t.basename),[t.routes,a,t.basename]);return n?W.createElement(GI,{page:a,matches:n,...e}):null}function WI(a){let{manifest:e,routeModules:t}=xE(),[n,r]=W.useState([]);return W.useEffect(()=>{let o=!1;return DI(a,e,t).then(l=>{o||r(l)}),()=>{o=!0}},[a,e,t]),n}function GI({page:a,matches:e,...t}){let n=As(),{manifest:r,routeModules:o}=xE(),{loaderData:l,matches:h}=HI(),d=W.useMemo(()=>nb(a,e,h,r,n,"data"),[a,e,h,r,n]),p=W.useMemo(()=>nb(a,e,h,r,n,"assets"),[a,e,h,r,n]),g=W.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let _=new Set,S=!1;if(e.forEach(k=>{var P;let T=r.routes[k.route.id];!T||!T.hasLoader||(!d.some(L=>L.route.id===k.route.id)&&k.route.id in l&&((P=o[k.route.id])!=null&&P.shouldRevalidate)||T.hasClientLoader?S=!0:_.add(k.route.id))}),_.size===0)return[];let b=jI(a);return S&&_.size>0&&b.searchParams.set("_routes",e.filter(k=>_.has(k.route.id)).map(k=>k.route.id).join(",")),[b.pathname+b.search]},[l,n,r,d,e,a,o]),v=W.useMemo(()=>OI(p,r),[p,r]),y=WI(p);return W.createElement(W.Fragment,null,g.map(_=>W.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),v.map(_=>W.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),y.map(({key:_,link:S})=>W.createElement("link",{key:_,...S})))}function qI(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kE&&(window.__reactRouterVersion="7.2.0")}catch{}function XI({basename:a,children:e,window:t}){let n=W.useRef();n.current==null&&(n.current=DT({window:t,v5Compat:!0}));let r=n.current,[o,l]=W.useState({action:r.action,location:r.location}),h=W.useCallback(d=>{W.startTransition(()=>l(d))},[l]);return W.useLayoutEffect(()=>r.listen(h),[r,h]),W.createElement(bI,{basename:a,children:e,location:o.location,navigationType:o.action,navigator:r})}var TE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IE=W.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:g,viewTransition:v,...y},_){let{basename:S}=W.useContext(Xi),b=typeof p=="string"&&TE.test(p),k,T=!1;if(typeof p=="string"&&b&&(k=p,kE))try{let J=new URL(window.location.href),ue=p.startsWith("//")?new URL(J.protocol+p):new URL(p),ae=To(ue.pathname,S);ue.origin===J.origin&&ae!=null?p=ae+ue.search+ue.hash:T=!0}catch{Wi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=aI(p,{relative:r}),[L,D,j]=$I(n,y),G=JI(p,{replace:l,state:h,target:d,preventScrollReset:g,relative:r,viewTransition:v});function V(J){e&&e(J),J.defaultPrevented||G(J)}let Y=W.createElement("a",{...y,...j,href:k||P,onClick:T||o?e:V,ref:qI(_,D),target:d,"data-discover":!b&&t==="render"?"true":void 0});return L&&!b?W.createElement(W.Fragment,null,Y,W.createElement(VI,{page:P})):Y});IE.displayName="Link";var KI=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:l,viewTransition:h,children:d,...p},g){let v=tf(l,{relative:p.relative}),y=As(),_=W.useContext(Wg),{navigator:S,basename:b}=W.useContext(Xi),k=_!=null&&iR(v)&&h===!0,T=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,P=y.pathname,L=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(P=P.toLowerCase(),L=L?L.toLowerCase():null,T=T.toLowerCase()),L&&b&&(L=To(L,b)||L);const D=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let j=P===T||!r&&P.startsWith(T)&&P.charAt(D)==="/",G=L!=null&&(L===T||!r&&L.startsWith(T)&&L.charAt(T.length)==="/"),V={isActive:j,isPending:G,isTransitioning:k},Y=j?e:void 0,J;typeof n=="function"?J=n(V):J=[n,j?"active":null,G?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ue=typeof o=="function"?o(V):o;return W.createElement(IE,{...p,"aria-current":Y,className:J,ref:g,style:ue,to:l,viewTransition:h},typeof d=="function"?d(V):d)});KI.displayName="NavLink";var YI=W.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:r,state:o,method:l=Tp,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:v,...y},_)=>{let S=tR(),b=nR(h,{relative:p}),k=l.toLowerCase()==="get"?"get":"post",T=typeof h=="string"&&TE.test(h),P=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let D=L.nativeEvent.submitter,j=(D==null?void 0:D.getAttribute("formmethod"))||l;S(D||L.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:r,state:o,relative:p,preventScrollReset:g,viewTransition:v})};return W.createElement("form",{ref:_,method:k,action:b,onSubmit:n?d:P,...y,"data-discover":!T&&a==="render"?"true":void 0})});YI.displayName="Form";function QI(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RE(a){let e=W.useContext(ou);return ut(e,QI(a)),e}function JI(a,{target:e,replace:t,state:n,preventScrollReset:r,relative:o,viewTransition:l}={}){let h=Gg(),d=As(),p=tf(a,{relative:o});return W.useCallback(g=>{if(II(g,e)){g.preventDefault();let v=t!==void 0?t:Sh(d)===Sh(p);h(a,{replace:v,state:n,preventScrollReset:r,relative:o,viewTransition:l})}},[d,h,p,t,n,e,a,r,o,l])}var ZI=0,eR=()=>`__${String(++ZI)}__`;function tR(){let{router:a}=RE("useSubmit"),{basename:e}=W.useContext(Xi),t=yI();return W.useCallback(async(n,r={})=>{let{action:o,method:l,encType:h,formData:d,body:p}=LI(n,e);if(r.navigate===!1){let g=r.fetcherKey||eR();await a.fetch(g,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||l,formEncType:r.encType||h,flushSync:r.flushSync})}else await a.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||l,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[a,e,t])}function nR(a,{relative:e}={}){let{basename:t}=W.useContext(Xi),n=W.useContext(Er);ut(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...tf(a||".",{relative:e})},l=As();if(a==null){o.search=l.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let g=h.toString();o.search=g?`?${g}`:""}}return(!a||a===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ps([t,o.pathname])),Sh(o)}function iR(a,e={}){let t=W.useContext(AE);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=RE("useViewTransitionState"),r=tf(a,{relative:e.relative});if(!t.isTransitioning)return!1;let o=To(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=To(t.nextLocation.pathname,n)||t.nextLocation.pathname;return ug(r.pathname,l)!=null||ug(r.pathname,o)!=null}new TextEncoder;var sy={exports:{}},ib;function rR(){return ib||(ib=1,function(a){var e=function(t){var n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(U,N,I){U[N]=I.value},l,h=typeof Symbol=="function"?Symbol:{},d=h.iterator||"@@iterator",p=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function v(U,N,I){return Object.defineProperty(U,N,{value:I,enumerable:!0,configurable:!0,writable:!0}),U[N]}try{v({},"")}catch{v=function(N,I,F){return N[I]=F}}function y(U,N,I,F){var q=N&&N.prototype instanceof L?N:L,ne=Object.create(q.prototype),ge=new te(F||[]);return o(ne,"_invoke",{value:Me(U,I,ge)}),ne}t.wrap=y;function _(U,N,I){try{return{type:"normal",arg:U.call(N,I)}}catch(F){return{type:"throw",arg:F}}}var S="suspendedStart",b="suspendedYield",k="executing",T="completed",P={};function L(){}function D(){}function j(){}var G={};v(G,d,function(){return this});var V=Object.getPrototypeOf,Y=V&&V(V(ie([])));Y&&Y!==n&&r.call(Y,d)&&(G=Y);var J=j.prototype=L.prototype=Object.create(G);D.prototype=j,o(J,"constructor",{value:j,configurable:!0}),o(j,"constructor",{value:D,configurable:!0}),D.displayName=v(j,g,"GeneratorFunction");function ue(U){["next","throw","return"].forEach(function(N){v(U,N,function(I){return this._invoke(N,I)})})}t.isGeneratorFunction=function(U){var N=typeof U=="function"&&U.constructor;return N?N===D||(N.displayName||N.name)==="GeneratorFunction":!1},t.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,j):(U.__proto__=j,v(U,g,"GeneratorFunction")),U.prototype=Object.create(J),U},t.awrap=function(U){return{__await:U}};function ae(U,N){function I(ne,ge,fe,le){var Se=_(U[ne],U,ge);if(Se.type==="throw")le(Se.arg);else{var ce=Se.arg,be=ce.value;return be&&typeof be=="object"&&r.call(be,"__await")?N.resolve(be.__await).then(function(Ye){I("next",Ye,fe,le)},function(Ye){I("throw",Ye,fe,le)}):N.resolve(be).then(function(Ye){ce.value=Ye,fe(ce)},function(Ye){return I("throw",Ye,fe,le)})}}var F;function q(ne,ge){function fe(){return new N(function(le,Se){I(ne,ge,le,Se)})}return F=F?F.then(fe,fe):fe()}o(this,"_invoke",{value:q})}ue(ae.prototype),v(ae.prototype,p,function(){return this}),t.AsyncIterator=ae,t.async=function(U,N,I,F,q){q===void 0&&(q=Promise);var ne=new ae(y(U,N,I,F),q);return t.isGeneratorFunction(N)?ne:ne.next().then(function(ge){return ge.done?ge.value:ne.next()})};function Me(U,N,I){var F=S;return function(ne,ge){if(F===k)throw new Error("Generator is already running");if(F===T){if(ne==="throw")throw ge;return Z()}for(I.method=ne,I.arg=ge;;){var fe=I.delegate;if(fe){var le=Te(fe,I);if(le){if(le===P)continue;return le}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(F===S)throw F=T,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);F=k;var Se=_(U,N,I);if(Se.type==="normal"){if(F=I.done?T:b,Se.arg===P)continue;return{value:Se.arg,done:I.done}}else Se.type==="throw"&&(F=T,I.method="throw",I.arg=Se.arg)}}}function Te(U,N){var I=N.method,F=U.iterator[I];if(F===l)return N.delegate=null,I==="throw"&&U.iterator.return&&(N.method="return",N.arg=l,Te(U,N),N.method==="throw")||I!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+I+"' method")),P;var q=_(F,U.iterator,N.arg);if(q.type==="throw")return N.method="throw",N.arg=q.arg,N.delegate=null,P;var ne=q.arg;if(!ne)return N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,P;if(ne.done)N[U.resultName]=ne.value,N.next=U.nextLoc,N.method!=="return"&&(N.method="next",N.arg=l);else return ne;return N.delegate=null,P}ue(J),v(J,g,"Generator"),v(J,d,function(){return this}),v(J,"toString",function(){return"[object Generator]"});function Ae(U){var N={tryLoc:U[0]};1 in U&&(N.catchLoc=U[1]),2 in U&&(N.finallyLoc=U[2],N.afterLoc=U[3]),this.tryEntries.push(N)}function ze(U){var N=U.completion||{};N.type="normal",delete N.arg,U.completion=N}function te(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(Ae,this),this.reset(!0)}t.keys=function(U){var N=Object(U),I=[];for(var F in N)I.push(F);return I.reverse(),function q(){for(;I.length;){var ne=I.pop();if(ne in N)return q.value=ne,q.done=!1,q}return q.done=!0,q}};function ie(U){if(U){var N=U[d];if(N)return N.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var I=-1,F=function q(){for(;++I<U.length;)if(r.call(U,I))return q.value=U[I],q.done=!1,q;return q.value=l,q.done=!0,q};return F.next=F}}return{next:Z}}t.values=ie;function Z(){return{value:l,done:!0}}return te.prototype={constructor:te,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(ze),!U)for(var N in this)N.charAt(0)==="t"&&r.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=l)},stop:function(){this.done=!0;var U=this.tryEntries[0],N=U.completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var N=this;function I(le,Se){return ne.type="throw",ne.arg=U,N.next=le,Se&&(N.method="next",N.arg=l),!!Se}for(var F=this.tryEntries.length-1;F>=0;--F){var q=this.tryEntries[F],ne=q.completion;if(q.tryLoc==="root")return I("end");if(q.tryLoc<=this.prev){var ge=r.call(q,"catchLoc"),fe=r.call(q,"finallyLoc");if(ge&&fe){if(this.prev<q.catchLoc)return I(q.catchLoc,!0);if(this.prev<q.finallyLoc)return I(q.finallyLoc)}else if(ge){if(this.prev<q.catchLoc)return I(q.catchLoc,!0)}else if(fe){if(this.prev<q.finallyLoc)return I(q.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,N){for(var I=this.tryEntries.length-1;I>=0;--I){var F=this.tryEntries[I];if(F.tryLoc<=this.prev&&r.call(F,"finallyLoc")&&this.prev<F.finallyLoc){var q=F;break}}q&&(U==="break"||U==="continue")&&q.tryLoc<=N&&N<=q.finallyLoc&&(q=null);var ne=q?q.completion:{};return ne.type=U,ne.arg=N,q?(this.method="next",this.next=q.finallyLoc,P):this.complete(ne)},complete:function(U,N){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&N&&(this.next=N),P},finish:function(U){for(var N=this.tryEntries.length-1;N>=0;--N){var I=this.tryEntries[N];if(I.finallyLoc===U)return this.complete(I.completion,I.afterLoc),ze(I),P}},catch:function(U){for(var N=this.tryEntries.length-1;N>=0;--N){var I=this.tryEntries[N];if(I.tryLoc===U){var F=I.completion;if(F.type==="throw"){var q=F.arg;ze(I)}return q}}throw new Error("illegal catch attempt")},delegateYield:function(U,N,I){return this.delegate={iterator:ie(U),resultName:N,nextLoc:I},this.method==="next"&&(this.arg=l),P}},t}(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(sy)),sy.exports}var oy,rb;function vw(){return rb||(rb=1,oy=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`),oy}var ay,sb;function PE(){if(sb)return ay;sb=1;const a=vw();let e=0;return ay=({id:t,action:n,payload:r={}})=>{let o=t;return typeof o>"u"&&(o=a("Job",e),e+=1),{id:o,action:n,payload:r}},ay}var Ju={},ob;function yw(){if(ob)return Ju;ob=1;let a=!1;return Ju.logging=a,Ju.setLogging=e=>{a=e},Ju.log=(...e)=>a?console.log.apply(this,e):null,Ju}var ly,ab;function sR(){if(ab)return ly;ab=1;const a=PE(),{log:e}=yw(),t=vw();let n=0;return ly=()=>{const r=t("Scheduler",n),o={},l={};let h=[];n+=1;const d=()=>h.length,p=()=>Object.keys(o).length,g=()=>{if(h.length!==0){const b=Object.keys(o);for(let k=0;k<b.length;k+=1)if(typeof l[b[k]]>"u"){h[0](o[b[k]]);break}}},v=(b,k)=>new Promise((T,P)=>{const L=a({action:b,payload:k});h.push(async D=>{h.shift(),l[D.id]=L;try{T(await D[b].apply(this,[...k,L.id]))}catch(j){P(j)}finally{delete l[D.id],g()}}),e(`[${r}]: Add ${L.id} to JobQueue`),e(`[${r}]: JobQueue length=${h.length}`),g()});return{addWorker:b=>(o[b.id]=b,e(`[${r}]: Add ${b.id}`),e(`[${r}]: Number of workers=${p()}`),g(),b.id),addJob:async(b,...k)=>{if(p()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return v(b,k)},terminate:async()=>{Object.keys(o).forEach(async b=>{await o[b].terminate()}),h=[]},getQueueLen:d,getNumWorkers:p}},ly}function oR(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cy,lb;function aR(){return lb||(lb=1,cy=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof oR=="function"&&(e.type="node"),typeof a>"u"?e:e[a]}),cy}var uy,cb;function lR(){if(cb)return uy;cb=1;const e=aR()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return uy=t=>{const n={...t};return["corePath","workerPath","langPath"].forEach(r=>{t[r]&&(n[r]=e(n[r]))}),n},uy}var hy,ub;function LE(){return ub||(ub=1,hy={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),hy}const cR="6.0.0",uR={version:cR};var dy,hb;function hR(){return hb||(hb=1,dy={workerBlobURL:!0,logger:()=>{}}),dy}var fy,db;function dR(){if(db)return fy;db=1;const a=uR.version;return fy={...hR(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},fy}var py,fb;function fR(){return fb||(fb=1,py=({workerPath:a,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const n=new Blob([`importScripts("${a}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(a);return t}),py}var gy,pb;function pR(){return pb||(pb=1,gy=a=>{a.terminate()}),gy}var my,gb;function gR(){return gb||(gb=1,my=(a,e)=>{a.onmessage=({data:t})=>{e(t)}}),my}var vy,mb;function mR(){return mb||(mb=1,vy=async(a,e)=>{a.postMessage(e)}),vy}var yy,vb;function vR(){if(vb)return yy;vb=1;const a=t=>new Promise((n,r)=>{const o=new FileReader;o.onload=()=>{n(o.result)},o.onerror=({target:{error:{code:l}}})=>{r(Error(`File could not be read! Code=${l}`))},o.readAsArrayBuffer(t)}),e=async t=>{let n=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?n=atob(t.split(",")[1]).split("").map(r=>r.charCodeAt(0)):n=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(n=await e(t.src)),t.tagName==="VIDEO"&&(n=await e(t.poster)),t.tagName==="CANVAS"&&await new Promise(r=>{t.toBlob(async o=>{n=await a(o),r()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const r=await t.convertToBlob();n=await a(r)}else(t instanceof File||t instanceof Blob)&&(n=await a(t));return new Uint8Array(n)};return yy=e,yy}var wy,yb;function yR(){if(yb)return wy;yb=1;const a=dR(),e=fR(),t=pR(),n=gR(),r=mR(),o=vR();return wy={defaultOptions:a,spawnWorker:e,terminateWorker:t,onMessage:n,send:r,loadImage:o},wy}var _y,wb;function ME(){if(wb)return _y;wb=1;const a=lR(),e=PE(),{log:t}=yw(),n=vw(),r=LE(),{defaultOptions:o,spawnWorker:l,terminateWorker:h,onMessage:d,loadImage:p,send:g}=yR();let v=0;return _y=async(y="eng",_=r.LSTM_ONLY,S={},b={})=>{const k=n("Worker",v),{logger:T,errorHandler:P,...L}=a({...o,...S}),D={},j=typeof y=="string"?y.split("+"):y;let G=_,V=b;const Y=[r.DEFAULT,r.LSTM_ONLY].includes(_)&&!L.legacyCore;let J,ue;const ae=new Promise((ce,be)=>{ue=ce,J=be}),Me=ce=>{J(ce.message)};let Te=l(L);Te.onerror=Me,v+=1;const Ae=({id:ce,action:be,payload:Ye})=>new Promise((dn,$t)=>{t(`[${k}]: Start ${ce}, action=${be}`);const Cn=`${be}-${ce}`;D[Cn]={resolve:dn,reject:$t},g(Te,{workerId:k,jobId:ce,action:be,payload:Ye})}),ze=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),te=ce=>Ae(e({id:ce,action:"load",payload:{options:{lstmOnly:Y,corePath:L.corePath,logging:L.logging}}})),ie=(ce,be,Ye)=>Ae(e({id:Ye,action:"FS",payload:{method:"writeFile",args:[ce,be]}})),Z=(ce,be)=>Ae(e({id:be,action:"FS",payload:{method:"readFile",args:[ce,{encoding:"utf8"}]}})),U=(ce,be)=>Ae(e({id:be,action:"FS",payload:{method:"unlink",args:[ce]}})),N=(ce,be,Ye)=>Ae(e({id:Ye,action:"FS",payload:{method:ce,args:be}})),I=(ce,be)=>Ae(e({id:be,action:"loadLanguage",payload:{langs:ce,options:{langPath:L.langPath,dataPath:L.dataPath,cachePath:L.cachePath,cacheMethod:L.cacheMethod,gzip:L.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(G)&&!L.legacyLang}}})),F=(ce,be,Ye,dn)=>Ae(e({id:dn,action:"initialize",payload:{langs:ce,oem:be,config:Ye}})),q=(ce="eng",be,Ye,dn)=>{if(Y&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(be))throw Error("Legacy model requested but code missing.");const $t=be||G;G=$t;const Cn=Ye||V;V=Cn;const hl=(typeof ce=="string"?ce.split("+"):ce).filter(cu=>!j.includes(cu));return j.push(...hl),hl.length>0?I(hl,dn).then(()=>F(ce,$t,Cn,dn)):F(ce,$t,Cn,dn)},ne=(ce={},be)=>Ae(e({id:be,action:"setParameters",payload:{params:ce}})),ge=async(ce,be={},Ye={text:!0},dn)=>Ae(e({id:dn,action:"recognize",payload:{image:await p(ce),options:be,output:Ye}})),fe=async(ce,be)=>{if(Y)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return Ae(e({id:be,action:"detect",payload:{image:await p(ce)}}))},le=async()=>(Te!==null&&(h(Te),Te=null),Promise.resolve());d(Te,({workerId:ce,jobId:be,status:Ye,action:dn,data:$t})=>{const Cn=`${dn}-${be}`;if(Ye==="resolve")t(`[${ce}]: Complete ${be}`),D[Cn].resolve({jobId:be,data:$t}),delete D[Cn];else if(Ye==="reject")if(D[Cn].reject($t),delete D[Cn],dn==="load"&&J($t),P)P($t);else throw Error($t);else Ye==="progress"&&T({...$t,userJobId:be})});const Se={id:k,worker:Te,load:ze,writeText:ie,readText:Z,removeFile:U,FS:N,reinitialize:q,setParameters:ne,recognize:ge,detect:fe,terminate:le};return te().then(()=>I(y)).then(()=>F(y,_,b)).then(()=>ue(Se)).catch(()=>{}),ae},_y}var Ay,_b;function wR(){if(_b)return Ay;_b=1;const a=ME();return Ay={recognize:async(n,r,o)=>{const l=await a(r,1,o);return l.recognize(n).finally(async()=>{await l.terminate()})},detect:async(n,r)=>{const o=await a("osd",0,r);return o.detect(n).finally(async()=>{await o.terminate()})}},Ay}var Sy,Ab;function _R(){return Ab||(Ab=1,Sy={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Sy}var by,Sb;function AR(){return Sb||(Sb=1,by={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),by}var Ey,bb;function SR(){if(bb)return Ey;bb=1,rR();const a=sR(),e=ME(),t=wR(),n=_R(),r=LE(),o=AR(),{setLogging:l}=yw();return Ey={languages:n,OEM:r,PSM:o,createScheduler:a,createWorker:e,setLogging:l,...t},Ey}var bR=SR();const ER=ET(bR),CR=({handleImageUpload:a,handlePDFUpload:e})=>$.jsx("div",{className:"sidenavbar h-auto w-48 bg-white rounded-xl border-4 border-gray-400 p-4 mx-2",children:$.jsxs("div",{className:"flex flex-col",children:[$.jsxs("label",{className:"py-2 px-4 text-lg hover:bg-gray-200 cursor-pointer",children:[$.jsx("input",{type:"file",accept:"image/*",onChange:a,className:"hidden"}),"Upload Image"]}),$.jsxs("label",{className:"py-2 px-4 text-lg hover:bg-gray-200 rounded cursor-pointer",children:[$.jsx("input",{type:"file",accept:"application/pdf",onChange:e,className:"hidden"}),"Upload PDF"]})]})}),xR=a=>{const{history:e,showHistory:t,setShowHistory:n,removeHistoryItem:r,setHistory:o}=a,[l,h]=W.useState(!1);return W.useEffect(()=>{const d=()=>{window.innerHeight<500?h(!0):h(!1)};return window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]),l?null:$.jsxs("div",{className:"navbar fixed bottom-8 left-0 right-0 just-center justify-around items-center border-4 border-gray-400 bg-white shadow-xl max-w-md mx-auto rounded-xl max-sm:max-w-80",children:[$.jsxs("button",{className:"flex flex-col items-center space-y-1 transition transform active:translate-y-1",children:[$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),$.jsx("span",{className:"btm-nav-label text-xs",children:"Home"})]}),$.jsxs("button",{className:"flex flex-col items-center space-y-1 transition transform active:translate-y-1",children:[$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"black",viewBox:"0 0 489.347 489.347",stroke:"currentColor",children:$.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:`M412.642,345.939l-59.523-14.229l-66.352-66.352l51.12-51.055c11.874,4.167,24.216,6.203,36.499,6.202
    c28.736-0.002,57.122-11.149,78.233-32.221c32.686-32.626,41.544-82.646,22.043-124.466l-9.042-19.391l-53.807,53.682
    l-24.986-24.941l53.822-53.696L421.17,10.42C379.3-9.036,329.218-0.195,296.546,32.417
    c-30.131,30.078-40.012,74.943-26.092,114.534l-20.111,20.086L102.13,18.837C91.061,7.731,76.32,1.605,60.621,1.587
    c-0.023,0-0.044,0-0.067,0c-15.696,0-30.45,6.104-41.553,17.195C7.886,29.897,1.77,44.669,1.778,60.378
    c0.008,15.697,6.129,30.456,17.233,41.553L167.18,250.094l-20.155,20.129c-39.652-13.917-84.597-4.061-114.733,26.02
    C-0.393,328.869-9.252,378.888,10.25,420.708l9.042,19.391l53.806-53.681l24.986,24.94l-53.822,53.697l19.48,9.051
    c14.814,6.883,30.652,10.224,46.388,10.224c28.738-0.001,57.124-11.148,78.235-32.221c30.132-30.078,40.013-74.943,26.093-114.534
    l51.082-51.018l66.366,66.366l14.229,59.523l76.705,76.706l66.507-66.507L412.642,345.939z M301.691,144.194
    c-14.181-30.419-7.73-66.807,16.05-90.545c18.28-18.246,44.036-26.278,68.827-22.6l-42.211,42.113l67.451,67.328l42.24-42.142
    c3.697,24.738-4.343,50.456-22.622,68.702c-23.802,23.759-60.288,30.197-90.793,16.02l-9.505-4.417l-34.603,34.559l-24.968-24.965
    l34.573-34.529L301.691,144.194z M31.778,60.362c-0.004-7.69,2.992-14.923,8.43-20.362c5.433-5.426,12.657-8.414,20.347-8.414
    c7.711,0.009,14.918,3.002,20.345,8.446l194.398,194.38l-40.711,40.659L40.221,80.714C34.781,75.277,31.782,68.049,31.778,60.362z
     M167.171,430.877c-18.28,18.246-44.038,26.278-68.827,22.6l42.211-42.112l-67.451-67.329l-42.24,42.142
    c-3.698-24.737,4.343-50.455,22.623-68.702c23.801-23.758,60.288-30.197,90.792-16.021l9.505,4.417l34.609-34.565l24.967,24.966
    l-34.578,34.534l4.44,9.525C197.403,370.751,190.952,407.138,167.171,430.877z M373.342,397.227l-7.564-31.645l31.646,7.564
    l49.498,49.499l-24.081,24.081L373.342,397.227z`})}),$.jsx("span",{className:"btm-nav-label text-xs",children:"Tools"})]}),$.jsxs("button",{className:"flex flex-col items-center space-y-1 transition transform active:translate-y-1",onClick:()=>n(!t),children:[$.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[$.jsx("path",{d:"M12 8V12L14.5 14.5",stroke:"#1C274C","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),$.jsx("path",{d:"M5.60423 5.60423L5.0739 5.0739V5.0739L5.60423 5.60423ZM4.33785 6.87061L3.58786 6.87438C3.58992 7.28564 3.92281 7.61853 4.33408 7.6206L4.33785 6.87061ZM6.87963 7.63339C7.29384 7.63547 7.63131 7.30138 7.63339 6.88717C7.63547 6.47296 7.30138 6.13549 6.88717 6.13341L6.87963 7.63339ZM5.07505 4.32129C5.07296 3.90708 4.7355 3.57298 4.32129 3.57506C3.90708 3.57715 3.57298 3.91462 3.57507 4.32882L5.07505 4.32129ZM3.75 12C3.75 11.5858 3.41421 11.25 3 11.25C2.58579 11.25 2.25 11.5858 2.25 12H3.75ZM16.8755 20.4452C17.2341 20.2378 17.3566 19.779 17.1492 19.4204C16.9418 19.0619 16.483 18.9393 16.1245 19.1468L16.8755 20.4452ZM19.1468 16.1245C18.9393 16.483 19.0619 16.9418 19.4204 17.1492C19.779 17.3566 20.2378 17.2341 20.4452 16.8755L19.1468 16.1245ZM5.14033 5.07126C4.84598 5.36269 4.84361 5.83756 5.13505 6.13191C5.42648 6.42626 5.90134 6.42862 6.19569 6.13719L5.14033 5.07126ZM18.8623 5.13786C15.0421 1.31766 8.86882 1.27898 5.0739 5.0739L6.13456 6.13456C9.33366 2.93545 14.5572 2.95404 17.8017 6.19852L18.8623 5.13786ZM5.0739 5.0739L3.80752 6.34028L4.86818 7.40094L6.13456 6.13456L5.0739 5.0739ZM4.33408 7.6206L6.87963 7.63339L6.88717 6.13341L4.34162 6.12062L4.33408 7.6206ZM5.08784 6.86684L5.07505 4.32129L3.57507 4.32882L3.58786 6.87438L5.08784 6.86684ZM12 3.75C16.5563 3.75 20.25 7.44365 20.25 12H21.75C21.75 6.61522 17.3848 2.25 12 2.25V3.75ZM12 20.25C7.44365 20.25 3.75 16.5563 3.75 12H2.25C2.25 17.3848 6.61522 21.75 12 21.75V20.25ZM16.1245 19.1468C14.9118 19.8483 13.5039 20.25 12 20.25V21.75C13.7747 21.75 15.4407 21.2752 16.8755 20.4452L16.1245 19.1468ZM20.25 12C20.25 13.5039 19.8483 14.9118 19.1468 16.1245L20.4452 16.8755C21.2752 15.4407 21.75 13.7747 21.75 12H20.25ZM6.19569 6.13719C7.68707 4.66059 9.73646 3.75 12 3.75V2.25C9.32542 2.25 6.90113 3.32791 5.14033 5.07126L6.19569 6.13719Z",fill:"#1C274C"})]}),$.jsx("span",{className:"btm-nav-label text-xs",children:"History"})]}),t&&$.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:$.jsxs("div",{className:"bg-white p-4 shadow-lg rounded-lg max-h-64 overflow-y-auto w-11/12 max-w-md",children:[$.jsx("button",{className:"btn btn-outline mb-2",onClick:()=>n(!1),children:"Close History"}),e.length===0?$.jsx("p",{className:"text-center",children:"No history available"}):e.map((d,p)=>$.jsxs("div",{className:"mb-2",children:[$.jsxs("p",{children:[$.jsx("strong",{children:"Provided Text:"})," ",d.providedText]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Spoken Text:"})," ",d.spokenText]}),$.jsxs("p",{children:[$.jsx("strong",{children:"Errors:"})," ",d.errors.join(", ")]}),$.jsx("button",{onClick:()=>r(p),children:"Remove"})]},p)),$.jsx("button",{onClick:()=>{o([]),localStorage.setItem("history",JSON.stringify([]))},children:"Clear All History"})]})})]})},ww=()=>$.jsx($.Fragment,{children:$.jsx("div",{className:"absolute inset-0 -z-10 h-full w-full bg-white bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]"})});var Eb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(a){const e=[];let t=0;for(let n=0;n<a.length;n++){let r=a.charCodeAt(n);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&n+1<a.length&&(a.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(a.charCodeAt(++n)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},kR=function(a){const e=[];let t=0,n=0;for(;t<a.length;){const r=a[t++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const o=a[t++];e[n++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=a[t++],l=a[t++],h=a[t++],d=((r&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const o=a[t++],l=a[t++];e[n++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},DE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<a.length;r+=3){const o=a[r],l=r+1<a.length,h=l?a[r+1]:0,d=r+2<a.length,p=d?a[r+2]:0,g=o>>2,v=(o&3)<<4|h>>4;let y=(h&15)<<2|p>>6,_=p&63;d||(_=64,l||(y=64)),n.push(t[g],t[v],t[y],t[_])}return n.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(NE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):kR(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<a.length;){const o=t[a.charAt(r++)],h=r<a.length?t[a.charAt(r)]:0;++r;const p=r<a.length?t[a.charAt(r)]:64;++r;const v=r<a.length?t[a.charAt(r)]:64;if(++r,o==null||h==null||p==null||v==null)throw new TR;const y=o<<2|h>>4;if(n.push(y),p!==64){const _=h<<4&240|p>>2;if(n.push(_),v!==64){const S=p<<6&192|v;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class TR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IR=function(a){const e=NE(a);return DE.encodeByteArray(e,!0)},OE=function(a){return IR(a).replace(/\./g,"")},FE=function(a){try{return DE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=()=>RR().__FIREBASE_DEFAULTS__,LR=()=>{if(typeof process>"u"||typeof Eb>"u")return;const a=Eb.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},MR=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&FE(a[1]);return e&&JSON.parse(e)},_w=()=>{try{return PR()||LR()||MR()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},NR=a=>{var e,t;return(t=(e=_w())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[a]},UE=()=>{var a;return(a=_w())===null||a===void 0?void 0:a.config},BE=a=>{var e;return(e=_w())===null||e===void 0?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function BR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jR(){const a=En();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function zR(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((a,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(n),a(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="FirebaseError";class Lo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=$R,Object.setPrototypeOf(this,Lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nf.prototype.create)}}class nf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?VR(o,n):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Lo(r,h,n)}}function VR(a,e){return a.replace(WR,(t,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const WR=/\{\$([^}]+)}/g;function GR(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function hg(a,e){if(a===e)return!0;const t=Object.keys(a),n=Object.keys(e);for(const r of t){if(!n.includes(r))return!1;const o=a[r],l=e[r];if(Cb(o)&&Cb(l)){if(!hg(o,l))return!1}else if(o!==l)return!1}for(const r of n)if(!t.includes(r))return!1;return!0}function Cb(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(a){const e=[];for(const[t,n]of Object.entries(a))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function qR(a,e){const t=new XR(a,e);return t.subscribe.bind(t)}class XR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");KR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:n},r.next===void 0&&(r.next=Cy),r.error===void 0&&(r.error=Cy),r.complete===void 0&&(r.complete=Cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KR(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function Cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(a){return a&&a._delegate?a._delegate:a}class iu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new DR;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JR(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});n.resolve(o)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);n===h&&l.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:QR(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QR(a){return a===qo?void 0:a}function JR(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ze||(Ze={}));const eP={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},tP=Ze.INFO,nP={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},iP=(a,e,...t)=>{if(e<a.logLevel)return;const n=new Date().toISOString(),r=nP[e];if(r)console[r](`[${n}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jE{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=iP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const rP=(a,e)=>e.some(t=>a instanceof t);let xb,kb;function sP(){return xb||(xb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return kb||(kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zE=new WeakMap,zy=new WeakMap,HE=new WeakMap,xy=new WeakMap,Aw=new WeakMap;function aP(a){const e=new Promise((t,n)=>{const r=()=>{a.removeEventListener("success",o),a.removeEventListener("error",l)},o=()=>{t(Co(a.result)),r()},l=()=>{n(a.error),r()};a.addEventListener("success",o),a.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&zE.set(t,a)}).catch(()=>{}),Aw.set(e,a),e}function lP(a){if(zy.has(a))return;const e=new Promise((t,n)=>{const r=()=>{a.removeEventListener("complete",o),a.removeEventListener("error",l),a.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{n(a.error||new DOMException("AbortError","AbortError")),r()};a.addEventListener("complete",o),a.addEventListener("error",l),a.addEventListener("abort",l)});zy.set(a,e)}let Hy={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return zy.get(a);if(e==="objectStoreNames")return a.objectStoreNames||HE.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Co(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function cP(a){Hy=a(Hy)}function uP(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=a.call(ky(this),e,...t);return HE.set(n,e.sort?e.sort():[e]),Co(n)}:oP().includes(a)?function(...e){return a.apply(ky(this),e),Co(zE.get(this))}:function(...e){return Co(a.apply(ky(this),e))}}function hP(a){return typeof a=="function"?uP(a):(a instanceof IDBTransaction&&lP(a),rP(a,sP())?new Proxy(a,Hy):a)}function Co(a){if(a instanceof IDBRequest)return aP(a);if(xy.has(a))return xy.get(a);const e=hP(a);return e!==a&&(xy.set(a,e),Aw.set(e,a)),e}const ky=a=>Aw.get(a);function dP(a,e,{blocked:t,upgrade:n,blocking:r,terminated:o}={}){const l=indexedDB.open(a,e),h=Co(l);return n&&l.addEventListener("upgradeneeded",d=>{n(Co(l.result),d.oldVersion,d.newVersion,Co(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),r&&d.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const fP=["get","getKey","getAll","getAllKeys","count"],pP=["put","add","delete","clear"],Ty=new Map;function Tb(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Ty.get(e))return Ty.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=pP.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||fP.includes(t)))return;const o=async function(l,...h){const d=this.transaction(l,r?"readwrite":"readonly");let p=d.store;return n&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),r&&d.done]))[0]};return Ty.set(e,o),o}cP(a=>({...a,get:(e,t,n)=>Tb(e,t)||a.get(e,t,n),has:(e,t)=>!!Tb(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mP(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function mP(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $y="@firebase/app",Ib="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new jE("@firebase/app"),vP="@firebase/app-compat",yP="@firebase/analytics-compat",wP="@firebase/analytics",_P="@firebase/app-check-compat",AP="@firebase/app-check",SP="@firebase/auth",bP="@firebase/auth-compat",EP="@firebase/database",CP="@firebase/data-connect",xP="@firebase/database-compat",kP="@firebase/functions",TP="@firebase/functions-compat",IP="@firebase/installations",RP="@firebase/installations-compat",PP="@firebase/messaging",LP="@firebase/messaging-compat",MP="@firebase/performance",NP="@firebase/performance-compat",DP="@firebase/remote-config",OP="@firebase/remote-config-compat",FP="@firebase/storage",UP="@firebase/storage-compat",BP="@firebase/firestore",jP="@firebase/vertexai",zP="@firebase/firestore-compat",HP="firebase",$P="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="[DEFAULT]",VP={[$y]:"fire-core",[vP]:"fire-core-compat",[wP]:"fire-analytics",[yP]:"fire-analytics-compat",[AP]:"fire-app-check",[_P]:"fire-app-check-compat",[SP]:"fire-auth",[bP]:"fire-auth-compat",[EP]:"fire-rtdb",[CP]:"fire-data-connect",[xP]:"fire-rtdb-compat",[kP]:"fire-fn",[TP]:"fire-fn-compat",[IP]:"fire-iid",[RP]:"fire-iid-compat",[PP]:"fire-fcm",[LP]:"fire-fcm-compat",[MP]:"fire-perf",[NP]:"fire-perf-compat",[DP]:"fire-rc",[OP]:"fire-rc-compat",[FP]:"fire-gcs",[UP]:"fire-gcs-compat",[BP]:"fire-fst",[zP]:"fire-fst-compat",[jP]:"fire-vertex","fire-js":"fire-js",[HP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new Map,WP=new Map,Wy=new Map;function Rb(a,e){try{a.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function bh(a){const e=a.name;if(Wy.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Wy.set(e,a);for(const t of dg.values())Rb(t,a);for(const t of WP.values())Rb(t,a);return!0}function $E(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function _r(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new nf("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=$P;function VE(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Vy,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw xo.create("bad-app-name",{appName:String(r)});if(t||(t=UE()),!t)throw xo.create("no-options");const o=dg.get(r);if(o){if(hg(t,o.options)&&hg(n,o.config))return o;throw xo.create("duplicate-app",{appName:r})}const l=new ZR(r);for(const d of Wy.values())l.addComponent(d);const h=new qP(t,n,l);return dg.set(r,h),h}function XP(a=Vy){const e=dg.get(a);if(!e&&a===Vy&&UE())return VE();if(!e)throw xo.create("no-app",{appName:a});return e}function Gl(a,e,t){var n;let r=(n=VP[a])!==null&&n!==void 0?n:a;t&&(r+=`-${t}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(h.join(" "));return}bh(new iu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-heartbeat-database",YP=1,Eh="firebase-heartbeat-store";let Iy=null;function WE(){return Iy||(Iy=dP(KP,YP,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(Eh)}catch(t){console.warn(t)}}}}).catch(a=>{throw xo.create("idb-open",{originalErrorMessage:a.message})})),Iy}async function QP(a){try{const t=(await WE()).transaction(Eh),n=await t.objectStore(Eh).get(GE(a));return await t.done,n}catch(e){if(e instanceof Lo)vs.warn(e.message);else{const t=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function Pb(a,e){try{const n=(await WE()).transaction(Eh,"readwrite");await n.objectStore(Eh).put(e,GE(a)),await n.done}catch(t){if(t instanceof Lo)vs.warn(t.message);else{const n=xo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(n.message)}}}function GE(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1024,ZP=30;class eL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nL(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Lb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>ZP){const l=iL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){vs.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Lb(),{heartbeatsToSend:n,unsentEntries:r}=tL(this._heartbeatsCache.heartbeats),o=OE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vs.warn(t),""}}}function Lb(){return new Date().toISOString().substring(0,10)}function tL(a,e=JP){const t=[];let n=a.slice();for(const r of a){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),Mb(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Mb(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class nL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zR()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Mb(a){return OE(JSON.stringify({version:2,heartbeats:a})).length}function iL(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let n=1;n<a.length;n++)a[n].date<t&&(t=a[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(a){bh(new iu("platform-logger",e=>new gP(e),"PRIVATE")),bh(new iu("heartbeat",e=>new eL(e),"PRIVATE")),Gl($y,Ib,a),Gl($y,Ib,"esm2017"),Gl("fire-js","")}rL("");function Sw(a,e){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(a);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(a,n[r])&&(t[n[r]]=a[n[r]]);return t}function qE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sL=qE,XE=new nf("auth","Firebase",qE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new jE("@firebase/auth");function oL(a,...e){fg.logLevel<=Ze.WARN&&fg.warn(`Auth (${sf}): ${a}`,...e)}function Rp(a,...e){fg.logLevel<=Ze.ERROR&&fg.error(`Auth (${sf}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(a,...e){throw Ew(a,...e)}function Vi(a,...e){return Ew(a,...e)}function bw(a,e,t){const n=Object.assign(Object.assign({},sL()),{[e]:t});return new nf("auth","Firebase",n).create(e,{appName:a.name})}function rl(a){return bw(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aL(a,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Sr(a,"argument-error"),bw(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ew(a,...e){if(typeof a!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=a.name),a._errorFactory.create(t,...n)}return XE.create(a,...e)}function Re(a,e,...t){if(!a)throw Ew(e,...t)}function hs(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Rp(e),new Error(e)}function ys(a,e){a||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function lL(){return Nb()==="http:"||Nb()==="https:"}function Nb(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lL()||UR()||"connection"in navigator)?navigator.onLine:!0}function uL(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=OR()||BR()}get(){return cL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(a,e){ys(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new of(3e4,6e4);function xw(a,e){return a.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:a.tenantId}):e}async function lu(a,e,t,n,r={}){return YE(a,r,async()=>{let o={},l={};n&&(e==="GET"?l=n:o={body:JSON.stringify(n)});const h=rf(Object.assign({key:a.config.apiKey},l)).slice(1),d=await a._getAdditionalHeaders();d["Content-Type"]="application/json",a.languageCode&&(d["X-Firebase-Locale"]=a.languageCode);const p=Object.assign({method:e,headers:d},o);return FR()||(p.referrerPolicy="no-referrer"),KE.fetch()(QE(a,a.config.apiHost,t,h),p)})}async function YE(a,e,t){a._canInitEmulator=!1;const n=Object.assign(Object.assign({},hL),e);try{const r=new pL(a),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Sp(a,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sp(a,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Sp(a,"email-already-in-use",l);if(d==="USER_DISABLED")throw Sp(a,"user-disabled",l);const g=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bw(a,g,p);Sr(a,g)}}catch(r){if(r instanceof Lo)throw r;Sr(a,"network-request-failed",{message:String(r)})}}async function fL(a,e,t,n,r={}){const o=await lu(a,e,t,n,r);return"mfaPendingCredential"in o&&Sr(a,"multi-factor-auth-required",{_serverResponse:o}),o}function QE(a,e,t,n){const r=`${e}${t}?${n}`;return a.config.emulator?Cw(a.config,r):`${a.config.apiScheme}://${r}`}class pL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Vi(this.auth,"network-request-failed")),dL.get())})}}function Sp(a,e,t){const n={appName:a.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const r=Vi(a,e,n);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(a,e){return lu(a,"POST","/v1/accounts:delete",e)}async function JE(a,e){return lu(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mL(a,e=!1){const t=Ss(a),n=await t.getIdToken(e),r=kw(n);Re(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:n,authTime:wh(Ry(r.auth_time)),issuedAtTime:wh(Ry(r.iat)),expirationTime:wh(Ry(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ry(a){return Number(a)*1e3}function kw(a){const[e,t,n]=a.split(".");if(e===void 0||t===void 0||n===void 0)return Rp("JWT malformed, contained fewer than 3 sections"),null;try{const r=FE(t);return r?JSON.parse(r):(Rp("Failed to decode base64 JWT payload"),null)}catch(r){return Rp("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Db(a){const e=kw(a);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(a,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Lo&&vL(n)&&a.auth.currentUser===a&&await a.auth.signOut(),n}}function vL({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wh(this.lastLoginAt),this.creationTime=wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(a){var e;const t=a.auth,n=await a.getIdToken(),r=await Ch(a,JE(t,{idToken:n}));Re(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];a._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ZE(o.providerUserInfo):[],h=_L(a.providerData,l),d=a.isAnonymous,p=!(a.email&&o.passwordHash)&&!(h!=null&&h.length),g=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qy(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(a,v)}async function wL(a){const e=Ss(a);await pg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _L(a,e){return[...a.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function ZE(a){return a.map(e=>{var{providerId:t}=e,n=Sw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(a,e){const t=await YE(a,{},async()=>{const n=rf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=a.config,l=QE(a,r,"/v1/token",`key=${o}`),h=await a._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",KE.fetch()(l,{method:"POST",headers:h,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SL(a,e){return lu(a,"POST","/v2/accounts:revokeToken",xw(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Db(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await AL(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,l=new ql;return n&&(Re(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),r&&(Re(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(a,e){Re(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class ds{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=Sw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qy(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ch(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return mL(this,e)}reload(){return wL(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await pg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(rl(this.auth));const e=await this.getIdToken();return await Ch(this,gL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,l,h,d,p,g;const v=(n=t.displayName)!==null&&n!==void 0?n:void 0,y=(r=t.email)!==null&&r!==void 0?r:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=t.photoURL)!==null&&l!==void 0?l:void 0,b=(h=t.tenantId)!==null&&h!==void 0?h:void 0,k=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,T=(p=t.createdAt)!==null&&p!==void 0?p:void 0,P=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:L,emailVerified:D,isAnonymous:j,providerData:G,stsTokenManager:V}=t;Re(L&&V,e,"internal-error");const Y=ql.fromJSON(this.name,V);Re(typeof L=="string",e,"internal-error"),Hs(v,e.name),Hs(y,e.name),Re(typeof D=="boolean",e,"internal-error"),Re(typeof j=="boolean",e,"internal-error"),Hs(_,e.name),Hs(S,e.name),Hs(b,e.name),Hs(k,e.name),Hs(T,e.name),Hs(P,e.name);const J=new ds({uid:L,auth:e,email:y,emailVerified:D,displayName:v,isAnonymous:j,photoURL:S,phoneNumber:_,tenantId:b,stsTokenManager:Y,createdAt:T,lastLoginAt:P});return G&&Array.isArray(G)&&(J.providerData=G.map(ue=>Object.assign({},ue))),k&&(J._redirectEventId=k),J}static async _fromIdTokenResponse(e,t,n=!1){const r=new ql;r.updateFromServerResponse(t);const o=new ds({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await pg(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Re(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?ZE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),h=new ql;h.updateFromIdToken(n);const d=new ds({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new qy(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function fs(a){ys(a instanceof Function,"Expected a class definition");let e=Ob.get(a);return e?(ys(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,Ob.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}e1.type="NONE";const Fb=e1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(a,e,t){return`firebase:${a}:${e}:${t}`}class Xl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=Pp(this.userKey,r.apiKey,o),this.fullPersistenceKey=Pp("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Xl(fs(Fb),e,n);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=r[0]||fs(Fb);const l=Pp(n,e.config.apiKey,e.name);let h=null;for(const p of t)try{const g=await p._get(l);if(g){const v=ds._fromJSON(e,g);p!==o&&(h=v),o=p;break}}catch{}const d=r.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Xl(o,e,n):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Xl(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o1(e))return"Blackberry";if(a1(e))return"Webos";if(n1(e))return"Safari";if((e.includes("chrome/")||i1(e))&&!e.includes("edge/"))return"Chrome";if(s1(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=a.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function t1(a=En()){return/firefox\//i.test(a)}function n1(a=En()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function i1(a=En()){return/crios\//i.test(a)}function r1(a=En()){return/iemobile/i.test(a)}function s1(a=En()){return/android/i.test(a)}function o1(a=En()){return/blackberry/i.test(a)}function a1(a=En()){return/webos/i.test(a)}function Tw(a=En()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function bL(a=En()){var e;return Tw(a)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EL(){return jR()&&document.documentMode===10}function l1(a=En()){return Tw(a)||s1(a)||a1(a)||o1(a)||/windows phone/i.test(a)||r1(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(a,e=[]){let t;switch(a){case"Browser":t=Ub(En());break;case"Worker":t=`${Ub(En())}-${a}`;break;default:t=a}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sf}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(a,e={}){return lu(a,"GET","/v2/passwordPolicy",xw(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=6;class TL{constructor(e){var t,n,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:kL,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.containsLowercaseLetter)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bb(this),this.idTokenSubscription=new Bb(this),this.beforeStateQueue=new CL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await JE(this,{idToken:e}),n=await ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_r(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=r==null?void 0:r._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(r=d.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(rl(this));const t=e?Ss(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(rl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(rl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xL(this),t=new TL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await SL(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,r);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&oL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Xg(a){return Ss(a)}class Bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=qR(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RL(a){Iw=a}function PL(a){return Iw.loadJS(a)}function LL(){return Iw.gapiScript}function ML(a){return`__${a}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(a,e){const t=$E(a,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(hg(o,e??{}))return r;Sr(r,"already-initialized")}return t.initialize({options:e})}function DL(a,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function OL(a,e,t){const n=Xg(a);Re(n._canInitEmulator,n,"emulator-config-failed"),Re(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!1,o=u1(e),{host:l,port:h}=FL(e),d=h===null?"":`:${h}`;n.config.emulator={url:`${o}//${l}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),UL()}function u1(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function FL(a){const e=u1(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const o=r[1];return{host:o,port:jb(n.substr(o.length+1))}}else{const[o,l]=n.split(":");return{host:o,port:jb(l)}}}function jb(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function UL(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(a,e){return fL(a,"POST","/v1/accounts:signInWithIdp",xw(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="http://localhost";class sl extends h1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=Sw(t,["providerId","signInMethod"]);if(!n||!r)return null;const l=new sl(n,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Kl(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Kl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kl(e,t)}buildRequest(){const e={requestUri:BL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends af{constructor(){super("facebook.com")}static credential(e){return sl._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends af{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sl._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return cs.credential(t,n)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends af{constructor(){super("github.com")}static credential(e){return sl._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends af{constructor(){super("twitter.com")}static credential(e,t){return sl._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Gs.credential(t,n)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await ds._fromIdTokenResponse(e,n,r),l=zb(n);return new ru({user:o,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=zb(n);return new ru({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function zb(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends Lo{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,gg.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new gg(e,t,n,r)}}function d1(a,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gg._fromErrorAndOperation(a,o,e,n):o})}async function jL(a,e,t=!1){const n=await Ch(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return ru._forOperation(a,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(a,e,t=!1){const{auth:n}=a;if(_r(n.app))return Promise.reject(rl(n));const r="reauthenticate";try{const o=await Ch(a,d1(n,r,e,a),t);Re(o.idToken,n,"internal-error");const l=kw(o.idToken);Re(l,n,"internal-error");const{sub:h}=l;return Re(a.uid===h,n,"user-mismatch"),ru._forOperation(a,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Sr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(a,e,t=!1){if(_r(a.app))return Promise.reject(rl(a));const n="signIn",r=await d1(a,n,e),o=await ru._fromIdTokenResponse(a,n,r);return t||await a._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(a,e){return Ss(a).setPersistence(e)}function VL(a,e,t,n){return Ss(a).onIdTokenChanged(e,t,n)}function WL(a,e,t){return Ss(a).beforeAuthStateChanged(e,t)}function GL(a,e,t,n){return Ss(a).onAuthStateChanged(e,t,n)}function qL(a){return Ss(a).signOut()}const mg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mg,"1"),this.storage.removeItem(mg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1e3,KL=10;class p1 extends f1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=l1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},o=this.storage.getItem(n);EL()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,KL):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},XL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}p1.type="LOCAL";const g1=p1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends f1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}m1.type="SESSION";const v1=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const n=new Kg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const h=Array.from(l).map(async p=>p(t.origin,o)),d=await YL(h);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(a="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const p=Pw("",20);r.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},n);l={messageChannel:r,onMessage(v){const y=v;if(y.data.eventId===p)switch(y.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(y.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function JL(a){Ar().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function ZL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eM(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function tM(){return y1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebaseLocalStorageDb",nM=1,vg="firebaseLocalStorage",_1="fbase_key";class lf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yg(a,e){return a.transaction([vg],e?"readwrite":"readonly").objectStore(vg)}function iM(){const a=indexedDB.deleteDatabase(w1);return new lf(a).toPromise()}function Xy(){const a=indexedDB.open(w1,nM);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const n=a.result;try{n.createObjectStore(vg,{keyPath:_1})}catch(r){t(r)}}),a.addEventListener("success",async()=>{const n=a.result;n.objectStoreNames.contains(vg)?e(n):(n.close(),await iM(),e(await Xy()))})})}async function Hb(a,e,t){const n=Yg(a,!0).put({[_1]:e,value:t});return new lf(n).toPromise()}async function rM(a,e){const t=Yg(a,!1).get(e),n=await new lf(t).toPromise();return n===void 0?null:n.value}function $b(a,e){const t=Yg(a,!0).delete(e);return new lf(t).toPromise()}const sM=800,oM=3;class A1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>oM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return y1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kg._getInstance(tM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZL(),!this.activeServiceWorker)return;this.sender=new QL(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xy();return await Hb(e,mg,"1"),await $b(e,mg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hb(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>rM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$b(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Yg(r,!1).getAll();return new lf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}A1.type="LOCAL";const aM=A1;new of(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(a,e){return e?fs(e):(Re(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends h1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lM(a){return HL(a.auth,new Lw(a),a.bypassAuthState)}function cM(a){const{auth:e,user:t}=a;return Re(t,e,"internal-error"),zL(t,new Lw(a),a.bypassAuthState)}async function uM(a){const{auth:e,user:t}=a;return Re(t,e,"internal-error"),jL(t,new Lw(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lM;case"linkViaPopup":case"linkViaRedirect":return uM;case"reauthViaPopup":case"reauthViaRedirect":return cM;default:Sr(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new of(2e3,1e4);async function dM(a,e,t){if(_r(a.app))return Promise.reject(Vi(a,"operation-not-supported-in-this-environment"));const n=Xg(a);aL(a,e,Rw);const r=S1(n,t);return new Zo(n,"signInViaPopup",e,r).executeNotNull()}class Zo extends b1{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=Pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hM.get())};e()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="pendingRedirect",Lp=new Map;class pM extends b1{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Lp.get(this.auth._key());if(!e){try{const n=await gM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Lp.set(this.auth._key(),e)}return this.bypassAuthState||Lp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gM(a,e){const t=yM(e),n=vM(a);if(!await n._isAvailable())return!1;const r=await n._get(t)==="true";return await n._remove(t),r}function mM(a,e){Lp.set(a._key(),e)}function vM(a){return fs(a._redirectPersistence)}function yM(a){return Pp(fM,a.config.apiKey,a.name)}async function wM(a,e,t=!1){if(_r(a.app))return Promise.reject(rl(a));const n=Xg(a),r=S1(n,e),l=await new pM(n,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=10*60*1e3;class AM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!E1(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_M&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vb(e))}saveEventToCache(e){this.cachedEventUids.add(Vb(e)),this.lastProcessedEventTime=Date.now()}}function Vb(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function E1({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SM(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return E1(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(a,e={}){return lu(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CM=/^https?/;async function xM(a){if(a.config.emulator)return;const{authorizedDomains:e}=await bM(a);for(const t of e)try{if(kM(t))return}catch{}Sr(a,"unauthorized-domain")}function kM(a){const e=Gy(),{protocol:t,hostname:n}=new URL(e);if(a.startsWith("chrome-extension://")){const l=new URL(a);return l.hostname===""&&n===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!CM.test(t))return!1;if(EM.test(a))return n===a;const r=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new of(3e4,6e4);function Wb(){const a=Ar().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function IM(a){return new Promise((e,t)=>{var n,r,o;function l(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),t(Vi(a,"network-request-failed"))},timeout:TM.get()})}if(!((r=(n=Ar().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Ar().gapi)===null||o===void 0)&&o.load)l();else{const h=ML("iframefcb");return Ar()[h]=()=>{gapi.load?l():t(Vi(a,"network-request-failed"))},PL(`${LL()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Mp=null,e})}let Mp=null;function RM(a){return Mp=Mp||IM(a),Mp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new of(5e3,15e3),LM="__/auth/iframe",MM="emulator/auth/iframe",NM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OM(a){const e=a.config;Re(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?Cw(e,MM):`https://${a.config.authDomain}/${LM}`,n={apiKey:e.apiKey,appName:a.name,v:sf},r=DM.get(a.config.apiHost);r&&(n.eid=r);const o=a._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${rf(n).slice(1)}`}async function FM(a){const e=await RM(a),t=Ar().gapi;return Re(t,a,"internal-error"),e.open({where:document.body,url:OM(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NM,dontclear:!0},n=>new Promise(async(r,o)=>{await n.restyle({setHideOnLeave:!1});const l=Vi(a,"network-request-failed"),h=Ar().setTimeout(()=>{o(l)},PM.get());function d(){Ar().clearTimeout(h),r(n)}n.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BM=500,jM=600,zM="_blank",HM="http://localhost";class Gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $M(a,e,t,n=BM,r=jM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let h="";const d=Object.assign(Object.assign({},UM),{width:n.toString(),height:r.toString(),top:o,left:l}),p=En().toLowerCase();t&&(h=i1(p)?zM:t),t1(p)&&(e=e||HM,d.scrollbars="yes");const g=Object.entries(d).reduce((y,[_,S])=>`${y}${_}=${S},`,"");if(bL(p)&&h!=="_self")return VM(e||"",h),new Gb(null);const v=window.open(e||"",h,g);Re(v,a,"popup-blocked");try{v.focus()}catch{}return new Gb(v)}function VM(a,e){const t=document.createElement("a");t.href=a,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="__/auth/handler",GM="emulator/auth/handler",qM=encodeURIComponent("fac");async function qb(a,e,t,n,r,o){Re(a.config.authDomain,a,"auth-domain-config-required"),Re(a.config.apiKey,a,"invalid-api-key");const l={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:n,v:sf,eventId:r};if(e instanceof Rw){e.setDefaultLanguage(a.languageCode),l.providerId=e.providerId||"",GR(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof af){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}a.tenantId&&(l.tid=a.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await a._getAppCheckToken(),p=d?`#${qM}=${encodeURIComponent(d)}`:"";return`${XM(a)}?${rf(h).slice(1)}${p}`}function XM({config:a}){return a.emulator?Cw(a,GM):`https://${a.authDomain}/${WM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="webStorageSupport";class KM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v1,this._completeRedirectFn=wM,this._overrideRedirectResult=mM}async _openPopup(e,t,n,r){var o;ys((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await qb(e,t,n,Gy(),r);return $M(e,l,Pw())}async _openRedirect(e,t,n,r){await this._originValidation(e);const o=await qb(e,t,n,Gy(),r);return JL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(ys(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await FM(e),n=new AM(e);return t.register("authEvent",r=>(Re(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Py,{type:Py},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Py];l!==void 0&&t(!!l),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return l1()||n1()||Tw()}}const YM=KM;var Xb="@firebase/auth",Kb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZM(a){bh(new iu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=n.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:l,authDomain:h,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c1(a)},p=new IL(n,r,o,d);return DL(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bh(new iu("auth-internal",e=>{const t=Xg(e.getProvider("auth").getImmediate());return(n=>new QM(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gl(Xb,Kb,JM(a)),Gl(Xb,Kb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=5*60,t2=BE("authIdTokenMaxAge")||e2;let Yb=null;const n2=a=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>t2)return;const r=t==null?void 0:t.token;Yb!==r&&(Yb=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Mw(a=XP()){const e=$E(a,"auth");if(e.isInitialized())return e.getImmediate();const t=NL(a,{popupRedirectResolver:YM,persistence:[aM,g1,v1]}),n=BE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const l=n2(o.toString());WL(t,l,()=>l(t.currentUser)),VL(t,h=>l(h))}}const r=NR("auth");return r&&OL(t,`http://${r}`),t}function i2(){var a,e;return(e=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&e!==void 0?e:document}RL({loadJS(a){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",a),n.onload=e,n.onerror=r=>{const o=Vi("internal-error");o.customData=r,t(o)},n.type="text/javascript",n.charset="UTF-8",i2().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZM("Browser");const C1="/Brainser/assets/Brainser-Logo-D_r5H2ZM.svg",x1=()=>{const a=Gg(),e=As(),t=Mw(),[n,r]=W.useState(null),[o,l]=W.useState(!1);W.useEffect(()=>{const g=GL(t,v=>{r(v||null)});return()=>g()},[t]),W.useEffect(()=>{n&&e.pathname==="/"&&a("/Home")},[n,e,a]);const h=()=>{a(n?"/Home":"/Sign")},d=()=>{qL(t).then(()=>{r(null),a("/Sign")}).catch(g=>{console.error("Error signing out: ",g)})},p=()=>{l(!o)};return $.jsxs("div",{className:"navbar bg-white shadow-md",children:[$.jsx("div",{className:"navbar-start",children:$.jsxs($.Fragment,{children:[$.jsx("img",{src:C1,alt:"Brainser-Logo",className:"h-12 mr-2"}),$.jsx("div",{className:"text-2xl font-semibold",children:"Brainser"})]})}),$.jsx("div",{className:"navbar-end flex items-center relative",children:n?$.jsxs($.Fragment,{children:[n.photoURL&&$.jsx("img",{src:n.photoURL,alt:"User Avatar",className:"h-10 w-10 rounded-full mr-2"}),$.jsxs("div",{className:"dropdown dropdown-bottom",children:[$.jsx("label",{tabIndex:0,className:"btn m-1",onClick:p,children:n.displayName}),o&&$.jsx("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:$.jsx("li",{children:$.jsx("a",{onClick:d,children:"Logout"})})})]})]}):$.jsx("button",{className:"btn black px-4 py-2 rounded hover:bg-black hover:text-white",onClick:h,children:"Try For Free"})})]})},r2=()=>{const a=W.useRef(null),e=W.useRef(null),t=W.useRef(null),n=W.useRef(null),r=W.useRef(null);return W.useEffect(()=>{const o=a.current,l=o.getContext("2d"),h=d=>{e.current=new(window.AudioContext||window.webkitAudioContext);const p=e.current.createMediaStreamSource(d);t.current=e.current.createAnalyser(),t.current.fftSize=256;const g=t.current.frequencyBinCount;n.current=new Uint8Array(g),p.connect(t.current);const v=()=>{r.current=requestAnimationFrame(v),t.current.getByteFrequencyData(n.current),l.clearRect(0,0,o.width,o.height);const y=o.width/g*2.5;let _,S=0;for(let b=0;b<g;b++)_=n.current[b],l.fillStyle="rgb(0, 0, 0)",l.fillRect(S,o.height-_/2,y,_/2),S+=y+1};v()};return navigator.mediaDevices.getUserMedia({audio:!0}).then(h),()=>{cancelAnimationFrame(r.current),e.current&&e.current.close()}},[]),$.jsx("canvas",{ref:a,width:"300",height:"100"})};var _h={};_h.d=(a,e)=>{for(var t in e)_h.o(e,t)&&!_h.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})};_h.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var Pe=globalThis.pdfjsLib={};_h.d(Pe,{AbortException:()=>Io,AnnotationEditorLayer:()=>iw,AnnotationEditorParamsType:()=>je,AnnotationEditorType:()=>Ne,AnnotationEditorUIManager:()=>al,AnnotationLayer:()=>ZN,AnnotationMode:()=>qs,ColorPicker:()=>bg,DOMSVGFactory:()=>Hw,DrawLayer:()=>ow,FeatureTest:()=>An,GlobalWorkerOptions:()=>us,ImageKind:()=>Np,InvalidPDFException:()=>Yy,MissingPDFException:()=>xh,OPS:()=>Ri,OutputScale:()=>Jy,PDFDataRangeTransport:()=>TC,PDFDateString:()=>Uw,PDFWorker:()=>Ql,PasswordResponses:()=>l2,PermissionFlag:()=>a2,PixelsPerInch:()=>Ro,RenderingCancelledException:()=>Ow,TextLayer:()=>kh,TouchManager:()=>Ag,UnexpectedResponseException:()=>yg,Util:()=>_e,VerbosityLevel:()=>Qg,XfaLayer:()=>RC,build:()=>MN,createValidAbsoluteUrl:()=>d2,fetchData:()=>tm,getDocument:()=>EN,getFilenameFromUrl:()=>A2,getPdfFilenameFromUrl:()=>S2,getXfaPageViewport:()=>b2,isDataScheme:()=>nm,isPdfFile:()=>Fw,noContextMenu:()=>Gi,normalizeUnicode:()=>y2,setLayerDimensions:()=>ol,shadow:()=>Be,stopEvent:()=>ii,version:()=>LN});const hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),k1=[1,0,0,1,0,0],Ky=[.001,0,0,.001,0,0],s2=1e7,Ly=1.35,ti={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},o2="pdfjs_internal_editor_",Ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},je={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},a2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Np={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},It={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Zu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Qg={ERRORS:0,WARNINGS:1,INFOS:5},Ri={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},l2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Jg=Qg.WARNINGS;function c2(a){Number.isInteger(a)&&(Jg=a)}function u2(){return Jg}function Zg(a){Jg>=Qg.INFOS&&console.log(`Info: ${a}`)}function De(a){Jg>=Qg.WARNINGS&&console.log(`Warning: ${a}`)}function et(a){throw new Error(a)}function Ct(a,e){a||et(e)}function h2(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function d2(a,e=null,t=null){if(!a)return null;try{if(t&&typeof a=="string"){if(t.addDefaultProtocol&&a.startsWith("www.")){const r=a.match(/\./g);(r==null?void 0:r.length)>=2&&(a=`http://${a}`)}if(t.tryConvertEncoding)try{a=v2(a)}catch{}}const n=e?new URL(a,e):new URL(a);if(h2(n))return n}catch{}return null}function Be(a,e,t,n=!1){return Object.defineProperty(a,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Mo=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Qb extends Mo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class My extends Mo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Yy extends Mo{constructor(e){super(e,"InvalidPDFException")}}class xh extends Mo{constructor(e){super(e,"MissingPDFException")}}class yg extends Mo{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class f2 extends Mo{constructor(e){super(e,"FormatError")}}class Io extends Mo{constructor(e){super(e,"AbortException")}}function T1(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&et("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const n=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),l=a.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function em(a){typeof a!="string"&&et("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=a.charCodeAt(n)&255;return t}function p2(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function Nw(a){const e=Object.create(null);for(const[t,n]of a)e[t]=n;return e}function g2(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function m2(){try{return new Function(""),!0}catch{return!1}}class An{static get isLittleEndian(){return Be(this,"isLittleEndian",g2())}static get isEvalSupported(){return Be(this,"isEvalSupported",m2())}static get isOffscreenCanvasSupported(){return Be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Be(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Be(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Be(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Be(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ny=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var gs,Dp,Qy;class _e{static makeHexColor(e,t,n){return`#${Ny[e]}${Ny[t]}${Ny[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],o[0],l[0]),Math.min(n[1],r[1],o[1],l[1]),Math.max(n[0],r[0],o[0],l[0]),Math.max(n[1],r[1],o[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],h=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*r))/2,p=h+d||1,g=h-d||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,r,l]}static bezierBoundingBox(e,t,n,r,o,l,h,d,p){return p?(p[0]=Math.min(p[0],e,h),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,h),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,h),Math.min(t,d),Math.max(e,h),Math.max(t,d)],x(this,gs,Qy).call(this,e,n,o,h,t,r,l,d,3*(-e+3*(n-o)+h),6*(e-2*n+o),3*(n-e),p),x(this,gs,Qy).call(this,e,n,o,h,t,r,l,d,3*(-t+3*(r-l)+d),6*(t-2*r+l),3*(r-t),p),p}}gs=new WeakSet,Dp=function(e,t,n,r,o,l,h,d,p,g){if(p<=0||p>=1)return;const v=1-p,y=p*p,_=y*p,S=v*(v*(v*e+3*p*t)+3*y*n)+_*r,b=v*(v*(v*o+3*p*l)+3*y*h)+_*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],b),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],b)},Qy=function(e,t,n,r,o,l,h,d,p,g,v,y){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&x(this,gs,Dp).call(this,e,t,n,r,o,l,h,d,-v/g,y);return}const _=g**2-4*v*p;if(_<0)return;const S=Math.sqrt(_),b=2*p;x(this,gs,Dp).call(this,e,t,n,r,o,l,h,d,(-g+S)/b,y),x(this,gs,Dp).call(this,e,t,n,r,o,l,h,d,(-g-S)/b,y)},C(_e,gs);function v2(a){return decodeURIComponent(escape(a))}let Dy=null,Jb=null;function y2(a){return Dy||(Dy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Jb=new Map([["ﬅ","ſt"]])),a.replaceAll(Dy,(e,t,n)=>t?t.normalize("NFKC"):Jb.get(n))}function w2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),T1(a)}const Dw="pdfjs_internal_id_";function _2(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(T1(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(t=>{t(a(...e))})});const Mr="http://www.w3.org/2000/svg",Qo=class Qo{};xe(Qo,"CSS",96),xe(Qo,"PDF",72),xe(Qo,"PDF_TO_CSS_UNITS",Qo.CSS/Qo.PDF);let Ro=Qo;async function tm(a,e="text"){if(ih(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class cf{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let g,v,y,_;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,v=0,y=0,_=1;break;case 90:g=0,v=1,y=1,_=0;break;case 270:g=0,v=-1,y=-1,_=0;break;case 0:g=1,v=0,y=0,_=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(y=-y,_=-_);let S,b,k,T;g===0?(S=Math.abs(p-e[1])*n+o,b=Math.abs(d-e[0])*n+l,k=(e[3]-e[1])*n,T=(e[2]-e[0])*n):(S=Math.abs(d-e[0])*n+o,b=Math.abs(p-e[1])*n+l,k=(e[2]-e[0])*n,T=(e[3]-e[1])*n),this.transform=[g*n,v*n,y*n,_*n,S-g*n*d-y*n*p,b-v*n*d-_*n*p],this.width=k,this.height=T}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(r=>r*e);return Be(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new cf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return _e.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=_e.applyTransform([e[0],e[1]],this.transform),n=_e.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return _e.applyInverseTransform([e,t],this.transform)}}class Ow extends Mo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function nm(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function Fw(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function A2(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function S2(a,e="document.pdf"){if(typeof a!="string")return e;if(nm(a))return De('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(a);let o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Zb{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(e){e in this.started&&De(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||De(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}}function ih(a,e){try{const{protocol:t}=e?new URL(a,e):new URL(a);return t==="http:"||t==="https:"}catch{return!1}}function Gi(a){a.preventDefault()}function ii(a){a.preventDefault(),a.stopPropagation()}var Ih;class Uw{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,Ih)||A(this,Ih,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Ih).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let v=parseInt(t[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(l+=g,h+=v):p==="+"&&(l-=g,h-=v),new Date(Date.UTC(n,r,o,l,h,d))}}Ih=new WeakMap,C(Uw,Ih);function b2(a,{scale:e=1,rotation:t=0}){const{width:n,height:r}=a.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new cf({viewBox:o,userUnit:1,scale:e,rotation:t})}function Bw(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(De(`Not a valid color format: "${a}"`),[0,0,0])}function E2(a){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of a.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;a.set(t,Bw(n))}e.remove()}function lt(a){const{a:e,b:t,c:n,d:r,e:o,f:l}=a.getTransform();return[e,t,n,r,o,l]}function er(a){const{a:e,b:t,c:n,d:r,e:o,f:l}=a.getTransform().invertSelf();return[e,t,n,r,o,l]}function ol(a,e,t=!1,n=!0){if(e instanceof cf){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:l}=a,h=An.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,v=h?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(l.width=g,l.height=v):(l.width=v,l.height=g)}n&&a.setAttribute("data-main-rotation",e.rotation)}class Jy{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Xs,ea,Pi,ta,Rh,Ph,xg,I1,Sn,R1,P1,Op,L1,e0;const Or=class Or{constructor(e){C(this,Sn);C(this,Xs,null);C(this,ea,null);C(this,Pi);C(this,ta,null);C(this,Rh,null);A(this,Pi,e),c(Or,Ph)||A(Or,Ph,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=A(this,Xs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Pi)._uiManager._signal;e.addEventListener("contextmenu",Gi,{signal:t}),e.addEventListener("pointerdown",x(Or,xg,I1),{signal:t});const n=A(this,ta,document.createElement("div"));n.className="buttons",e.append(n);const r=c(this,Pi).toolbarPosition;if(r){const{style:o}=e,l=c(this,Pi)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Sn,L1).call(this),e}get div(){return c(this,Xs)}hide(){var e;c(this,Xs).classList.add("hidden"),(e=c(this,ea))==null||e.hideDropdown()}show(){var e;c(this,Xs).classList.remove("hidden"),(e=c(this,Rh))==null||e.shown()}async addAltText(e){const t=await e.render();x(this,Sn,Op).call(this,t),c(this,ta).prepend(t,c(this,Sn,e0)),A(this,Rh,e)}addColorPicker(e){A(this,ea,e);const t=e.renderButton();x(this,Sn,Op).call(this,t),c(this,ta).prepend(t,c(this,Sn,e0))}remove(){var e;c(this,Xs).remove(),(e=c(this,ea))==null||e.destroy(),A(this,ea,null)}};Xs=new WeakMap,ea=new WeakMap,Pi=new WeakMap,ta=new WeakMap,Rh=new WeakMap,Ph=new WeakMap,xg=new WeakSet,I1=function(e){e.stopPropagation()},Sn=new WeakSet,R1=function(e){c(this,Pi)._focusEventsAllowed=!1,ii(e)},P1=function(e){c(this,Pi)._focusEventsAllowed=!0,ii(e)},Op=function(e){const t=c(this,Pi)._uiManager._signal;e.addEventListener("focusin",x(this,Sn,R1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(this,Sn,P1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Gi,{signal:t})},L1=function(){const{editorType:e,_uiManager:t}=c(this,Pi),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(Or,Ph)[e]),x(this,Sn,Op).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,ta).append(n)},e0=function(){const e=document.createElement("div");return e.className="divider",e},C(Or,xg),C(Or,Ph,null);let Zy=Or;var Lh,na,ia,Po,M1,N1,D1;class C2{constructor(e){C(this,Po);C(this,Lh,null);C(this,na,null);C(this,ia);A(this,ia,e)}show(e,t,n){const[r,o]=x(this,Po,N1).call(this,t,n),{style:l}=c(this,na)||A(this,na,x(this,Po,M1).call(this));e.append(c(this,na)),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,na).remove()}}Lh=new WeakMap,na=new WeakMap,ia=new WeakMap,Po=new WeakSet,M1=function(){const e=A(this,na,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Gi,{signal:c(this,ia)._signal});const t=A(this,Lh,document.createElement("div"));return t.className="buttons",e.append(t),x(this,Po,D1).call(this),e},N1=function(e,t){let n=0,r=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const h=o.x+(t?o.width:0);if(l>n){r=h,n=l;continue}t?h>r&&(r=h):h<r&&(r=h)}return[t?1-r:r,n]},D1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,ia)._signal;e.addEventListener("contextmenu",Gi,{signal:n}),e.addEventListener("click",()=>{c(this,ia).highlightSelection("floating_button")},{signal:n}),c(this,Lh).append(e)};function wg(a,e,t){for(const n of t)e.addEventListener(n,a[n].bind(a))}var kg;class x2{constructor(){C(this,kg,0)}get id(){return`${o2}${gn(this,kg)._++}`}}kg=new WeakMap;var Jl,Mh,on,Zl,Fp;const Vw=class Vw{constructor(){C(this,Zl);C(this,Jl,w2());C(this,Mh,0);C(this,on,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Be(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:o}=e;return x(this,Zl,Fp).call(this,`${t}_${n}_${r}_${o}`,e)}async getFromUrl(e){return x(this,Zl,Fp).call(this,e,e)}async getFromBlob(e,t){const n=await t;return x(this,Zl,Fp).call(this,e,n)}async getFromId(e){c(this,on)||A(this,on,new Map);const t=c(this,on).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,on)||A(this,on,new Map);let n=c(this,on).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Jl)}_${gn(this,Mh)._++}`,refCounter:1,isSvg:!1},c(this,on).set(e,n),c(this,on).set(n.id,n),n}getSvgUrl(e){const t=c(this,on).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,on)||A(this,on,new Map);const t=c(this,on).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,Jl)}_`)}};Jl=new WeakMap,Mh=new WeakMap,on=new WeakMap,Zl=new WeakSet,Fp=async function(e,t){c(this,on)||A(this,on,new Map);let n=c(this,on).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Jl)}_${gn(this,Mh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await tm(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=Vw._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((p,g)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},l.onload=async()=>{const v=n.svgUrl=l.result;h.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},h.onerror=l.onerror=g});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){De(r),n=null}return c(this,on).set(e,n),n&&c(this,on).set(n.id,n),n};let t0=Vw;var _t,Ks,Nh,ft;class k2{constructor(e=128){C(this,_t,[]);C(this,Ks,!1);C(this,Nh);C(this,ft,-1);A(this,Nh,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(r&&e(),c(this,Ks))return;const d={cmd:e,undo:t,post:n,type:o};if(c(this,ft)===-1){c(this,_t).length>0&&(c(this,_t).length=0),A(this,ft,0),c(this,_t).push(d);return}if(l&&c(this,_t)[c(this,ft)].type===o){h&&(d.undo=c(this,_t)[c(this,ft)].undo),c(this,_t)[c(this,ft)]=d;return}const p=c(this,ft)+1;p===c(this,Nh)?c(this,_t).splice(0,1):(A(this,ft,p),p<c(this,_t).length&&c(this,_t).splice(p)),c(this,_t).push(d)}undo(){if(c(this,ft)===-1)return;A(this,Ks,!0);const{undo:e,post:t}=c(this,_t)[c(this,ft)];e(),t==null||t(),A(this,Ks,!1),A(this,ft,c(this,ft)-1)}redo(){if(c(this,ft)<c(this,_t).length-1){A(this,ft,c(this,ft)+1),A(this,Ks,!0);const{cmd:e,post:t}=c(this,_t)[c(this,ft)];e(),t==null||t(),A(this,Ks,!1)}}hasSomethingToUndo(){return c(this,ft)!==-1}hasSomethingToRedo(){return c(this,ft)<c(this,_t).length-1}cleanType(e){if(c(this,ft)!==-1){for(let t=c(this,ft);t>=0;t--)if(c(this,_t)[t].type!==e){c(this,_t).splice(t+1,c(this,ft)-t),A(this,ft,t);return}c(this,_t).length=0,A(this,ft,-1)}}destroy(){A(this,_t,null)}}_t=new WeakMap,Ks=new WeakMap,Nh=new WeakMap,ft=new WeakMap;var Tg,O1;class uf{constructor(e){C(this,Tg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=An.platform;for(const[n,r,o={}]of e)for(const l of n){const h=l.startsWith("mac+");t&&h?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!h&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(x(this,Tg,O1).call(this,t));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:h=null}}=n;h&&!h(e,t)||(r.bind(e,...l,t)(),o||ii(t))}}Tg=new WeakSet,O1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ig=class Ig{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return E2(e),Be(this,"_colors",e)}convert(e){const t=Bw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((o,l)=>o===t[l]))return Ig._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?_e.makeHexColor(...t):e}};xe(Ig,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let n0=Ig;var ec,$n,Pt,Gt,tc,Ur,nc,di,Ys,ra,ic,sa,ir,Li,oa,Dh,Oh,rc,Fh,rr,Qs,sc,Js,sr,Rg,Zs,Uh,eo,aa,Bh,jh,Ft,Xe,Br,la,zh,Hh,to,or,jr,$h,fi,re,Up,i0,F1,U1,Bp,B1,j1,z1,r0,H1,s0,o0,$1,mn,Nr,V1,W1,a0,G1,rh,l0;const Vl=class Vl{constructor(e,t,n,r,o,l,h,d,p,g,v,y,_){C(this,re);C(this,ec,new AbortController);C(this,$n,null);C(this,Pt,new Map);C(this,Gt,new Map);C(this,tc,null);C(this,Ur,null);C(this,nc,null);C(this,di,new k2);C(this,Ys,null);C(this,ra,null);C(this,ic,0);C(this,sa,new Set);C(this,ir,null);C(this,Li,null);C(this,oa,new Set);xe(this,"_editorUndoBar",null);C(this,Dh,!1);C(this,Oh,!1);C(this,rc,!1);C(this,Fh,null);C(this,rr,null);C(this,Qs,null);C(this,sc,null);C(this,Js,!1);C(this,sr,null);C(this,Rg,new x2);C(this,Zs,!1);C(this,Uh,!1);C(this,eo,null);C(this,aa,null);C(this,Bh,null);C(this,jh,null);C(this,Ft,Ne.NONE);C(this,Xe,new Set);C(this,Br,null);C(this,la,null);C(this,zh,null);C(this,Hh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,to,[0,0]);C(this,or,null);C(this,jr,null);C(this,$h,null);C(this,fi,null);const S=this._signal=c(this,ec).signal;A(this,jr,e),A(this,$h,t),A(this,tc,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:S}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),r._on("setpreference",this.onSetPreference.bind(this),{signal:S}),r._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:S}),x(this,re,B1).call(this),x(this,re,$1).call(this),x(this,re,r0).call(this),A(this,Ur,o.annotationStorage),A(this,Fh,o.filterFactory),A(this,la,l),A(this,sc,h||null),A(this,Dh,d),A(this,Oh,p),A(this,rc,g),A(this,jh,v||null),this.viewParameters={realScale:Ro.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const e=Vl.prototype,t=l=>c(l,jr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Be(this,"_keyboardManager",new uf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&c(l,jr).contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&c(l,jr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,n,r,o;(e=c(this,fi))==null||e.resolve(),A(this,fi,null),(t=c(this,ec))==null||t.abort(),A(this,ec,null),this._signal=null;for(const l of c(this,Gt).values())l.destroy();c(this,Gt).clear(),c(this,Pt).clear(),c(this,oa).clear(),A(this,$n,null),c(this,Xe).clear(),c(this,di).destroy(),(n=c(this,tc))==null||n.destroy(),(r=c(this,sr))==null||r.hide(),A(this,sr,null),c(this,rr)&&(clearTimeout(c(this,rr)),A(this,rr,null)),c(this,or)&&(clearTimeout(c(this,or)),A(this,or,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,jh)}get useNewAltTextFlow(){return c(this,Oh)}get useNewAltTextWhenAddingImage(){return c(this,rc)}get hcmFilter(){return Be(this,"hcmFilter",c(this,la)?c(this,Fh).addHCMFilter(c(this,la).foreground,c(this,la).background):"none")}get direction(){return Be(this,"direction",getComputedStyle(c(this,jr)).direction)}get highlightColors(){return Be(this,"highlightColors",c(this,sc)?new Map(c(this,sc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Be(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,ra,e)}setMainHighlightColorPicker(e){A(this,Bh,e)}editAltText(e,t=!1){var n;(n=c(this,tc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,rc,t);break}}onPageChanging({pageNumber:e}){A(this,ic,e-1)}focusMainContainer(){c(this,jr).focus()}findParent(e,t){for(const n of c(this,Gt).values()){const{x:r,y:o,width:l,height:h}=n.div.getBoundingClientRect();if(e>=r&&e<=r+l&&t>=o&&t<=o+h)return n}return null}disableUserSelect(e=!1){c(this,$h).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,oa).add(e)}removeShouldRescale(e){c(this,oa).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ro.PDF_TO_CSS_UNITS;for(const n of c(this,oa))n.onScaleChanging();(t=c(this,ra))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l}=t,h=t.toString(),p=x(this,re,Up).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const v=x(this,re,i0).call(this,p),y=c(this,Ft)===Ne.NONE,_=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l,text:h}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(Ne.HIGHLIGHT,_);return}_()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Ur)&&!c(this,Ur).has(e.id)&&c(this,Ur).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,Js)&&(A(this,Js,!1),x(this,re,Bp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Xe))if(t.div.contains(e)){A(this,aa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,aa))return;const[e,t]=c(this,aa);A(this,aa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x(this,re,r0).call(this),x(this,re,s0).call(this)}removeEditListeners(){x(this,re,H1).call(this),x(this,re,o0).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,Li))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,Li))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,$n))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,Xe)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of c(this,Li))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){De(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const p=await r.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)x(this,re,a0).call(this,d);x(this,re,l0).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){De(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Ft)!==Ne.NONE&&!this.isEditorHandlingKeyboard&&Vl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Js)&&(A(this,Js,!1),x(this,re,Bp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(x(this,re,j1).call(this),x(this,re,s0).call(this),x(this,re,mn).call(this,{isEditing:c(this,Ft)!==Ne.NONE,isEmpty:x(this,re,rh).call(this),hasSomethingToUndo:c(this,di).hasSomethingToUndo(),hasSomethingToRedo:c(this,di).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,re,z1).call(this),x(this,re,o0).call(this),x(this,re,mn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Li)){A(this,Li,e);for(const t of c(this,Li))x(this,re,Nr).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Rg).id}get currentLayer(){return c(this,Gt).get(c(this,ic))}getLayer(e){return c(this,Gt).get(e)}get currentPageIndex(){return c(this,ic)}addLayer(e){c(this,Gt).set(e.pageIndex,e),c(this,Zs)?e.enable():e.disable()}removeLayer(e){c(this,Gt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var r;if(c(this,Ft)!==e&&!(c(this,fi)&&(await c(this,fi).promise,!c(this,fi)))){if(A(this,fi,Promise.withResolvers()),A(this,Ft,e),e===Ne.NONE){this.setEditingState(!1),x(this,re,W1).call(this),(r=this._editorUndoBar)==null||r.hide(),c(this,fi).resolve();return}this.setEditingState(!0),await x(this,re,V1).call(this),this.unselectAll();for(const o of c(this,Gt).values())o.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),c(this,fi).resolve();return}for(const o of c(this,Pt).values())o.annotationElementId===t?(this.setSelected(o),o.enterInEditMode()):o.unselect();c(this,fi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,Ft)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(c(this,Li)){switch(e){case je.CREATE:this.currentLayer.addNewEditor();return;case je.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,Bh))==null||n.updateColor(t);break;case je.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,zh)||A(this,zh,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of c(this,Xe))r.updateParams(e,t);for(const r of c(this,Li))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var o;for(const l of c(this,Pt).values())l.editorType===e&&l.show(t);(((o=c(this,zh))==null?void 0:o.get(je.HIGHLIGHT_SHOW_ALL))??!0)!==t&&x(this,re,Nr).call(this,[[je.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Uh)!==e){A(this,Uh,e);for(const t of c(this,Gt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of c(this,Pt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return c(this,Pt).get(e)}addEditor(e){c(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,rr)&&clearTimeout(c(this,rr)),A(this,rr,setTimeout(()=>{this.focusMainContainer(),A(this,rr,null)},0))),c(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,sa).has(e.annotationElementId))&&((t=c(this,Ur))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,sa).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,sa).has(e)}removeDeletedAnnotationElement(e){c(this,sa).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,$n)!==e&&(A(this,$n,e),e&&x(this,re,Nr).call(this,e.propertiesToUpdate))}updateUI(e){c(this,re,G1)===e&&x(this,re,Nr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){x(this,re,Nr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Xe).has(e)){c(this,Xe).delete(e),e.unselect(),x(this,re,mn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Xe).add(e),e.select(),x(this,re,Nr).call(this,e.propertiesToUpdate),x(this,re,mn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=c(this,ra))==null||t.commitOrRemove();for(const n of c(this,Xe))n!==e&&n.unselect();c(this,Xe).clear(),c(this,Xe).add(e),e.select(),x(this,re,Nr).call(this,e.propertiesToUpdate),x(this,re,mn).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Xe).has(e)}get firstSelectedEditor(){return c(this,Xe).values().next().value}unselect(e){e.unselect(),c(this,Xe).delete(e),x(this,re,mn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Xe).size!==0}get isEnterHandled(){return c(this,Xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,di).undo(),x(this,re,mn).call(this,{hasSomethingToUndo:c(this,di).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,re,rh).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,di).redo(),x(this,re,mn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,di).hasSomethingToRedo(),isEmpty:x(this,re,rh).call(this)})}addCommands(e){c(this,di).add(e),x(this,re,mn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,re,rh).call(this)})}cleanUndoStack(e){c(this,di).cleanType(e)}delete(){var o;this.commitOrRemove();const e=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Xe)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(r,t.length===1?t[0].editorType:t.length);for(const h of t)h.remove()},r=()=>{for(const l of t)x(this,re,a0).call(this,l)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,$n))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,$n)||this.hasSelection}selectAll(){for(const e of c(this,Xe))e.commit();x(this,re,l0).call(this,c(this,Pt).values())}unselectAll(){var e;if(!(c(this,$n)&&(c(this,$n).commitOrRemove(),c(this,Ft)!==Ne.NONE))&&!((e=c(this,ra))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Xe))t.unselect();c(this,Xe).clear(),x(this,re,mn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,to)[0]+=e,c(this,to)[1]+=t;const[r,o]=c(this,to),l=[...c(this,Xe)],h=1e3;c(this,or)&&clearTimeout(c(this,or)),A(this,or,setTimeout(()=>{A(this,or,null),c(this,to)[0]=c(this,to)[1]=0,this.addCommands({cmd:()=>{for(const d of l)c(this,Pt).has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of l)c(this,Pt).has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},h));for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,ir,new Map);for(const e of c(this,Xe))c(this,ir).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,ir))return!1;this.disableUserSelect(!1);const e=c(this,ir);A(this,ir,null);let t=!1;for(const[{x:r,y:o,pageIndex:l},h]of e)h.newX=r,h.newY=o,h.newPageIndex=l,t||(t=r!==h.savedX||o!==h.savedY||l!==h.savedPageIndex);if(!t)return!1;const n=(r,o,l,h)=>{if(c(this,Pt).has(r.id)){const d=c(this,Gt).get(h);d?r._setParentAndPosition(d,o,l):(r.pageIndex=h,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:h}]of e)n(r,o,l,h)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:h}]of e)n(r,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,ir))for(const n of c(this,ir).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,$n)===e}getActive(){return c(this,$n)}getMode(){return c(this,Ft)}get imageManager(){return Be(this,"imageManager",new t0)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(p,g,v,y)=>({x:(g-r)/l,y:1-(p+v-n)/o,width:y/l,height:v/o});break;case"180":h=(p,g,v,y)=>({x:1-(p+v-n)/o,y:1-(g+y-r)/l,width:v/o,height:y/l});break;case"270":h=(p,g,v,y)=>({x:1-(g+y-r)/l,y:(p-n)/o,width:y/l,height:v/o});break;default:h=(p,g,v,y)=>({x:(p-n)/o,y:(g-r)/l,width:v/o,height:y/l});break}const d=[];for(let p=0,g=t.rangeCount;p<g;p++){const v=t.getRangeAt(p);if(!v.collapsed)for(const{x:y,y:_,width:S,height:b}of v.getClientRects())S===0||b===0||d.push(h(y,_,S,b))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,nc)||A(this,nc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,nc))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,nc))==null?void 0:r.get(e.data.id);if(!t)return;const n=c(this,Ur).getRawValue(t);n&&(c(this,Ft)===Ne.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};ec=new WeakMap,$n=new WeakMap,Pt=new WeakMap,Gt=new WeakMap,tc=new WeakMap,Ur=new WeakMap,nc=new WeakMap,di=new WeakMap,Ys=new WeakMap,ra=new WeakMap,ic=new WeakMap,sa=new WeakMap,ir=new WeakMap,Li=new WeakMap,oa=new WeakMap,Dh=new WeakMap,Oh=new WeakMap,rc=new WeakMap,Fh=new WeakMap,rr=new WeakMap,Qs=new WeakMap,sc=new WeakMap,Js=new WeakMap,sr=new WeakMap,Rg=new WeakMap,Zs=new WeakMap,Uh=new WeakMap,eo=new WeakMap,aa=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Ft=new WeakMap,Xe=new WeakMap,Br=new WeakMap,la=new WeakMap,zh=new WeakMap,Hh=new WeakMap,to=new WeakMap,or=new WeakMap,jr=new WeakMap,$h=new WeakMap,fi=new WeakMap,re=new WeakSet,Up=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},i0=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,Gt).values())if(n.hasTextLayer(e))return n;return null},F1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=x(this,re,Up).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(c(this,sr)||A(this,sr,new C2(this)),c(this,sr).show(n,r,this.direction==="ltr"))},U1=function(){var o,l,h;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Br)&&((o=c(this,sr))==null||o.hide(),A(this,Br,null),x(this,re,mn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Br))return;const r=x(this,re,Up).call(this,e).closest(".textLayer");if(!r){c(this,Br)&&((l=c(this,sr))==null||l.hide(),A(this,Br,null),x(this,re,mn).call(this,{hasSelectedText:!1}));return}if((h=c(this,sr))==null||h.hide(),A(this,Br,t),x(this,re,mn).call(this,{hasSelectedText:!0}),!(c(this,Ft)!==Ne.HIGHLIGHT&&c(this,Ft)!==Ne.NONE)&&(c(this,Ft)===Ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Js,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=c(this,Ft)===Ne.HIGHLIGHT?x(this,re,i0).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),v=y=>{y.type==="pointerup"&&y.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),y.type==="pointerup"&&x(this,re,Bp).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("blur",v,{signal:g})}},Bp=function(e=""){c(this,Ft)===Ne.HIGHLIGHT?this.highlightSelection(e):c(this,Dh)&&x(this,re,F1).call(this)},B1=function(){document.addEventListener("selectionchange",x(this,re,U1).bind(this),{signal:this._signal})},j1=function(){if(c(this,Qs))return;A(this,Qs,new AbortController);const e=this.combinedSignal(c(this,Qs));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},z1=function(){var e;(e=c(this,Qs))==null||e.abort(),A(this,Qs,null)},r0=function(){if(c(this,eo))return;A(this,eo,new AbortController);const e=this.combinedSignal(c(this,eo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},H1=function(){var e;(e=c(this,eo))==null||e.abort(),A(this,eo,null)},s0=function(){if(c(this,Ys))return;A(this,Ys,new AbortController);const e=this.combinedSignal(c(this,Ys));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},o0=function(){var e;(e=c(this,Ys))==null||e.abort(),A(this,Ys,null)},$1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},mn=function(e){Object.entries(e).some(([n,r])=>c(this,Hh)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Hh),e)}),c(this,Ft)===Ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&x(this,re,Nr).call(this,[[je.HIGHLIGHT_FREE,!0]]))},Nr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},V1=async function(){if(!c(this,Zs)){A(this,Zs,!0);const e=[];for(const t of c(this,Gt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,Pt).values())t.enable()}},W1=function(){if(this.unselectAll(),c(this,Zs)){A(this,Zs,!1);for(const e of c(this,Gt).values())e.disable();for(const e of c(this,Pt).values())e.disable()}},a0=function(e){const t=c(this,Gt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},G1=function(){let e=null;for(e of c(this,Xe));return e},rh=function(){if(c(this,Pt).size===0)return!0;if(c(this,Pt).size===1)for(const e of c(this,Pt).values())return e.isEmpty();return!1},l0=function(e){for(const t of c(this,Xe))t.unselect();c(this,Xe).clear();for(const t of e)t.isEmpty()||(c(this,Xe).add(t),t.select());x(this,re,mn).call(this,{hasSelectedEditor:this.hasSelection})},xe(Vl,"TRANSLATE_SMALL",1),xe(Vl,"TRANSLATE_BIG",10);let al=Vl;var Ut,ar,Mi,oc,lr,Vn,ac,cr,Dn,zr,ca,ur,no,$i,sh,jp;const vn=class vn{constructor(e){C(this,$i);C(this,Ut,null);C(this,ar,!1);C(this,Mi,null);C(this,oc,null);C(this,lr,null);C(this,Vn,null);C(this,ac,!1);C(this,cr,null);C(this,Dn,null);C(this,zr,null);C(this,ca,null);C(this,ur,!1);A(this,Dn,e),A(this,ur,e._uiManager.useNewAltTextFlow),c(vn,no)||A(vn,no,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){vn._l10n??(vn._l10n=e)}async render(){const e=A(this,Mi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,oc,document.createElement("span"));e.append(t),c(this,ur)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(vn,no).missing),t.setAttribute("data-l10n-id",c(vn,no)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,Dn)._uiManager._signal;e.addEventListener("contextmenu",Gi,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),c(this,Dn)._uiManager.editAltText(c(this,Dn)),c(this,ur)&&c(this,Dn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,$i,sh)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(A(this,ac,!0),r(o))},{signal:n}),await x(this,$i,jp).call(this),e}finish(){c(this,Mi)&&(c(this,Mi).focus({focusVisible:c(this,ac)}),A(this,ac,!1))}isEmpty(){return c(this,ur)?c(this,Ut)===null:!c(this,Ut)&&!c(this,ar)}hasData(){return c(this,ur)?c(this,Ut)!==null||!!c(this,zr):this.isEmpty()}get guessedText(){return c(this,zr)}async setGuessedText(e){c(this,Ut)===null&&(A(this,zr,e),A(this,ca,await vn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(this,$i,jp).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,ur)||c(this,Ut)){(t=c(this,cr))==null||t.remove(),A(this,cr,null);return}if(!c(this,cr)){const n=A(this,cr,document.createElement("div"));n.className="noAltTextBadge",c(this,Dn).div.append(n)}c(this,cr).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Ut);return!e&&c(this,zr)===t&&(t=c(this,ca)),{altText:t,decorative:c(this,ar),guessedText:c(this,zr),textWithDisclaimer:c(this,ca)}}get data(){return{altText:c(this,Ut),decorative:c(this,ar)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(A(this,zr,n),A(this,ca,r)),!(c(this,Ut)===e&&c(this,ar)===t)&&(o||(A(this,Ut,e),A(this,ar,t)),x(this,$i,jp).call(this))}toggle(e=!1){c(this,Mi)&&(!e&&c(this,Vn)&&(clearTimeout(c(this,Vn)),A(this,Vn,null)),c(this,Mi).disabled=!e)}shown(){c(this,Dn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,$i,sh)}})}destroy(){var e,t;(e=c(this,Mi))==null||e.remove(),A(this,Mi,null),A(this,oc,null),A(this,lr,null),(t=c(this,cr))==null||t.remove(),A(this,cr,null)}};Ut=new WeakMap,ar=new WeakMap,Mi=new WeakMap,oc=new WeakMap,lr=new WeakMap,Vn=new WeakMap,ac=new WeakMap,cr=new WeakMap,Dn=new WeakMap,zr=new WeakMap,ca=new WeakMap,ur=new WeakMap,no=new WeakMap,$i=new WeakSet,sh=function(){return c(this,Ut)&&"added"||c(this,Ut)===null&&this.guessedText&&"review"||"missing"},jp=async function(){var r,o,l;const e=c(this,Mi);if(!e)return;if(c(this,ur)){if(e.classList.toggle("done",!!c(this,Ut)),e.setAttribute("data-l10n-id",c(vn,no)[c(this,$i,sh)]),(r=c(this,oc))==null||r.setAttribute("data-l10n-id",c(vn,no)[`${c(this,$i,sh)}-label`]),!c(this,Ut)){(o=c(this,lr))==null||o.remove();return}}else{if(!c(this,Ut)&&!c(this,ar)){e.classList.remove("done"),(l=c(this,lr))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,lr);if(!t){A(this,lr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Dn).id}`;const h=100,d=c(this,Dn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(c(this,Vn)),A(this,Vn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,Vn,setTimeout(()=>{A(this,Vn,null),c(this,lr).classList.add("show"),c(this,Dn)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;c(this,Vn)&&(clearTimeout(c(this,Vn)),A(this,Vn,null)),(p=c(this,lr))==null||p.classList.remove("show")},{signal:d})}c(this,ar)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Ut)),t.parentNode||e.append(t);const n=c(this,Dn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},C(vn,no,null),xe(vn,"_l10n",null);let _g=vn;var Vh,ua,Wh,Gh,qh,Xh,Kh,lc,Hr,ha,io,ws,q1,X1,c0;const Ww=class Ww{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){C(this,ws);C(this,Vh);C(this,ua,!1);C(this,Wh,null);C(this,Gh);C(this,qh);C(this,Xh);C(this,Kh);C(this,lc);C(this,Hr,null);C(this,ha);C(this,io,null);A(this,Vh,e),A(this,Wh,n),A(this,Gh,t),A(this,qh,r),A(this,Xh,o),A(this,Kh,l),A(this,ha,new AbortController),A(this,lc,AbortSignal.any([h,c(this,ha).signal])),e.addEventListener("touchstart",x(this,ws,q1).bind(this),{passive:!1,signal:c(this,lc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Be(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=c(this,ha))==null||e.abort(),A(this,ha,null)}};Vh=new WeakMap,ua=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,lc=new WeakMap,Hr=new WeakMap,ha=new WeakMap,io=new WeakMap,ws=new WeakSet,q1=function(e){var r,o,l;if((r=c(this,Gh))!=null&&r.call(this)||e.touches.length<2)return;if(!c(this,io)){A(this,io,new AbortController);const h=AbortSignal.any([c(this,lc),c(this,io).signal]),d=c(this,Vh),p={signal:h,passive:!1};d.addEventListener("touchmove",x(this,ws,X1).bind(this),p),d.addEventListener("touchend",x(this,ws,c0).bind(this),p),d.addEventListener("touchcancel",x(this,ws,c0).bind(this),p),(o=c(this,qh))==null||o.call(this)}if(ii(e),e.touches.length!==2||(l=c(this,Wh))!=null&&l.call(this)){A(this,Hr,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),A(this,Hr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},X1=function(e){var D;if(!c(this,Hr)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:o}=t,{screenX:l,screenY:h}=n,d=c(this,Hr),{touch0X:p,touch0Y:g,touch1X:v,touch1Y:y}=d,_=v-p,S=y-g,b=l-r,k=h-o,T=Math.hypot(b,k)||1,P=Math.hypot(_,S)||1;if(!c(this,ua)&&Math.abs(P-T)<=Ww.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,e.preventDefault(),!c(this,ua)){A(this,ua,!0);return}const L=[(r+l)/2,(o+h)/2];(D=c(this,Xh))==null||D.call(this,L,P,T)},c0=function(e){var t;c(this,io).abort(),A(this,io,null),(t=c(this,Kh))==null||t.call(this),c(this,Hr)&&(e.preventDefault(),A(this,Hr,null),A(this,ua,!1))};let Ag=Ww;var da,Ni,st,cc,ro,Yh,fa,qt,pa,$r,so,Qh,ga,Wn,Jh,ma,Vr,hr,uc,hc,pi,va,Zh,Pg,ke,u0,ed,h0,zp,K1,Y1,d0,Hp,f0,Q1,J1,Z1,p0,eC,g0,tC,nC,iC,m0,oh;const Oe=class Oe{constructor(e){C(this,ke);C(this,da,null);C(this,Ni,null);C(this,st,null);C(this,cc,!1);C(this,ro,null);C(this,Yh,"");C(this,fa,!1);C(this,qt,null);C(this,pa,null);C(this,$r,null);C(this,so,null);C(this,Qh,"");C(this,ga,!1);C(this,Wn,null);C(this,Jh,!1);C(this,ma,!1);C(this,Vr,!1);C(this,hr,null);C(this,uc,0);C(this,hc,0);C(this,pi,null);C(this,va,null);xe(this,"_editToolbar",null);xe(this,"_initialOptions",Object.create(null));xe(this,"_initialData",null);xe(this,"_isVisible",!0);xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);C(this,Zh,!1);C(this,Pg,Oe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=e.x/h,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Oe.prototype._resizeWithKeyboard,t=al.TRANSLATE_SMALL,n=al.TRANSLATE_BIG;return Be(this,"_resizerKeyboardManager",new uf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Oe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new T2({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Oe._l10n??(Oe._l10n=e),Oe._l10nResizer||(Oe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Oe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Oe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){et("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Zh)}set _isDraggable(e){var t;A(this,Zh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Pg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(this,ke,oh).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,ga)?A(this,ga,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/l,this.fixAndSetPosition()}translate(e,t){x(this,ke,u0).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Wn)||A(this,Wn,[this.x,this.y,this.width,this.height]),x(this,ke,u0).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,Wn)||A(this,Wn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,o]}=this;if(this.x+=e/r,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,p]=this.getBaseTranslation();l+=d,h+=p;const{style:g}=n;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Wn)&&(c(this,Wn)[0]!==this.x||c(this,Wn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Wn)&&(c(this,Wn)[2]!==this.width||c(this,Wn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Oe,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=n,d*=r,o*=n,l*=r,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(n-h,o)),l=Math.max(0,Math.min(r-d,l));break;case 90:o=Math.max(0,Math.min(n-d,o)),l=Math.min(r,Math.max(h,l));break;case 180:o=Math.min(n,Math.max(h,o)),l=Math.min(r,Math.max(d,l));break;case 270:o=Math.min(n,Math.max(d,o)),l=Math.max(0,Math.min(r-h,l));break}this.x=o/=n,this.y=l/=r;const[p,g]=this.getBaseTranslation();o+=p,l+=g,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return x(n=Oe,ed,h0).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return x(n=Oe,ed,h0).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/n).toFixed(2)}%`,c(this,fa)||(o.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),o=!c(this,fa)&&t.endsWith("%");if(r&&o)return;const[l,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!c(this,fa)&&!o&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,st))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,ma)?this._editToolbar:(this._editToolbar=new Zy(this),this.div.append(this._editToolbar.render()),c(this,st)&&await this._editToolbar.addAltText(c(this,st)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,st))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,st)||(_g.initialize(Oe._l10n),A(this,st,new _g(this)),c(this,da)&&(c(this,st).data=c(this,da),A(this,da,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,st))==null?void 0:e.data}set altTextData(e){c(this,st)&&(c(this,st).data=e)}get guessedAltText(){var e;return(e=c(this,st))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,st))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,st))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,st)&&!c(this,st).isEmpty()}hasAltTextData(){var e;return((e=c(this,st))==null?void 0:e.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,cc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,ke,g0).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),wg(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,va)||A(this,va,new Ag({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,ke,Q1).bind(this),onPinching:x(this,ke,J1).bind(this),onPinchEnd:x(this,ke,Z1).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(e){const{isMac:t}=An.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,ga,!0),this._isDraggable){x(this,ke,eC).call(this,e);return}x(this,ke,p0).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,hr)&&clearTimeout(c(this,hr)),A(this,hr,setTimeout(()=>{var e;A(this,hr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,p=e/r,g=t/r,v=this.x*o,y=this.y*l,_=this.width*o,S=this.height*l;switch(n){case 0:return[v+p+h,l-y-g-S+d,v+p+_+h,l-y-g+d];case 90:return[v+g+h,l-y+p+d,v+g+S+h,l-y+p+_+d];case 180:return[v-p-_+h,l-y+g+d,v-p+h,l-y+g+S+d];case 270:return[v-g-S+h,l-y-p-_+d,v-g+h,l-y-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,o,l]=e,h=o-n,d=l-r;switch(this.rotation){case 0:return[n,t-l,h,d];case 90:return[n,t-r,d,h];case 180:return[o,t-r,h,d];case 270:return[o,t-l,d,h];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){A(this,ma,!0)}disableEditMode(){A(this,ma,!1)}isInEditMode(){return c(this,ma)}shouldGetKeyboardEvents(){return c(this,Vr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&r>0&&e<o&&n>0}rebuild(){x(this,ke,g0).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){et("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,A(r,da,e.accessibilityData);const[o,l]=r.pageDimensions,[h,d,p,g]=r.getRectInCurrentCoords(e.rect,l);return r.x=h/o,r.y=d/l,r.width=p/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,so))==null||e.abort(),A(this,so,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,hr)&&(clearTimeout(c(this,hr)),A(this,hr,null)),x(this,ke,oh).call(this),this.removeEditToolbar(),c(this,pi)){for(const n of c(this,pi).values())clearTimeout(n);A(this,pi,null)}this.parent=null,(t=c(this,va))==null||t.destroy(),A(this,va,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,ke,K1).call(this),c(this,qt).classList.remove("hidden"),wg(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,$r,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,qt).children;if(!c(this,Ni)){A(this,Ni,Array.from(t));const l=x(this,ke,tC).bind(this),h=x(this,ke,nC).bind(this),d=this._uiManager._signal;for(const p of c(this,Ni)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",x(this,ke,iC).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",Oe._l10nResizer[g])}}const n=c(this,Ni)[0];let r=0;for(const l of t){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,Ni).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)c(this,qt).append(c(this,qt).firstChild);else if(o>r)for(let h=0;h<o-r;h++)c(this,qt).firstChild.before(c(this,qt).lastChild);let l=0;for(const h of t){const p=c(this,Ni)[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Oe._l10nResizer[p])}}x(this,ke,m0).call(this,0),A(this,Vr,!0),c(this,qt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Vr)&&x(this,ke,f0).call(this,c(this,Qh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,ke,oh).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,st))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,o;(e=c(this,qt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=c(this,st))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,Jh)}set isEditing(e){A(this,Jh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){A(this,fa,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,pi)||A(this,pi,new Map);const{action:n}=e;let r=c(this,pi).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,pi).delete(n),c(this,pi).size===0&&A(this,pi,null)},Oe._telemetryTimeout),c(this,pi).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,cc,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,cc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};da=new WeakMap,Ni=new WeakMap,st=new WeakMap,cc=new WeakMap,ro=new WeakMap,Yh=new WeakMap,fa=new WeakMap,qt=new WeakMap,pa=new WeakMap,$r=new WeakMap,so=new WeakMap,Qh=new WeakMap,ga=new WeakMap,Wn=new WeakMap,Jh=new WeakMap,ma=new WeakMap,Vr=new WeakMap,hr=new WeakMap,uc=new WeakMap,hc=new WeakMap,pi=new WeakMap,va=new WeakMap,Zh=new WeakMap,Pg=new WeakMap,ke=new WeakSet,u0=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ed=new WeakSet,h0=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},zp=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},K1=function(){if(c(this,qt))return;A(this,qt,document.createElement("div")),c(this,qt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");c(this,qt).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",x(this,ke,Y1).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Gi,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,qt))},Y1=function(e,t){var g;t.preventDefault();const{isMac:n}=An.platform;if(t.button!==0||t.ctrlKey&&n)return;(g=c(this,st))==null||g.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,pa,[t.screenX,t.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,ke,f0).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ii,{passive:!1,signal:l}),window.addEventListener("contextmenu",Gi,{signal:l}),A(this,$r,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var v;o.abort(),this.parent.togglePointerEvents(!0),(v=c(this,st))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=d,x(this,ke,Hp).call(this)};window.addEventListener("pointerup",p,{signal:l}),window.addEventListener("blur",p,{signal:l})},d0=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[o,l]=this.parentDimensions;this.setDims(o*n,l*r),this.fixAndSetPosition(),this._onResized()},Hp=function(){if(!c(this,$r))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=c(this,$r);A(this,$r,null);const o=this.x,l=this.y,h=this.width,d=this.height;o===e&&l===t&&h===n&&d===r||this.addCommands({cmd:x(this,ke,d0).bind(this,o,l,h,d),undo:x(this,ke,d0).bind(this,e,t,n,r),mustExec:!0})},f0=function(e,t){const[n,r]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,p=Oe.MIN_SIZE/n,g=Oe.MIN_SIZE/r,v=x(this,ke,zp).call(this,this.rotation),y=(te,ie)=>[v[0]*te+v[2]*ie,v[1]*te+v[3]*ie],_=x(this,ke,zp).call(this,360-this.rotation),S=(te,ie)=>[_[0]*te+_[2]*ie,_[1]*te+_[3]*ie];let b,k,T=!1,P=!1;switch(e){case"topLeft":T=!0,b=(te,ie)=>[0,0],k=(te,ie)=>[te,ie];break;case"topMiddle":b=(te,ie)=>[te/2,0],k=(te,ie)=>[te/2,ie];break;case"topRight":T=!0,b=(te,ie)=>[te,0],k=(te,ie)=>[0,ie];break;case"middleRight":P=!0,b=(te,ie)=>[te,ie/2],k=(te,ie)=>[0,ie/2];break;case"bottomRight":T=!0,b=(te,ie)=>[te,ie],k=(te,ie)=>[0,0];break;case"bottomMiddle":b=(te,ie)=>[te/2,ie],k=(te,ie)=>[te/2,0];break;case"bottomLeft":T=!0,b=(te,ie)=>[0,ie],k=(te,ie)=>[te,0];break;case"middleLeft":P=!0,b=(te,ie)=>[0,ie/2],k=(te,ie)=>[te,ie/2];break}const L=b(h,d),D=k(h,d);let j=y(...D);const G=Oe._round(o+j[0]),V=Oe._round(l+j[1]);let Y=1,J=1,ue,ae;if(t.fromKeyboard)({deltaX:ue,deltaY:ae}=t);else{const{screenX:te,screenY:ie}=t,[Z,U]=c(this,pa);[ue,ae]=this.screenToPageTranslation(te-Z,ie-U),c(this,pa)[0]=te,c(this,pa)[1]=ie}if([ue,ae]=S(ue/n,ae/r),T){const te=Math.hypot(h,d);Y=J=Math.max(Math.min(Math.hypot(D[0]-L[0]-ue,D[1]-L[1]-ae)/te,1/h,1/d),p/h,g/d)}else P?Y=Math.max(p,Math.min(1,Math.abs(D[0]-L[0]-ue)))/h:J=Math.max(g,Math.min(1,Math.abs(D[1]-L[1]-ae)))/d;const Me=Oe._round(h*Y),Te=Oe._round(d*J);j=y(...k(Me,Te));const Ae=G-j[0],ze=V-j[1];c(this,Wn)||A(this,Wn,[this.x,this.y,this.width,this.height]),this.width=Me,this.height=Te,this.x=Ae,this.y=ze,this.setDims(n*Me,r*Te),this.fixAndSetPosition(),this._onResizing()},Q1=function(){var e;A(this,$r,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,st))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},J1=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=x(this,ke,zp).call(this,this.rotation),h=(G,V)=>[l[0]*G+l[2]*V,l[1]*G+l[3]*V],[d,p]=this.parentDimensions,g=this.x,v=this.y,y=this.width,_=this.height,S=Oe.MIN_SIZE/d,b=Oe.MIN_SIZE/p;o=Math.max(Math.min(o,1/y,1/_),S/y,b/_);const k=Oe._round(y*o),T=Oe._round(_*o);if(k===y&&T===_)return;c(this,Wn)||A(this,Wn,[g,v,y,_]);const P=h(y/2,_/2),L=Oe._round(g+P[0]),D=Oe._round(v+P[1]),j=h(k/2,T/2);this.x=L-j[0],this.y=D-j[1],this.width=k,this.height=T,this.setDims(d*k,p*T),this.fixAndSetPosition(),this._onResizing()},Z1=function(){var e;(e=c(this,st))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),x(this,ke,Hp).call(this)},p0=function(e){const{isMac:t}=An.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},eC=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),l={capture:!0,passive:!1,signal:o},h=p=>{r.abort(),A(this,ro,null),A(this,ga,!1),this._uiManager.endDragSession()||x(this,ke,p0).call(this,p),n&&this._onStopDragging()};t&&(A(this,uc,e.clientX),A(this,hc,e.clientY),A(this,ro,e.pointerId),A(this,Yh,e.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:v,pointerId:y}=p;if(y!==c(this,ro)){ii(p);return}const[_,S]=this.screenToPageTranslation(g-c(this,uc),v-c(this,hc));A(this,uc,g),A(this,hc,v),this._uiManager.dragSelectedEditors(_,S)},l),window.addEventListener("touchmove",ii,l),window.addEventListener("pointerdown",p=>{p.pointerType===c(this,Yh)&&(c(this,va)||p.isPrimary)&&h(p),ii(p)},l));const d=p=>{if(!c(this,ro)||c(this,ro)===p.pointerId){h(p);return}ii(p)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},g0=function(){if(c(this,so)||!this.div)return;A(this,so,new AbortController);const e=this._uiManager.combinedSignal(c(this,so));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},tC=function(e){Oe._resizerKeyboardManager.exec(this,e)},nC=function(e){var t;c(this,Vr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,qt)&&x(this,ke,oh).call(this)},iC=function(e){A(this,Qh,c(this,Vr)?e:"")},m0=function(e){if(c(this,Ni))for(const t of c(this,Ni))t.tabIndex=e},oh=function(){A(this,Vr,!1),x(this,ke,m0).call(this,-1),x(this,ke,Hp).call(this)},C(Oe,ed),xe(Oe,"_l10n",null),xe(Oe,"_l10nResizer",null),xe(Oe,"_borderLineWidth",-1),xe(Oe,"_colorManager",new n0),xe(Oe,"_zIndex",1),xe(Oe,"_telemetryTimeout",1e3);let gt=Oe;class T2 extends gt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const eE=3285377520,hi=4294901760,tr=65535;class rC{constructor(e){this.h1=e?e&4294967295:eE,this.h2=e?e&4294967295:eE}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let b=0,k=e.length;b<k;b++){const T=e.charCodeAt(b);T<=255?t[n++]=T:(t[n++]=T>>>8,t[n++]=T&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(t.buffer,0,r);let h=0,d=0,p=this.h1,g=this.h2;const v=3432918353,y=461845907,_=v&tr,S=y&tr;for(let b=0;b<r;b++)b&1?(h=l[b],h=h*v&hi|h*_&tr,h=h<<15|h>>>17,h=h*y&hi|h*S&tr,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[b],d=d*v&hi|d*_&tr,d=d<<15|d>>>17,d=d*y&hi|d*S&tr,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*v&hi|h*_&tr,h=h<<15|h>>>17,h=h*y&hi|h*S&tr,r&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&hi|e*36045&tr,t=t*4283543511&hi|((t<<16|e>>>16)*2950163797&hi)>>>16,e^=t>>>1,e=e*444984403&hi|e*60499&tr,t=t*3301882366&hi|((t<<16|e>>>16)*3120437893&hi)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const v0=Object.freeze({map:null,hash:"",transfer:void 0});var ya,wa,Bt,Lg,sC;class jw{constructor(){C(this,Lg);C(this,ya,!1);C(this,wa,null);C(this,Bt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,Bt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,Bt).get(e)}remove(e){if(c(this,Bt).delete(e),c(this,Bt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,Bt).values())if(t instanceof gt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,Bt).get(e);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(r=!0,n[o]=l);else r=!0,c(this,Bt).set(e,t);r&&x(this,Lg,sC).call(this),t instanceof gt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,Bt).has(e)}getAll(){return c(this,Bt).size>0?Nw(c(this,Bt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return c(this,Bt).size}resetModified(){c(this,ya)&&(A(this,ya,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new oC(this)}get serializable(){if(c(this,Bt).size===0)return v0;const e=new Map,t=new rC,n=[],r=Object.create(null);let o=!1;for(const[l,h]of c(this,Bt)){const d=h instanceof gt?h.serialize(!1,r):h;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:v0}get editorStats(){let e=null;const t=new Map;for(const n of c(this,Bt).values()){if(!(n instanceof gt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[h,d]of Object.entries(r)){if(h==="type")continue;let p=l.get(h);p||(p=new Map,l.set(h,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){A(this,wa,null)}get modifiedIds(){if(c(this,wa))return c(this,wa);const e=[];for(const t of c(this,Bt).values())!(t instanceof gt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return A(this,wa,{ids:new Set(e),hash:e.join(",")})}}ya=new WeakMap,wa=new WeakMap,Bt=new WeakMap,Lg=new WeakSet,sC=function(){c(this,ya)||(A(this,ya,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var td;class oC extends jw{constructor(t){super();C(this,td);const{map:n,hash:r,transfer:o}=t.serializable,l=structuredClone(n,o?{transfer:o}:null);A(this,td,{map:l,hash:r,transfer:o})}get print(){et("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,td)}get modifiedIds(){return Be(this,"modifiedIds",{ids:new Set,hash:""})}}td=new WeakMap;var dc;class I2{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,dc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,dc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,dc).has(e.loadedName))){if(Ct(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=e,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),c(this,dc).add(n),t==null||t(e)}catch{De(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}et("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw De(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(hn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Be(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ct(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(D,j){return D.charCodeAt(j)<<24|D.charCodeAt(j+1)<<16|D.charCodeAt(j+2)<<8|D.charCodeAt(j+3)&255}function r(D,j,G,V){const Y=D.substring(0,j),J=D.substring(j+G);return Y+V+J}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function g(D,j){if(++p>30){De("Load test font never loaded."),j();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(g.bind(null,D,j))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,v.length,v);const S=16,b=1482184792;let k=n(y,S);for(o=0,l=v.length-3;o<l;o+=4)k=k-b+n(v,o)|0;o<v.length&&(k=k-b+n(v+"XXX",o)|0),y=r(y,S,4,p2(k));const T=`url(data:font/opentype;base64,${btoa(y)});`,P=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(P);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const D of[e.loadedName,v]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=D,L.append(j)}this._document.body.append(L),g(v,()=>{L.remove(),t.complete()})}}dc=new WeakMap;class R2{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_2(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(l){De(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}}const bp={DATA:1,ERROR:2},Et={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function tE(){}function Mn(a){if(a instanceof Io||a instanceof Yy||a instanceof xh||a instanceof Qb||a instanceof yg||a instanceof My)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||et('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Io(a.message);case"InvalidPDFException":return new Yy(a.message);case"MissingPDFException":return new xh(a.message);case"PasswordException":return new Qb(a.message,a.code);case"UnexpectedResponseException":return new yg(a.message,a.status);case"UnknownErrorException":return new My(a.message,a.details)}return new My(a.message,a.toString())}var fc,Ai,aC,lC,cC,$p;class ah{constructor(e,t,n){C(this,Ai);C(this,fc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",x(this,Ai,aC).bind(this),{signal:c(this,fc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,r){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:e,streamId:o,data:t,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:Et.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Ct(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:Et.CANCEL,streamId:o,reason:Mn(p)}),g.promise}},n)}destroy(){var e;(e=c(this,fc))==null||e.abort(),A(this,fc,null)}}fc=new WeakMap,Ai=new WeakSet,aC=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){x(this,Ai,cC).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===bp.DATA)r.resolve(e.data);else if(e.callback===bp.ERROR)r.reject(Mn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:bp.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:bp.ERROR,callbackId:e.callbackId,reason:Mn(l)})});return}if(e.streamId){x(this,Ai,lC).call(this,e);return}t(e.data)},lC=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this,h=this.actionHandler[e.action],d={enqueue(p,g=1,v){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:Et.ENQUEUE,streamId:t,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Et.CLOSE,streamId:t}),delete l.streamSinks[t])},error(p){Ct(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Et.ERROR,streamId:t,reason:Mn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(h,e.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Et.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Et.START_COMPLETE,streamId:t,reason:Mn(p)})})},cC=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case Et.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(Mn(e.reason));break;case Et.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(Mn(e.reason));break;case Et.PULL:if(!h){o.postMessage({sourceName:n,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,Promise.try(h.onPull||tE).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,reason:Mn(p)})});break;case Et.ENQUEUE:if(Ct(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Et.CLOSE:if(Ct(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),x(this,Ai,$p).call(this,l,t);break;case Et.ERROR:Ct(l,"error should have stream controller"),l.controller.error(Mn(e.reason)),x(this,Ai,$p).call(this,l,t);break;case Et.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(Mn(e.reason)),x(this,Ai,$p).call(this,l,t);break;case Et.CANCEL:if(!h)break;const d=Mn(e.reason);Promise.try(h.onCancel||tE,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Et.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Et.CANCEL_COMPLETE,streamId:t,reason:Mn(p)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},$p=async function(e,t){var n,r,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var nd;class uC{constructor({enableHWA:e=!1}){C(this,nd,!1);A(this,nd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,nd)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){et("Abstract method `_createCanvas` called.")}}nd=new WeakMap;class P2 extends uC{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class hC{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){et("Abstract method `_fetch` called.")}}class dC extends hC{async _fetch(e){const t=await tm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):em(t)}}class fC{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}}var _a,pc,Wr,Gr,an,Aa,Sa,oe,rn,lh,Fl,Vp,Ul,pC,y0,Bl,ch,uh,w0,hh;class L2 extends fC{constructor({docId:t,ownerDocument:n=globalThis.document}){super();C(this,oe);C(this,_a);C(this,pc);C(this,Wr);C(this,Gr);C(this,an);C(this,Aa);C(this,Sa,0);A(this,Gr,t),A(this,an,n)}addFilter(t){if(!t)return"none";let n=c(this,oe,rn).get(t);if(n)return n;const[r,o,l]=x(this,oe,Vp).call(this,t),h=t.length===1?r:`${r}${o}${l}`;if(n=c(this,oe,rn).get(h),n)return c(this,oe,rn).set(t,n),n;const d=`g_${c(this,Gr)}_transfer_map_${gn(this,Sa)._++}`,p=x(this,oe,Ul).call(this,d);c(this,oe,rn).set(t,p),c(this,oe,rn).set(h,p);const g=x(this,oe,Bl).call(this,d);return x(this,oe,uh).call(this,r,o,l,g),p}addHCMFilter(t,n){var S;const r=`${t}-${n}`,o="base";let l=c(this,oe,lh).get(o);if((l==null?void 0:l.key)===r||(l?((S=l.filter)==null||S.remove(),l.key=r,l.url="none",l.filter=null):(l={key:r,url:"none",filter:null},c(this,oe,lh).set(o,l)),!t||!n))return l.url;const h=x(this,oe,hh).call(this,t);t=_e.makeHexColor(...h);const d=x(this,oe,hh).call(this,n);if(n=_e.makeHexColor(...d),c(this,oe,Fl).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const p=new Array(256);for(let b=0;b<=255;b++){const k=b/255;p[b]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const g=p.join(","),v=`g_${c(this,Gr)}_hcm_filter`,y=l.filter=x(this,oe,Bl).call(this,v);x(this,oe,uh).call(this,g,g,g,y),x(this,oe,y0).call(this,y);const _=(b,k)=>{const T=h[b]/255,P=d[b]/255,L=new Array(k+1);for(let D=0;D<=k;D++)L[D]=T+D/k*(P-T);return L.join(",")};return x(this,oe,uh).call(this,_(0,5),_(1,5),_(2,5),y),l.url=x(this,oe,Ul).call(this,v),l.url}addAlphaFilter(t){let n=c(this,oe,rn).get(t);if(n)return n;const[r]=x(this,oe,Vp).call(this,[t]),o=`alpha_${r}`;if(n=c(this,oe,rn).get(o),n)return c(this,oe,rn).set(t,n),n;const l=`g_${c(this,Gr)}_alpha_map_${gn(this,Sa)._++}`,h=x(this,oe,Ul).call(this,l);c(this,oe,rn).set(t,h),c(this,oe,rn).set(o,h);const d=x(this,oe,Bl).call(this,l);return x(this,oe,w0).call(this,r,d),h}addLuminosityFilter(t){let n=c(this,oe,rn).get(t||"luminosity");if(n)return n;let r,o;if(t?([r]=x(this,oe,Vp).call(this,[t]),o=`luminosity_${r}`):o="luminosity",n=c(this,oe,rn).get(o),n)return c(this,oe,rn).set(t,n),n;const l=`g_${c(this,Gr)}_luminosity_map_${gn(this,Sa)._++}`,h=x(this,oe,Ul).call(this,l);c(this,oe,rn).set(t,h),c(this,oe,rn).set(o,h);const d=x(this,oe,Bl).call(this,l);return x(this,oe,pC).call(this,d),t&&x(this,oe,w0).call(this,r,d),h}addHighlightHCMFilter(t,n,r,o,l){var P;const h=`${n}-${r}-${o}-${l}`;let d=c(this,oe,lh).get(t);if((d==null?void 0:d.key)===h||(d?((P=d.filter)==null||P.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},c(this,oe,lh).set(t,d)),!n||!r))return d.url;const[p,g]=[n,r].map(x(this,oe,hh).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[_,S]=[o,l].map(x(this,oe,hh).bind(this));y<v&&([v,y,_,S]=[y,v,S,_]),c(this,oe,Fl).style.color="";const b=(L,D,j)=>{const G=new Array(256),V=(y-v)/j,Y=L/255,J=(D-L)/(255*j);let ue=0;for(let ae=0;ae<=j;ae++){const Me=Math.round(v+ae*V),Te=Y+ae*J;for(let Ae=ue;Ae<=Me;Ae++)G[Ae]=Te;ue=Me+1}for(let ae=ue;ae<256;ae++)G[ae]=G[ue-1];return G.join(",")},k=`g_${c(this,Gr)}_hcm_${t}_filter`,T=d.filter=x(this,oe,Bl).call(this,k);return x(this,oe,y0).call(this,T),x(this,oe,uh).call(this,b(_[0],S[0],5),b(_[1],S[1],5),b(_[2],S[2],5),T),d.url=x(this,oe,Ul).call(this,k),d.url}destroy(t=!1){var n,r,o,l;t&&((n=c(this,Aa))!=null&&n.size)||((r=c(this,Wr))==null||r.parentNode.parentNode.remove(),A(this,Wr,null),(o=c(this,pc))==null||o.clear(),A(this,pc,null),(l=c(this,Aa))==null||l.clear(),A(this,Aa,null),A(this,Sa,0))}}_a=new WeakMap,pc=new WeakMap,Wr=new WeakMap,Gr=new WeakMap,an=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,oe=new WeakSet,rn=function(){return c(this,pc)||A(this,pc,new Map)},lh=function(){return c(this,Aa)||A(this,Aa,new Map)},Fl=function(){if(!c(this,Wr)){const t=c(this,an).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=c(this,an).createElementNS(Mr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Wr,c(this,an).createElementNS(Mr,"defs")),t.append(r),r.append(c(this,Wr)),c(this,an).body.append(t)}return c(this,Wr)},Vp=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let y=0;y<256;y++)g[y]=p[y]/255;const v=g.join(",");return[v,v,v]}const[n,r,o]=t,l=new Array(256),h=new Array(256),d=new Array(256);for(let p=0;p<256;p++)l[p]=n[p]/255,h[p]=r[p]/255,d[p]=o[p]/255;return[l.join(","),h.join(","),d.join(",")]},Ul=function(t){if(c(this,_a)===void 0){A(this,_a,"");const n=c(this,an).URL;n!==c(this,an).baseURI&&(nm(n)?De('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,_a,n.split("#",1)[0]))}return`url(${c(this,_a)}#${t})`},pC=function(t){const n=c(this,an).createElementNS(Mr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},y0=function(t){const n=c(this,an).createElementNS(Mr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Bl=function(t){const n=c(this,an).createElementNS(Mr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,oe,Fl).append(n),n},ch=function(t,n,r){const o=c(this,an).createElementNS(Mr,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},uh=function(t,n,r,o){const l=c(this,an).createElementNS(Mr,"feComponentTransfer");o.append(l),x(this,oe,ch).call(this,l,"feFuncR",t),x(this,oe,ch).call(this,l,"feFuncG",n),x(this,oe,ch).call(this,l,"feFuncB",r)},w0=function(t,n){const r=c(this,an).createElementNS(Mr,"feComponentTransfer");n.append(r),x(this,oe,ch).call(this,r,"feFuncA",t)},hh=function(t){return c(this,oe,Fl).style.color=t,Bw(getComputedStyle(c(this,oe,Fl)).getPropertyValue("color"))};class gC{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){et("Abstract method `_fetch` called.")}}class mC extends gC{async _fetch(e){const t=await tm(e,"arraybuffer");return new Uint8Array(t)}}hn&&De("Please use the `legacy` build in Node.js environments.");async function vC(a){const t=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(t)}class M2 extends fC{}class N2 extends uC{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class D2 extends hC{async _fetch(e){return vC(e)}}class O2 extends gC{async _fetch(e){return vC(e)}}const un={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _0(a,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),a.clip(r)}class zw{getPattern(){et("Abstract method `getPattern` called.")}}class F2 extends zw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===un.STROKE||r===un.FILL){const l=t.current.getClippedPathBoundingBox(r,lt(e))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=t.cachedCanvases.getCanvas("pattern",h,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),n=_e.transform(n,[1,0,0,1,l[0],l[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),_0(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(n);o.setTransform(v)}else _0(e,this._bbox),o=this._createGradient(e);return o}}function Oy(a,e,t,n,r,o,l,h){const d=e.coords,p=e.colors,g=a.data,v=a.width*4;let y;d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y),d[n+1]>d[r+1]&&(y=n,n=r,r=y,y=l,l=h,h=y),d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y);const _=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,b=(d[n]+e.offsetX)*e.scaleX,k=(d[n+1]+e.offsetY)*e.scaleY,T=(d[r]+e.offsetX)*e.scaleX,P=(d[r+1]+e.offsetY)*e.scaleY;if(S>=P)return;const L=p[o],D=p[o+1],j=p[o+2],G=p[l],V=p[l+1],Y=p[l+2],J=p[h],ue=p[h+1],ae=p[h+2],Me=Math.round(S),Te=Math.round(P);let Ae,ze,te,ie,Z,U,N,I;for(let F=Me;F<=Te;F++){if(F<k){const le=F<S?0:(S-F)/(S-k);Ae=_-(_-b)*le,ze=L-(L-G)*le,te=D-(D-V)*le,ie=j-(j-Y)*le}else{let le;F>P?le=1:k===P?le=0:le=(k-F)/(k-P),Ae=b-(b-T)*le,ze=G-(G-J)*le,te=V-(V-ue)*le,ie=Y-(Y-ae)*le}let q;F<S?q=0:F>P?q=1:q=(S-F)/(S-P),Z=_-(_-T)*q,U=L-(L-J)*q,N=D-(D-ue)*q,I=j-(j-ae)*q;const ne=Math.round(Math.min(Ae,Z)),ge=Math.round(Math.max(Ae,Z));let fe=v*F+ne*4;for(let le=ne;le<=ge;le++)q=(Ae-le)/(Ae-Z),q<0?q=0:q>1&&(q=1),g[fe++]=ze-(ze-U)*q|0,g[fe++]=te-(te-N)*q|0,g[fe++]=ie-(ie-I)*q|0,g[fe++]=255}}function U2(a,e,t){const n=e.coords,r=e.colors;let o,l;switch(e.type){case"lattice":const h=e.verticesPerRow,d=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<d;o++){let g=o*h;for(let v=0;v<p;v++,g++)Oy(a,t,n[g],n[g+1],n[g+h],r[g],r[g+1],r[g+h]),Oy(a,t,n[g+h+1],n[g+1],n[g+h],r[g+h+1],r[g+1],r[g+h])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)Oy(a,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class B2 extends zw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,v=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),_=p/v,S=g/y,b={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/_,scaleY:1/S},k=v+2*2,T=y+2*2,P=n.getCanvas("mesh",k,T),L=P.context,D=L.createImageData(v,y);if(t){const G=D.data;for(let V=0,Y=G.length;V<Y;V+=4)G[V]=t[0],G[V+1]=t[1],G[V+2]=t[2],G[V+3]=255}for(const G of this._figures)U2(D,G,b);return L.putImageData(D,2,2),{canvas:P.canvas,offsetX:h-2*_,offsetY:d-2*S,scaleX:_,scaleY:S}}getPattern(e,t,n,r){_0(e,this._bbox);let o;if(r===un.SHADING)o=_e.singularValueDecompose2dScale(lt(e));else if(o=_e.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=_e.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const l=this._createMeshCanvas(o,r===un.SHADING?null:this._background,t.cachedCanvases);return r!==un.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class j2 extends zw{getPattern(){return"hotpink"}}function z2(a){switch(a[0]){case"RadialAxial":return new F2(a);case"Mesh":return new B2(a);case"Dummy":return new j2}throw new Error(`Unknown IR type: ${a[0]}`)}const nE={COLORED:1,UNCOLORED:2},Mg=class Mg{constructor(e,t,n,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),Zg("TilingType: "+o);const g=t[0],v=t[1],y=t[2],_=t[3],S=y-g,b=_-v,k=_e.singularValueDecompose2dScale(this.matrix),T=_e.singularValueDecompose2dScale(this.baseTransform),P=k[0]*T[0],L=k[1]*T[1];let D=S,j=b,G=!1,V=!1;const Y=Math.ceil(d*P),J=Math.ceil(p*L),ue=Math.ceil(S*P),ae=Math.ceil(b*L);Y>=ue?D=d:G=!0,J>=ae?j=p:V=!0;const Me=this.getSizeAndScale(D,this.ctx.canvas.width,P),Te=this.getSizeAndScale(j,this.ctx.canvas.height,L),Ae=e.cachedCanvases.getCanvas("pattern",Me.size,Te.size),ze=Ae.context,te=h.createCanvasGraphics(ze);if(te.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(te,r,l),ze.translate(-Me.scale*g,-Te.scale*v),te.transform(Me.scale,0,0,Te.scale,0,0),ze.save(),this.clipBbox(te,g,v,y,_),te.baseTransform=lt(te.ctx),te.executeOperatorList(n),te.endDrawing(),ze.restore(),G||V){const ie=Ae.canvas;G&&(D=d),V&&(j=p);const Z=this.getSizeAndScale(D,this.ctx.canvas.width,P),U=this.getSizeAndScale(j,this.ctx.canvas.height,L),N=Z.size,I=U.size,F=e.cachedCanvases.getCanvas("pattern-workaround",N,I),q=F.context,ne=G?Math.floor(S/d):0,ge=V?Math.floor(b/p):0;for(let fe=0;fe<=ne;fe++)for(let le=0;le<=ge;le++)q.drawImage(ie,N*fe,I*le,N,I,0,0,N,I);return{canvas:F.canvas,scaleX:Z.scale,scaleY:U.scale,offsetX:g,offsetY:v}}return{canvas:Ae.canvas,scaleX:Me.scale,scaleY:Te.scale,offsetX:g,offsetY:v}}getSizeAndScale(e,t,n){const r=Math.max(Mg.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=r?o=r:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,r,o){const l=r-t,h=o-n;e.ctx.rect(t,n,l,h),e.current.updateRectMinMax(lt(e.ctx),[t,n,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,o=e.current;switch(t){case nE.COLORED:const l=this.ctx;r.fillStyle=l.fillStyle,r.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case nE.UNCOLORED:const h=_e.makeHexColor(n[0],n[1],n[2]);r.fillStyle=h,r.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new f2(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let o=n;r!==un.SHADING&&(o=_e.transform(o,t.baseTransform),this.matrix&&(o=_e.transform(o,this.matrix)));const l=this.createPatternCanvas(t);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(h),d}};xe(Mg,"MAX_PATTERN_SIZE",3e3);let A0=Mg;function H2({src:a,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=An.isLittleEndian?4278190080:255,[d,p]=l?[o,h]:[h,o],g=n>>3,v=n&7,y=a.length;t=new Uint32Array(t.buffer);let _=0;for(let S=0;S<r;S++){for(const k=e+g;e<k;e++){const T=e<y?a[e]:255;t[_++]=T&128?p:d,t[_++]=T&64?p:d,t[_++]=T&32?p:d,t[_++]=T&16?p:d,t[_++]=T&8?p:d,t[_++]=T&4?p:d,t[_++]=T&2?p:d,t[_++]=T&1?p:d}if(v===0)continue;const b=e<y?a[e++]:255;for(let k=0;k<v;k++)t[_++]=b&1<<7-k?p:d}return{srcPos:e,destPos:_}}const iE=16,rE=100,$2=15,sE=10,oE=1e3,Un=16;function V2(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},a.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},a.transform=function(n,r,o,l,h,d){e.transform(n,r,o,l,h,d),this.__originalTransform(n,r,o,l,h,d)},a.setTransform=function(n,r,o,l,h,d){e.setTransform(n,r,o,l,h,d),this.__originalSetTransform(n,r,o,l,h,d)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(n){e.rotate(n),this.__originalRotate(n)},a.clip=function(n){e.clip(n),this.__originalClip(n)},a.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},a.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},a.bezierCurveTo=function(t,n,r,o,l,h){e.bezierCurveTo(t,n,r,o,l,h),this.__originalBezierCurveTo(t,n,r,o,l,h)},a.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class W2{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ep(a,e,t,n,r,o,l,h,d,p){const[g,v,y,_,S,b]=lt(a);if(v===0&&y===0){const P=l*g+S,L=Math.round(P),D=h*_+b,j=Math.round(D),G=(l+d)*g+S,V=Math.abs(Math.round(G)-L)||1,Y=(h+p)*_+b,J=Math.abs(Math.round(Y)-j)||1;return a.setTransform(Math.sign(g),0,0,Math.sign(_),L,j),a.drawImage(e,t,n,r,o,0,0,V,J),a.setTransform(g,v,y,_,S,b),[V,J]}if(g===0&&_===0){const P=h*y+S,L=Math.round(P),D=l*v+b,j=Math.round(D),G=(h+p)*y+S,V=Math.abs(Math.round(G)-L)||1,Y=(l+d)*v+b,J=Math.abs(Math.round(Y)-j)||1;return a.setTransform(0,Math.sign(v),Math.sign(y),0,L,j),a.drawImage(e,t,n,r,o,0,0,J,V),a.setTransform(g,v,y,_,S,b),[J,V]}a.drawImage(e,t,n,r,o,l,h,d,p);const k=Math.hypot(g,v),T=Math.hypot(y,_);return[k*d,T*p]}function G2(a){const{width:e,height:t}=a;if(e>oE||t>oE)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let l=new Uint8Array(o*(t+1)),h,d,p;const g=e+7&-8;let v=new Uint8Array(g*t),y=0;for(const T of a.data){let P=128;for(;P>0;)v[y++]=T&P?0:255,P>>=1}let _=0;for(y=0,v[y]!==0&&(l[0]=1,++_),d=1;d<e;d++)v[y]!==v[y+1]&&(l[d]=v[y]?2:1,++_),y++;for(v[y]!==0&&(l[d]=2,++_),h=1;h<t;h++){y=h*g,p=h*o,v[y-g]!==v[y]&&(l[p]=v[y]?1:8,++_);let T=(v[y]?4:0)+(v[y-g]?8:0);for(d=1;d<e;d++)T=(T>>2)+(v[y+1]?4:0)+(v[y-g+1]?8:0),r[T]&&(l[p+d]=r[T],++_),y++;if(v[y-g]!==v[y]&&(l[p+d]=v[y]?2:4,++_),_>n)return null}for(y=g*(t-1),p=h*o,v[y]!==0&&(l[p]=8,++_),d=1;d<e;d++)v[y]!==v[y+1]&&(l[p+d]=v[y]?4:8,++_),y++;if(v[y]!==0&&(l[p+d]=4,++_),_>n)return null;const S=new Int32Array([0,o,-1,0,-o,0,0,0,1]),b=new Path2D;for(h=0;_&&h<=t;h++){let T=h*o;const P=T+e;for(;T<P&&!l[T];)T++;if(T===P)continue;b.moveTo(T%o,h);const L=T;let D=l[T];do{const j=S[D];do T+=j;while(!l[T]);const G=l[T];G!==5&&G!==10?(D=G,l[T]=0):(D=G&51*D>>4,l[T]&=D>>2|D<<2),b.lineTo(T%o,T/o|0),l[T]||--_}while(L!==T);--h}return v=null,l=null,function(T){T.save(),T.scale(1/e,-1/t),T.translate(0,-t),T.fill(b),T.beginPath(),T.restore()}}class aE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=k1,this.textMatrixScale=1,this.fontMatrix=Ky,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=_e.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=_e.applyTransform(t,e),r=_e.applyTransform(t.slice(2),e),o=_e.applyTransform([t[0],t[3]],e),l=_e.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],r[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],r[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],r[1],o[1],l[1])}updateScalingPathMinMax(e,t){_e.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,o,l,h,d,p,g){const v=_e.bezierBoundingBox(t,n,r,o,l,h,d,p,g);g||this.updateRectMinMax(e,v)}getPathBoundingBox(e=un.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===un.STROKE){t||et("Stroke bounding box must include transform.");const r=_e.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,l=r[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const e=_e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=un.FILL,t=null){return _e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function lE(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Un,o=(t-r)/Un,l=r===0?o:o+1,h=a.createImageData(n,Un);let d=0,p;const g=e.data,v=h.data;let y,_,S,b;if(e.kind===Np.GRAYSCALE_1BPP){const k=g.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),P=T.length,L=n+7>>3,D=4294967295,j=An.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(S=y<o?Un:r,p=0,_=0;_<S;_++){const G=k-d;let V=0;const Y=G>L?n:G*8-7,J=Y&-8;let ue=0,ae=0;for(;V<J;V+=8)ae=g[d++],T[p++]=ae&128?D:j,T[p++]=ae&64?D:j,T[p++]=ae&32?D:j,T[p++]=ae&16?D:j,T[p++]=ae&8?D:j,T[p++]=ae&4?D:j,T[p++]=ae&2?D:j,T[p++]=ae&1?D:j;for(;V<Y;V++)ue===0&&(ae=g[d++],ue=128),T[p++]=ae&ue?D:j,ue>>=1}for(;p<P;)T[p++]=0;a.putImageData(h,0,y*Un)}}else if(e.kind===Np.RGBA_32BPP){for(_=0,b=n*Un*4,y=0;y<o;y++)v.set(g.subarray(d,d+b)),d+=b,a.putImageData(h,0,_),_+=Un;y<l&&(b=n*r*4,v.set(g.subarray(d,d+b)),a.putImageData(h,0,_))}else if(e.kind===Np.RGB_24BPP)for(S=Un,b=n*S,y=0;y<l;y++){for(y>=o&&(S=r,b=n*S),p=0,_=b;_--;)v[p++]=g[d++],v[p++]=g[d++],v[p++]=g[d++],v[p++]=255;a.putImageData(h,0,y*Un)}else throw new Error(`bad image kind: ${e.kind}`)}function cE(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Un,o=(t-r)/Un,l=r===0?o:o+1,h=a.createImageData(n,Un);let d=0;const p=e.data,g=h.data;for(let v=0;v<l;v++){const y=v<o?Un:r;({srcPos:d}=H2({src:p,srcPos:d,dest:g,width:n,height:y,nonBlackColor:0})),a.putImageData(h,0,v*Un)}}function eh(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)a[n]!==void 0&&(e[n]=a[n]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Cp(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!hn){const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}}function uE(a,e){if(e)return!0;const t=_e.singularValueDecompose2dScale(a);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ro.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const q2=["butt","round","square"],X2=["miter","round","bevel"],K2={},hE={};var qi,S0,b0,E0;const Gw=class Gw{constructor(e,t,n,r,o,{optionalContentConfig:l,markedContentStack:h=null},d,p){C(this,qi);this.ctx=e,this.current=new aE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new W2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...lt(this.compositeCtx))}this.ctx.save(),Cp(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=lt(this.ctx)}executeOperatorList(e,t,n,r){const o=e.argsArray,l=e.fnArray;let h=t||0;const d=o.length;if(d===h)return h;const p=d-h>sE&&typeof n=="function",g=p?Date.now()+$2:0;let v=0;const y=this.commonObjs,_=this.objs;let S;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(S=l[h],S!==Ri.dependency)this[S].apply(this,o[h]);else for(const b of o[h]){const k=b.startsWith("g_")?y:_;if(!k.has(b))return k.get(b,n),h}if(h++,h===d)return h;if(p&&++v>sE){if(Date.now()>g)return n(),h;v=0}}}endDrawing(){x(this,qi,S0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(this,qi,b0).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),h=n,d=r,p="prescale1",g,v;for(;o>2&&h>1||l>2&&d>1;){let y=h,_=d;o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/y),l>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/_),g=this.cachedCanvases.getCanvas(p,y,_),v=g.context,v.clearRect(0,0,y,_),v.drawImage(e,0,0,h,d,0,0,y,_),e=g.canvas,h=y,d=_,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,h=lt(t);let d,p,g,v;if((e.bitmap||e.data)&&e.count>1){const Y=e.bitmap||e.data.buffer;p=JSON.stringify(l?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(Y),d||(d=new Map,this._cachedBitmapsMap.set(Y,d));const J=d.get(p);if(J&&!l){const ue=Math.round(Math.min(h[0],h[2])+h[4]),ae=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:J,offsetX:ue,offsetY:ae}}g=J}g||(v=this.cachedCanvases.getCanvas("maskCanvas",n,r),cE(v.context,e));let y=_e.transform(h,[1/n,0,0,-1/r,0,0]);y=_e.transform(y,[1,0,0,1,0,-r]);const[_,S,b,k]=_e.getAxialAlignedBoundingBox([0,0,n,r],y),T=Math.round(b-_)||1,P=Math.round(k-S)||1,L=this.cachedCanvases.getCanvas("fillCanvas",T,P),D=L.context,j=_,G=S;D.translate(-j,-G),D.transform(...y),g||(g=this._scaleImage(v.canvas,er(D)),g=g.img,d&&l&&d.set(p,g)),D.imageSmoothingEnabled=uE(lt(D),e.interpolate),Ep(D,g,0,0,g.width,g.height,0,0,n,r),D.globalCompositeOperation="source-in";const V=_e.transform(er(D),[1,0,0,1,-j,-G]);return D.fillStyle=l?o.getPattern(t,this,V,un.FILL):o,D.fillRect(0,0,n,r),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,L.canvas)),{canvas:L.canvas,offsetX:Math.round(j),offsetY:Math.round(G)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=q2[e]}setLineJoin(e){this.ctx.lineJoin=X2[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...lt(this.suspendedCtx)),eh(this.suspendedCtx,o),V2(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),eh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const o=r[0],l=r[1],h=r[2]-o,d=r[3]-l;h===0||d===0||(this.genericComposeSMask(t.context,n,h,d,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,l,h,d,p,g,v){let y=e.canvas,_=d-g,S=p-v;if(l){const k=_e.makeHexColor(...l);if(_<0||S<0||_+n>y.width||S+r>y.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),P=T.context;P.drawImage(y,-_,-S),P.globalCompositeOperation="destination-atop",P.fillStyle=k,P.fillRect(0,0,n,r),P.globalCompositeOperation="source-over",y=T.canvas,_=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(_,S,n,r),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=k,e.fillRect(_,S,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const b=new Path2D;b.rect(d,p,n,r),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(y,_,S,n,r,d,p,n,r),t.restore()}save(){this.inSMaskMode?(eh(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),eh(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,o,l){this.ctx.transform(e,t,n,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,o=this.current;let l=o.x,h=o.y,d,p;const g=lt(r),v=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,y=v?n.slice(0):null;for(let _=0,S=0,b=e.length;_<b;_++)switch(e[_]|0){case Ri.rectangle:l=t[S++],h=t[S++];const k=t[S++],T=t[S++],P=l+k,L=h+T;r.moveTo(l,h),k===0||T===0?r.lineTo(P,L):(r.lineTo(P,h),r.lineTo(P,L),r.lineTo(l,L)),v||o.updateRectMinMax(g,[l,h,P,L]),r.closePath();break;case Ri.moveTo:l=t[S++],h=t[S++],r.moveTo(l,h),v||o.updatePathMinMax(g,l,h);break;case Ri.lineTo:l=t[S++],h=t[S++],r.lineTo(l,h),v||o.updatePathMinMax(g,l,h);break;case Ri.curveTo:d=l,p=h,l=t[S+4],h=t[S+5],r.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],l,h),o.updateCurvePathMinMax(g,d,p,t[S],t[S+1],t[S+2],t[S+3],l,h,y),S+=6;break;case Ri.curveTo2:d=l,p=h,r.bezierCurveTo(l,h,t[S],t[S+1],t[S+2],t[S+3]),o.updateCurvePathMinMax(g,d,p,l,h,t[S],t[S+1],t[S+2],t[S+3],y),l=t[S+2],h=t[S+3],S+=4;break;case Ri.curveTo3:d=l,p=h,l=t[S+2],h=t[S+3],r.bezierCurveTo(t[S],t[S+1],l,h,l,h),o.updateCurvePathMinMax(g,d,p,t[S],t[S+1],l,h,l,h,y),S+=4;break;case Ri.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(g,y),o.setCurrentPoint(l,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,er(t),un.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,er(t),un.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K2}eoClip(){this.pendingClip=hE}beginText(){this.current.textMatrix=k1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:o,x:l,y:h,fontSize:d,path:p}of e)n.addPath(p,new DOMMatrix(o).preMultiplySelf(r).translate(l,h).scale(d,-d));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||Ky,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&De("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const d=n.italic?"italic":"normal";let p=t;t<iE?p=iE:t>rE&&(p=rE),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${h} ${p}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,o,l){this.current.textMatrix=[e,t,n,r,o,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,o){const l=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,v=p&nn.FILL_STROKE_MASK,y=!!(p&nn.ADD_TO_PATH_FLAG),_=h.patternFill&&!d.missingFile,S=h.patternStroke&&!d.missingFile;let b;if((d.disableFontFace||y||_||S)&&(b=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||_||S){if(l.save(),l.translate(t,n),l.scale(g,-g),v===nn.FILL||v===nn.FILL_STROKE)if(r){const k=l.getTransform();l.setTransform(...r),l.fill(x(this,qi,E0).call(this,b,k,r))}else l.fill(b);if(v===nn.STROKE||v===nn.FILL_STROKE)if(o){const k=l.getTransform();l.setTransform(...o),l.stroke(x(this,qi,E0).call(this,b,k,o))}else l.lineWidth/=g,l.stroke(b);l.restore()}else(v===nn.FILL||v===nn.FILL_STROKE)&&l.fillText(e,t,n),(v===nn.STROKE||v===nn.FILL_STROKE)&&l.strokeText(e,t,n);y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:lt(l),x:t,y:n,fontSize:g,path:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Be(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,l=t.fontSizeScale,h=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,v=e.length,y=n.vertical,_=y?1:-1,S=n.defaultVMetrics,b=r*t.fontMatrix[0],k=t.textRenderingMode===nn.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(g,-1):o.scale(g,1);let T,P;if(t.patternFill){o.save();const V=t.fillColor.getPattern(o,this,er(o),un.FILL);T=lt(o),o.restore(),o.fillStyle=V}if(t.patternStroke){o.save();const V=t.strokeColor.getPattern(o,this,er(o),un.STROKE);P=lt(o),o.restore(),o.strokeStyle=V}let L=t.lineWidth;const D=t.textMatrixScale;if(D===0||L===0){const V=t.textRenderingMode&nn.FILL_STROKE_MASK;(V===nn.STROKE||V===nn.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=D;if(l!==1&&(o.scale(l,l),L/=l),o.lineWidth=L,n.isInvalidPDFjsFont){const V=[];let Y=0;for(const J of e)V.push(J.unicode),Y+=J.width;o.fillText(V.join(""),0,0),t.x+=Y*b*g,o.restore(),this.compose();return}let j=0,G;for(G=0;G<v;++G){const V=e[G];if(typeof V=="number"){j+=_*V*r/1e3;continue}let Y=!1;const J=(V.isSpace?d:0)+h,ue=V.fontChar,ae=V.accent;let Me,Te,Ae=V.width;if(y){const te=V.vmetric||S,ie=-(V.vmetric?te[1]:Ae*.5)*b,Z=te[2]*b;Ae=te?-te[0]:Ae,Me=ie/l,Te=(j+Z)/l}else Me=j/l,Te=0;if(n.remeasure&&Ae>0){const te=o.measureText(ue).width*1e3/r*l;if(Ae<te&&this.isFontSubpixelAAEnabled){const ie=Ae/te;Y=!0,o.save(),o.scale(ie,1),Me/=ie}else Ae!==te&&(Me+=(Ae-te)/2e3*r/l)}if(this.contentVisible&&(V.isInFont||n.missingFile)){if(k&&!ae)o.fillText(ue,Me,Te);else if(this.paintChar(ue,Me,Te,T,P),ae){const te=Me+r*ae.offset.x/l,ie=Te-r*ae.offset.y/l;this.paintChar(ae.fontChar,te,ie,T,P)}}const ze=y?Ae*b-J*p:Ae*b+J*p;j+=ze,Y&&o.restore()}y?t.y-=j:t.x+=j*g,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,o=n.fontSize,l=n.fontDirection,h=r.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,g=n.textHScale*l,v=n.fontMatrix||Ky,y=e.length,_=n.textRenderingMode===nn.INVISIBLE;let S,b,k,T;if(!(_||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(g,l),S=0;S<y;++S){if(b=e[S],typeof b=="number"){T=h*b*o/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const P=(b.isSpace?p:0)+d,L=r.charProcOperatorList[b.operatorListId];if(!L){De(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(o,o),t.transform(...v),this.executeOperatorList(L),this.restore()),k=_e.applyTransform([b.width,0],v)[0]*o+P,t.translate(k,0),n.x+=k*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,o,l){this.ctx.rect(n,r,o-n,l-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||lt(this.ctx),o={createCanvasGraphics:l=>new Gw(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new A0(e,n,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=_e.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=_e.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=z2(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,er(t),un.SHADING);const r=er(t);if(r){const{width:o,height:l}=t.canvas,[h,d,p,g]=_e.getAxialAlignedBoundingBox([0,0,o,l],r);this.ctx.fillRect(h,d,p-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){et("Should not call beginInlineImage")}beginImageData(){et("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=lt(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(lt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Zg("TODO: Support non-isolated groups."),e.knockout&&De("Knockout groups not supported.");const n=lt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=_e.getAxialAlignedBoundingBox(e.bbox,lt(t));const o=[0,0,t.canvas.width,t.canvas.height];r=_e.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),h=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-l,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,d,p),y=v.context;y.translate(-l,-h),y.transform(...n),e.smask?this.smaskStack.push({canvas:v.canvas,context:y,offsetX:l,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,h),t.save()),eh(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=lt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=_e.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,r,o){if(x(this,qi,S0).call(this),Cp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],h=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=h;const[d,p]=_e.singularValueDecompose2dScale(lt(this.ctx)),{viewportScale:g}=this,v=Math.ceil(l*this.outputScaleX*g),y=Math.ceil(h*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(v,y);const{canvas:_,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,h*p),Cp(this.ctx)}else Cp(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new aE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,qi,b0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=G2(e)),r.compiled)){r.compiled(n);return}const o=this._createMaskCanvas(e),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,o,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const d=lt(h);h.transform(t,n,r,o,0,0);const p=this._createMaskCanvas(e);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,v=l.length;g<v;g+=2){const y=_e.transform(d,[t,n,r,o,l[g],l[g+1]]),[_,S]=_e.applyTransform([0,0],y);h.drawImage(p.canvas,_,S)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:l,width:h,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),v=g.context;v.save();const y=this.getObject(l,o);cE(v,y),v.globalCompositeOperation="source-in",v.fillStyle=r?n.getPattern(v,this,er(t),un.FILL):n,v.fillRect(0,0,h,d),v.restore(),t.save(),t.transform(...p),t.scale(1,-1),Ep(t,g.canvas,0,0,h,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){De("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){De("Dependent image isn't ready yet");return}const l=o.width,h=o.height,d=[];for(let p=0,g=r.length;p<g;p+=2)d.push({transform:[t,0,0,n,r[p],r[p+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!hn){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;lE(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,er(r));r.imageSmoothingEnabled=uE(lt(r),e.interpolate),Ep(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;lE(d,e),r=this.applyTransferMapsToCanvas(d)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),Ep(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===hE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=lt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform();let l,h;if(n===0&&r===0){const d=Math.abs(t),p=Math.abs(o);if(d===p)if(e===0)l=h=1/d;else{const g=d*e;l=h=g<1?1/g:1}else if(e===0)l=1/d,h=1/p;else{const g=d*e,v=p*e;l=g<1?1/g:1,h=v<1?1/v:1}}else{const d=Math.abs(t*o-n*r),p=Math.hypot(t,n),g=Math.hypot(r,o);if(e===0)l=g/d,h=p/d;else{const v=e*d;l=g>v?g/v:1,h=p>v?p/v:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&o===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(r,o),l.length>0){const h=Math.max(r,o);t.setLineDash(l.map(d=>d/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};qi=new WeakSet,S0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},b0=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},E0=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let Yl=Gw;for(const a in Ri)Yl.prototype[a]!==void 0&&(Yl.prototype[Ri[a]]=Yl.prototype[a]);var id,rd;class us{static get workerPort(){return c(this,id)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,id,e)}static get workerSrc(){return c(this,rd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,rd,e)}}id=new WeakMap,rd=new WeakMap,C(us,id,null),C(us,rd,"");var ba,sd;class Y2{constructor({parsedData:e,rawData:t}){C(this,ba);C(this,sd);A(this,ba,e),A(this,sd,t)}getRaw(){return c(this,sd)}get(e){return c(this,ba).get(e)??null}getAll(){return Nw(c(this,ba))}has(e){return c(this,ba).has(e)}}ba=new WeakMap,sd=new WeakMap;const jl=Symbol("INTERNAL");var od,ad,ld,gc;class Q2{constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){C(this,od,!1);C(this,ad,!1);C(this,ld,!1);C(this,gc,!0);A(this,od,!!(e&ti.DISPLAY)),A(this,ad,!!(e&ti.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(c(this,ld))return c(this,gc);if(!c(this,gc))return!1;const{print:e,view:t}=this.usage;return c(this,od)?(t==null?void 0:t.viewState)!=="OFF":c(this,ad)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==jl&&et("Internal method `_setVisible` called."),A(this,ld,n),A(this,gc,t)}}od=new WeakMap,ad=new WeakMap,ld=new WeakMap,gc=new WeakMap;var oo,Ke,mc,vc,cd,C0;class J2{constructor(e,t=ti.DISPLAY){C(this,cd);C(this,oo,null);C(this,Ke,new Map);C(this,mc,null);C(this,vc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,vc,e.order);for(const n of e.groups)c(this,Ke).set(n.id,new Q2(t,n));if(e.baseState==="OFF")for(const n of c(this,Ke).values())n._setVisible(jl,!1);for(const n of e.on)c(this,Ke).get(n)._setVisible(jl,!0);for(const n of e.off)c(this,Ke).get(n)._setVisible(jl,!1);A(this,mc,this.getHash())}}isVisible(e){if(c(this,Ke).size===0)return!0;if(!e)return Zg("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Ke).has(e.id)?c(this,Ke).get(e.id).visible:(De(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return x(this,cd,C0).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Ke).has(t))return De(`Optional content group not found: ${t}`),!0;if(c(this,Ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Ke).has(t))return De(`Optional content group not found: ${t}`),!0;if(!c(this,Ke).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Ke).has(t))return De(`Optional content group not found: ${t}`),!0;if(!c(this,Ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Ke).has(t))return De(`Optional content group not found: ${t}`),!0;if(c(this,Ke).get(t).visible)return!1}return!0}return De(`Unknown optional content policy ${e.policy}.`),!0}return De(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var o;const r=c(this,Ke).get(e);if(!r){De(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const l of r.rbGroups)for(const h of l)h!==e&&((o=c(this,Ke).get(h))==null||o._setVisible(jl,!1,!0));r._setVisible(jl,!!t,!0),A(this,oo,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=c(this,Ke).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}A(this,oo,null)}get hasInitialVisibility(){return c(this,mc)===null||this.getHash()===c(this,mc)}getOrder(){return c(this,Ke).size?c(this,vc)?c(this,vc).slice():[...c(this,Ke).keys()]:null}getGroups(){return c(this,Ke).size>0?Nw(c(this,Ke)):null}getGroup(e){return c(this,Ke).get(e)||null}getHash(){if(c(this,oo)!==null)return c(this,oo);const e=new rC;for(const[t,n]of c(this,Ke))e.update(`${t}:${n.visible}`);return A(this,oo,e.hexdigest())}}oo=new WeakMap,Ke=new WeakMap,mc=new WeakMap,vc=new WeakMap,cd=new WeakSet,C0=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const o=e[r];let l;if(Array.isArray(o))l=x(this,cd,C0).call(this,o);else if(c(this,Ke).has(o))l=c(this,Ke).get(o).visible;else return De(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class Z2{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Ct(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,o;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new eN(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new tN(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class eN{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Fw(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tN{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function nN(a){let e=!0,t=n("filename\\*","i").exec(a);if(t){t=t[1];let g=h(t);return g=unescape(g),g=d(g),g=p(g),o(g)}if(t=l(a),t){const g=p(t);return o(g)}if(t=n("filename","i").exec(a),t){t=t[1];let g=h(t);return g=p(g),o(g)}function n(g,v){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(g,v){if(g){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const y=new TextDecoder(g,{fatal:!0}),_=em(v);v=y.decode(_),e=!1}catch{}}return v}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),e&&(g=r("iso-8859-1",g))),g}function l(g){const v=[];let y;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=_.exec(g))!==null;){let[,b,k,T]=y;if(b=parseInt(b,10),b in v){if(b===0)break;continue}v[b]=[k,T]}const S=[];for(let b=0;b<v.length&&b in v;++b){let[k,T]=v[b];T=h(T),k&&(T=unescape(T),b===0&&(T=d(T))),S.push(T)}return S.join("")}function h(g){if(g.startsWith('"')){const v=g.slice(1).split('\\"');for(let y=0;y<v.length;++y){const _=v[y].indexOf('"');_!==-1&&(v[y]=v[y].slice(0,_),v.length=y+1),v[y]=v[y].replaceAll(/\\(.)/g,"$1")}g=v.join('"')}return g}function d(g){const v=g.indexOf("'");if(v===-1)return g;const y=g.slice(0,v),S=g.slice(v+1).replace(/^[^']*'/,"");return r(y,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,y,_,S){if(_==="q"||_==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,k){return String.fromCharCode(parseInt(k,16))}),r(y,S);try{S=atob(S)}catch{}return r(y,S)})}return""}function yC(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function im(a){try{return new URL(a).origin}catch{}return null}function wC({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function _C(a){const e=a.get("Content-Disposition");if(e){let t=nN(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Fw(t))return t}return null}function rm(a,e){return a===404||a===0&&e.startsWith("file:")?new xh('Missing PDF "'+e+'".'):new yg(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a)}function AC(a){return a===200||a===206}function SC(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function bC(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(De(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class dE{constructor(e){xe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new iN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new rN(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class iN{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,SC(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=im(o.url),!AC(o.status))throw rm(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=wC({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=_C(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Io("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:bC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class rN{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=r.url;fetch(l,SC(o,this._withCredentials,this._abortController)).then(h=>{const d=im(h.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!AC(h.status))throw rm(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:bC(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Fy=200,Uy=206;function sN(a){const e=a.response;return typeof e!="string"?e:em(e).buffer}class oN{constructor({url:e,httpHeaders:t,withCredentials:n}){xe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yC(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Uy):r.expectedStatus=Fy,t.responseType="arraybuffer",Ct(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||Fy;if(!(o===Fy&&n.expectedStatus===Uy)&&o!==n.expectedStatus){n.onError(r.status);return}const h=sN(r);if(o===Uy){const d=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?n.onDone({begin:parseInt(p[1],10),chunk:h}):(De('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class aN{constructor(e){this._source=e,this._manager=new oN(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lN(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new cN(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class lN{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=im(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...p]=h.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=wC({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=_C(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=rm(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cN{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=im((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=rm(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uN=/^[a-z][a-z0-9\-+.]+:/i;function hN(a){if(uN.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class dN{constructor(e){this.source=e,this.url=hN(e.url),Ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new pN(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class fN{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new xh(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Io("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pN{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const gN=1e5,Ln=30,mN=.8;var mE,ao,On,ud,hd,Ea,qr,dd,fd,Ca,yc,wc,lo,_c,pd,Ac,xa,gd,md,ka,Ta,vd,co,Sc,_s,EC,CC,x0,ri,Wp,k0,xC,kC;const Rt=class Rt{constructor({textContentSource:e,container:t,viewport:n}){C(this,_s);C(this,ao,Promise.withResolvers());C(this,On,null);C(this,ud,!1);C(this,hd,!!((mE=globalThis.FontInspector)!=null&&mE.enabled));C(this,Ea,null);C(this,qr,null);C(this,dd,0);C(this,fd,0);C(this,Ca,null);C(this,yc,null);C(this,wc,0);C(this,lo,0);C(this,_c,Object.create(null));C(this,pd,[]);C(this,Ac,null);C(this,xa,[]);C(this,gd,new WeakMap);C(this,md,null);var d;if(e instanceof ReadableStream)A(this,Ac,e);else if(typeof e=="object")A(this,Ac,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,On,A(this,yc,t)),A(this,lo,n.scale*(globalThis.devicePixelRatio||1)),A(this,wc,n.rotation),A(this,qr,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:l,pageY:h}=n.rawDims;A(this,md,[1,0,0,-1,-l,h+o]),A(this,fd,r),A(this,dd,o),x(d=Rt,ri,xC).call(d),ol(t,n),c(this,ao).promise.finally(()=>{c(Rt,Sc).delete(this),A(this,qr,null),A(this,_c,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=An.platform;return Be(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Ca).read().then(({value:t,done:n})=>{if(n){c(this,ao).resolve();return}c(this,Ea)??A(this,Ea,t.lang),Object.assign(c(this,_c),t.styles),x(this,_s,EC).call(this,t.items),e()},c(this,ao).reject)};return A(this,Ca,c(this,Ac).getReader()),c(Rt,Sc).add(this),e(),c(this,ao).promise}update({viewport:e,onBefore:t=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==c(this,wc)&&(t==null||t(),A(this,wc,r),ol(c(this,yc),{rotation:r})),n!==c(this,lo)){t==null||t(),A(this,lo,n);const l={div:null,properties:null,ctx:x(o=Rt,ri,Wp).call(o,c(this,Ea))};for(const h of c(this,xa))l.properties=c(this,gd).get(h),l.div=h,x(this,_s,x0).call(this,l)}}cancel(){var t;const e=new Io("TextLayer task cancelled.");(t=c(this,Ca))==null||t.cancel(e).catch(()=>{}),A(this,Ca,null),c(this,ao).reject(e)}get textDivs(){return c(this,xa)}get textContentItemsStr(){return c(this,pd)}static cleanup(){if(!(c(this,Sc).size>0)){c(this,ka).clear();for(const{canvas:e}of c(this,Ta).values())e.remove();c(this,Ta).clear()}}};ao=new WeakMap,On=new WeakMap,ud=new WeakMap,hd=new WeakMap,Ea=new WeakMap,qr=new WeakMap,dd=new WeakMap,fd=new WeakMap,Ca=new WeakMap,yc=new WeakMap,wc=new WeakMap,lo=new WeakMap,_c=new WeakMap,pd=new WeakMap,Ac=new WeakMap,xa=new WeakMap,gd=new WeakMap,md=new WeakMap,ka=new WeakMap,Ta=new WeakMap,vd=new WeakMap,co=new WeakMap,Sc=new WeakMap,_s=new WeakSet,EC=function(e){var r,o;if(c(this,ud))return;(o=c(this,qr)).ctx??(o.ctx=x(r=Rt,ri,Wp).call(r,c(this,Ea)));const t=c(this,xa),n=c(this,pd);for(const l of e){if(t.length>gN){De("Ignoring additional textDivs for performance reasons."),A(this,ud,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const h=c(this,On);A(this,On,document.createElement("span")),c(this,On).classList.add("markedContent"),l.id!==null&&c(this,On).setAttribute("id",`${l.id}`),h.append(c(this,On))}else l.type==="endMarkedContent"&&A(this,On,c(this,On).parentNode);continue}n.push(l.str),x(this,_s,CC).call(this,l)}},CC=function(e){var b;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,xa).push(t);const r=_e.transform(c(this,md),e.transform);let o=Math.atan2(r[1],r[0]);const l=c(this,_c)[e.fontName];l.vertical&&(o+=Math.PI/2);let h=c(this,hd)&&l.fontSubstitution||l.fontFamily;h=Rt.fontFamilyMap.get(h)||h;const d=Math.hypot(r[2],r[3]),p=d*x(b=Rt,ri,kC).call(b,h,c(this,Ea));let g,v;o===0?(g=r[4],v=r[5]-p):(g=r[4]+p*Math.sin(o),v=r[5]-p*Math.cos(o));const y="calc(var(--scale-factor)*",_=t.style;c(this,On)===c(this,yc)?(_.left=`${(100*g/c(this,fd)).toFixed(2)}%`,_.top=`${(100*v/c(this,dd)).toFixed(2)}%`):(_.left=`${y}${g.toFixed(2)}px)`,_.top=`${y}${v.toFixed(2)}px)`),_.fontSize=`${y}${(c(Rt,co)*d).toFixed(2)}px)`,_.fontFamily=h,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,hd)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const k=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?e.height:e.width),c(this,gd).set(t,n),c(this,qr).div=t,c(this,qr).properties=n,x(this,_s,x0).call(this,c(this,qr)),n.hasText&&c(this,On).append(t),n.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),c(this,On).append(k)}},x0=function(e){var h;const{div:t,properties:n,ctx:r}=e,{style:o}=t;let l="";if(c(Rt,co)>1&&(l=`scale(${1/c(Rt,co)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:p,fontSize:g}=n;x(h=Rt,ri,k0).call(h,r,g*c(this,lo),d);const{width:v}=r.measureText(t.textContent);v>0&&(l=`scaleX(${p*c(this,lo)/v}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)},ri=new WeakSet,Wp=function(e=null){let t=c(this,Ta).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Ta).set(e,t),c(this,vd).set(t,{size:0,family:""})}return t},k0=function(e,t,n){const r=c(this,vd).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},xC=function(){if(c(this,co)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,co,e.getBoundingClientRect().height),e.remove()},kC=function(e,t){const n=c(this,ka).get(e);if(n)return n;const r=x(this,ri,Wp).call(this,t);r.canvas.width=r.canvas.height=Ln,x(this,ri,k0).call(this,r,Ln,e);const o=r.measureText("");let l=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);if(l){const g=l/(l+h);return c(this,ka).set(e,g),r.canvas.width=r.canvas.height=0,g}r.strokeStyle="red",r.clearRect(0,0,Ln,Ln),r.strokeText("g",0,0);let d=r.getImageData(0,0,Ln,Ln).data;h=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){h=Math.ceil(g/4/Ln);break}r.clearRect(0,0,Ln,Ln),r.strokeText("A",0,Ln),d=r.getImageData(0,0,Ln,Ln).data,l=0;for(let g=0,v=d.length;g<v;g+=4)if(d[g]>0){l=Ln-Math.floor(g/4/Ln);break}r.canvas.width=r.canvas.height=0;const p=l?l/(l+h):mN;return c(this,ka).set(e,p),p},C(Rt,ri),C(Rt,ka,new Map),C(Rt,Ta,new Map),C(Rt,vd,new WeakMap),C(Rt,co,null),C(Rt,Sc,new Set);let kh=Rt;class Th{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(o){var d;if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(Th.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const p of o.children)r(p)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const vN=65536,yN=100,wN=5e3,_N=hn?N2:P2,AN=hn?D2:dC,SN=hn?M2:L2,bN=hn?O2:mC;function EN(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new T0,{docId:t}=e,n=a.url?CN(a.url):null,r=a.data?xN(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,h=a.password??null,d=a.range instanceof TC?a.range:null,p=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:vN;let g=a.worker instanceof Ql?a.worker:null;const v=a.verbosity,y=typeof a.docBaseUrl=="string"&&!nm(a.docBaseUrl)?a.docBaseUrl:null,_=typeof a.cMapUrl=="string"?a.cMapUrl:null,S=a.cMapPacked!==!1,b=a.CMapReaderFactory||AN,k=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,T=a.StandardFontDataFactory||bN,P=a.stopAtErrors!==!0,L=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,D=a.isEvalSupported!==!1,j=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!hn,G=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!hn&&(An.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,Y=typeof a.disableFontFace=="boolean"?a.disableFontFace:hn,J=a.fontExtraProperties===!0,ue=a.enableXfa===!0,ae=a.ownerDocument||globalThis.document,Me=a.disableRange===!0,Te=a.disableStream===!0,Ae=a.disableAutoFetch===!0,ze=a.pdfBug===!0,te=a.CanvasFactory||_N,ie=a.FilterFactory||SN,Z=a.enableHWA===!0,U=d?d.length:a.length??NaN,N=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!hn&&!Y,I=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:b===dC&&T===mC&&_&&k&&ih(_,document.baseURI)&&ih(k,document.baseURI),F=null;c2(v);const q={canvasFactory:new te({ownerDocument:ae,enableHWA:Z}),filterFactory:new ie({docId:t,ownerDocument:ae}),cMapReaderFactory:I?null:new b({baseUrl:_,isCompressed:S}),standardFontDataFactory:I?null:new T({baseUrl:k})};if(!g){const fe={verbosity:v,port:us.workerPort};g=fe.port?Ql.fromPort(fe):new Ql(fe),e._worker=g}const ne={docId:t,apiVersion:"4.10.38",data:r,password:h,disableAutoFetch:Ae,rangeChunkSize:p,length:U,docBaseUrl:y,enableXfa:ue,evaluatorOptions:{maxImageSize:L,disableFontFace:Y,ignoreErrors:P,isEvalSupported:D,isOffscreenCanvasSupported:j,isImageDecoderSupported:G,canvasMaxAreaInBytes:V,fontExtraProperties:J,useSystemFonts:N,cMapUrl:I?_:null,standardFontDataUrl:I?k:null}},ge={disableFontFace:Y,fontExtraProperties:J,ownerDocument:ae,pdfBug:ze,styleElement:F,loadingParams:{disableAutoFetch:Ae,enableXfa:ue}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const fe=g.messageHandler.sendWithPromise("GetDocRequest",ne,r?[r.buffer]:null);let le;if(d)le=new Z2(d,{disableRange:Me,disableStream:Te});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Se;if(hn)if(ih(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Se=dE}else Se=dN;else Se=ih(n)?dE:aN;le=new Se({url:n,length:U,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:Me,disableStream:Te})}return fe.then(Se=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ce=new ah(t,Se,g.port),be=new RN(ce,e,le,ge,q);e._transport=be,ce.send("Ready",null)})}).catch(e._capability.reject),e}function CN(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(hn&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function xN(a){if(hn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return em(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function fE(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var Ng;const Dg=class Dg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${gn(Dg,Ng)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Ng=new WeakMap,C(Dg,Ng,0);let T0=Dg;class TC{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){et("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class kN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var uo,Xr,wi,zl,Gp;class TN{constructor(e,t,n,r=!1){C(this,wi);C(this,uo,null);C(this,Xr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Zb:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new IC,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new cf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=qs.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1}){var D,j;(D=this._stats)==null||D.time("Overall");const y=this._transport.getRenderingIntent(n,r,g,v),{renderingIntent:_,cacheKey:S}=y;A(this,Xr,!1),x(this,wi,Gp).call(this),h||(h=this._transport.getOptionalContentConfig(_));let b=this._intentStates.get(S);b||(b=Object.create(null),this._intentStates.set(S,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const k=!!(_&ti.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(y));const T=G=>{var V;b.renderTasks.delete(P),(this._maybeCleanupAfterRender||k)&&A(this,Xr,!0),x(this,wi,zl).call(this,!k),G?(P.capability.reject(G),this._abortOperatorList({intentState:b,reason:G instanceof Error?G:new Error(G)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new R0({callback:T,params:{canvasContext:e,viewport:t,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(b.renderTasks||(b.renderTasks=new Set)).add(P);const L=P.task;return Promise.all([b.displayReadyCapability.promise,h]).then(([G,V])=>{var Y;if(this.destroyed){T();return}if((Y=this._stats)==null||Y.time("Rendering"),!(V.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:G,optionalContentConfig:V}),P.operatorListChanged()}).catch(T),L}getOperatorList({intent:e="display",annotationMode:t=qs.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,r,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Th.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:p}){if(p){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},r)}const l=t.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),A(this,Xr,!1),x(this,wi,Gp).call(this),Promise.all(e)}cleanup(e=!1){A(this,Xr,!0);const t=x(this,wi,zl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Zb),t}_startRenderPage(e,t){var r,o;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&x(this,wi,zl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},l).getReader(),p=this._intentStates.get(t);p.streamReader=d;const g=()=>{d.read().then(({value:v,done:y})=>{if(y){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),g())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const y of p.renderTasks)y.operatorListChanged();x(this,wi,zl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};g()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Ow){let r=yN;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Io(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}uo=new WeakMap,Xr=new WeakMap,wi=new WeakSet,zl=function(e=!1){if(x(this,wi,Gp).call(this),!c(this,Xr)||this.destroyed)return!1;if(e)return A(this,uo,setTimeout(()=>{A(this,uo,null),x(this,wi,zl).call(this,!1)},wN)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Xr,!1),!0},Gp=function(){c(this,uo)&&(clearTimeout(c(this,uo)),A(this,uo,null))};var Kr,Og;class IN{constructor(){C(this,Kr,new Map);C(this,Og,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,Og).then(()=>{for(const[r]of c(this,Kr))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){De("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}c(this,Kr).set(t,r)}removeEventListener(e,t){const n=c(this,Kr).get(t);n==null||n(),c(this,Kr).delete(t)}terminate(){for(const[,e]of c(this,Kr))e==null||e();c(this,Kr).clear()}}Kr=new WeakMap,Og=new WeakMap;var Fg,Ia,Ra,bc,qp,Ec,Xp;const at=class at{constructor({name:e=null,port:t=null,verbosity:n=u2()}={}){C(this,bc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=c(at,Ra))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(at,Ra)||A(at,Ra,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ah("main","worker",e),this._messageHandler.on("ready",function(){}),x(this,bc,qp).call(this)}_initialize(){if(c(at,Ia)||c(at,Ec,Xp)){this._setupFakeWorker();return}let{workerSrc:e}=at;try{at._isSameOrigin(window.location.href,e)||(e=at._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ah("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,x(this,bc,qp).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};l();return}catch{Zg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(at,Ia)||(De("Setting up fake worker."),A(at,Ia,!0)),at._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new IN;this._port=t;const n=`fake${gn(at,Fg)._++}`,r=new ah(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new ah(n,n+"_worker",t),x(this,bc,qp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=c(at,Ra))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=c(this,Ra))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new at(e)}static get workerSrc(){if(us.workerSrc)return us.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Be(this,"_setupFakeWorkerGlobal",(async()=>c(this,Ec,Xp)?c(this,Ec,Xp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Fg=new WeakMap,Ia=new WeakMap,Ra=new WeakMap,bc=new WeakSet,qp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ec=new WeakSet,Xp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(at,Ec),C(at,Fg,0),C(at,Ia,!1),C(at,Ra),hn&&(A(at,Ia,!0),us.workerSrc||(us.workerSrc="./pdf.worker.mjs")),at._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},at._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ql=at;var Yr,dr,Cc,xc,Qr,Pa,dh;class RN{constructor(e,t,n,r,o){C(this,Pa);C(this,Yr,new Map);C(this,dr,new Map);C(this,Cc,new Map);C(this,xc,new Map);C(this,Qr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new IC,this.fontLoader=new I2({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Be(this,"annotationStorage",new jw)}getRenderingIntent(e,t=qs.ENABLE,n=null,r=!1,o=!1){let l=ti.DISPLAY,h=v0;switch(e){case"any":l=ti.ANY;break;case"display":break;case"print":l=ti.PRINT;break;default:De(`getRenderingIntent - invalid intent: ${e}`)}const d=l&ti.PRINT&&n instanceof oC?n:this.annotationStorage;switch(t){case qs.DISABLE:l+=ti.ANNOTATIONS_DISABLE;break;case qs.ENABLE:break;case qs.ENABLE_FORMS:l+=ti.ANNOTATIONS_FORMS;break;case qs.ENABLE_STORAGE:l+=ti.ANNOTATIONS_STORAGE,h=d.serializable;break;default:De(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(l+=ti.IS_EDITING),o&&(l+=ti.OPLIST);const{ids:p,hash:g}=d.modifiedIds,v=[l,h.hash,g];return{renderingIntent:l,cacheKey:v.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,Qr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,dr).values())e.push(r._destroy());c(this,dr).clear(),c(this,Cc).clear(),c(this,xc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Yr).clear(),this.filterFactory.destroy(),kh.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Io("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Ct(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((h=t.onProgress)==null||h.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,r)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){r.close();return}Ct(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new kN(n,this))}),e.on("DocException",n=>{t._capability.reject(Mn(n))}),e.on("PasswordRequest",n=>{A(this,Qr,Promise.withResolvers());try{if(!t.onPassword)throw Mn(n);const r=o=>{o instanceof Error?c(this,Qr).reject(o):c(this,Qr).resolve({password:o})};t.onPassword(r,n.code)}catch(r){c(this,Qr).reject(r)}return c(this,Qr).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,dr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:h,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in o){const _=o.error;De(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const g=p&&((l=globalThis.FontInspector)!=null&&l.enabled)?(_,S)=>globalThis.FontInspector.fontAdded(_,S):null,v=new R2(o,{disableFontFace:h,fontExtraProperties:d,inspectFont:g});this.fontLoader.bind(v).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&v.data&&(v.data=null),this.commonObjs.resolve(n,v)});break;case"CopyLocalImage":const{imageRef:y}=o;Ct(y,"The imageRef must be defined.");for(const _ of c(this,dr).values())for(const[,S]of _.objs)if((S==null?void 0:S.ref)===y)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,l])=>{var d;if(this.destroyed)return;const h=c(this,dr).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(o){case"Image":h.objs.resolve(n,l),(l==null?void 0:l.dataLen)>s2&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&De("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,Cc).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,xc).set(o.refStr,e);const l=new TN(t,o,this,this._params.pdfBug);return c(this,dr).set(t,l),l});return c(this,Cc).set(t,r),r}getPageIndex(e){return fE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(this,Pa,dh).call(this,"GetFieldObjects")}hasJSActions(){return x(this,Pa,dh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,Pa,dh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(this,Pa,dh).call(this,"GetOptionalContentConfig").then(t=>new J2(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Yr).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,l;return{info:r[0],metadata:r[1]?new Y2(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return c(this,Yr).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,dr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Yr).clear(),this.filterFactory.destroy(!0),kh.cleanup()}}cachedPageNumber(e){if(!fE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,xc).get(t)??null}}Yr=new WeakMap,dr=new WeakMap,Cc=new WeakMap,xc=new WeakMap,Qr=new WeakMap,Pa=new WeakSet,dh=function(e,t=null){const n=c(this,Yr).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Yr).set(e,r),r};const th=Symbol("INITIAL_DATA");var Gn,yd,I0;class IC{constructor(){C(this,yd);C(this,Gn,Object.create(null))}get(e,t=null){if(t){const r=x(this,yd,I0).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=c(this,Gn)[e];if(!n||n.data===th)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Gn)[e];return!!t&&t.data!==th}delete(e){const t=c(this,Gn)[e];return!t||t.data===th?!1:(delete c(this,Gn)[e],!0)}resolve(e,t=null){const n=x(this,yd,I0).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Gn)){const{data:n}=c(this,Gn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}A(this,Gn,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Gn)){const{data:t}=c(this,Gn)[e];t!==th&&(yield[e,t])}}}Gn=new WeakMap,yd=new WeakSet,I0=function(e){var t;return(t=c(this,Gn))[e]||(t[e]={...Promise.withResolvers(),data:th})};var ho;class PN{constructor(e){C(this,ho,null);A(this,ho,e),this.onContinue=null}get promise(){return c(this,ho).capability.promise}cancel(e=0){c(this,ho).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,ho).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,ho);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ho=new WeakMap;var fo,La;const Jo=class Jo{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:v=!1,pageColors:y=null}){C(this,fo,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=v,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new PN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(c(Jo,La).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Jo,La).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:o,background:l}=this.params;this.gfx=new Yl(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,fo)&&(window.cancelAnimationFrame(c(this,fo)),A(this,fo,null)),c(Jo,La).delete(this._canvas),this.callback(e||new Ow(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,fo,window.requestAnimationFrame(()=>{A(this,fo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Jo,La).delete(this._canvas),this.callback())))}};fo=new WeakMap,La=new WeakMap,C(Jo,La,new WeakSet);let R0=Jo;const LN="4.10.38",MN="f9bea397f";function pE(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function nh(a){return Math.max(0,Math.min(255,255*a))}class gE{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=nh(e),[e,e,e]}static G_HTML([e]){const t=pE(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(nh)}static RGB_HTML(e){return`#${e.map(pE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[nh(1-Math.min(1,e+r)),nh(1-Math.min(1,n+r)),nh(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,o=1-t,l=1-n,h=Math.min(r,o,l);return["CMYK",r,o,l,h]}}class NN{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){et("Abstract method `_createSVG` called.")}}class Hw extends NN{_createSVG(e){return document.createElementNS(Mr,e)}}class RC{static setupStorage(e,t,n,r,o){const l=r.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const h of n.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){const{attributes:l}=t,h=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}h&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var v,y;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const h=o!=="richText",d=e.div;if(d.append(l),e.viewport){const _=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=_}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const _=document.createTextNode(r.value);l.append(_),h&&Th.shouldBuildText(r.name)&&p.push(_)}return{textDivs:p}}const g=[[r,-1,l]];for(;g.length>0;){const[_,S,b]=g.at(-1);if(S+1===_.children.length){g.pop();continue}const k=_.children[++g.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const L=document.createTextNode(k.value);p.push(L),b.append(L);continue}const P=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(b.append(P),k.attributes&&this.setAttributes({html:P,element:k,storage:t,intent:o,linkService:n}),((y=k.children)==null?void 0:y.length)>0)g.push([k,-1,P]);else if(k.value){const L=document.createTextNode(k.value);h&&Th.shouldBuildText(T)&&p.push(L),P.append(L)}}for(const _ of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const hf=1e3,DN=9,ll=new WeakSet;function ko(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class ON{static create(e){switch(e.data.annotationType){case It.LINK:return new PC(e);case It.TEXT:return new FN(e);case It.WIDGET:switch(e.data.fieldType){case"Tx":return new UN(e);case"Btn":return e.data.radioButton?new NC(e):e.data.checkBox?new jN(e):new zN(e);case"Ch":return new HN(e);case"Sig":return new BN(e)}return new ul(e);case It.POPUP:return new L0(e);case It.FREETEXT:return new BC(e);case It.LINE:return new VN(e);case It.SQUARE:return new WN(e);case It.CIRCLE:return new GN(e);case It.POLYLINE:return new jC(e);case It.CARET:return new XN(e);case It.INK:return new $w(e);case It.POLYGON:return new qN(e);case It.HIGHLIGHT:return new zC(e);case It.UNDERLINE:return new KN(e);case It.SQUIGGLY:return new YN(e);case It.STRIKEOUT:return new QN(e);case It.STAMP:return new HC(e);case It.FILEATTACHMENT:return new JN(e);default:return new St(e)}}}var Ma,kc,Tc,wd,P0;const qw=class qw{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){C(this,wd);C(this,Ma,null);C(this,kc,!1);C(this,Tc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qw._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;c(this,Ma)||A(this,Ma,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&x(this,wd,P0).call(this,t),(n=c(this,Tc))==null||n.popup.updateEdited(e)}resetEdited(){var e;c(this,Ma)&&(x(this,wd,P0).call(this,c(this,Ma).rect),(e=c(this,Tc))==null||e.popup.resetEdited(),A(this,Ma,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof ul||(o.tabIndex=hf);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof L0){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,o),o}const{width:h,height:d}=ko(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,k=t.borderStyle.verticalCornerRadius;if(b>0||k>0){const P=`calc(${b}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;l.borderRadius=P}else if(this instanceof NC){const P=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=P}switch(t.borderStyle.style){case Zu.SOLID:l.borderStyle="solid";break;case Zu.DASHED:l.borderStyle="dashed";break;case Zu.BEVELED:De("Unimplemented border style: beveled");break;case Zu.INSET:De("Unimplemented border style: inset");break;case Zu.UNDERLINE:l.borderBottomStyle="solid";break}const T=t.borderColor||null;T?(A(this,kc,!0),l.borderColor=_e.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):l.borderWidth=0}const p=_e.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:v,pageX:y,pageY:_}=r.rawDims;l.left=`${100*(p[0]-y)/g}%`,l.top=`${100*(p[1]-_)/v}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(l.width=`${100*h/g}%`,l.height=`${100*d/v}%`):this.setRotation(S,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:l}=ko(this.data.rect);let h,d;e%180===0?(h=100*o/n,d=100*l/r):(h=100*l/n,d=100*o/r),t.style.width=`${h}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const o=r.detail[t],l=o[0],h=o.slice(1);r.target.style[n]=gE[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:gE[`${l}_rgb`](h)})};return Be(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||n[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,o]of Object.entries(t)){const l=n[r];if(l){const h={detail:{[r]:o},target:e};l(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,o]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,k,T,P]=e.subarray(2,6);if(r===b&&o===k&&t===T&&n===P)return}const{style:l}=this.container;let h;if(c(this,kc)){const{borderColor:b,borderWidth:k}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const d=r-t,p=o-n,{svgFactory:g}=this,v=g.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const y=g.createElement("defs");v.append(y);const _=g.createElement("clipPath"),S=`clippath_${this.data.id}`;_.setAttribute("id",S),_.setAttribute("clipPathUnits","objectBoundingBox"),y.append(_);for(let b=2,k=e.length;b<k;b+=8){const T=e[b],P=e[b+1],L=e[b+2],D=e[b+3],j=g.createElement("rect"),G=(L-t)/d,V=(o-P)/p,Y=(T-L)/d,J=(P-D)/p;j.setAttribute("x",G),j.setAttribute("y",V),j.setAttribute("width",Y),j.setAttribute("height",J),_.append(j),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${V}" width="${Y}" height="${J}"/>`)}c(this,kc)&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(v),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=A(this,Tc,new L0({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){et("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:l,exportValues:h}of r){if(o===-1||l===t)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!ll.has(p)){De(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:p})}return n}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==t&&ll.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ma=new WeakMap,kc=new WeakMap,Tc=new WeakMap,wd=new WeakSet,P0=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...e);const{width:p,height:g}=ko(e);t.left=`${100*(e[0]-h)/o}%`,t.top=`${100*(l-e[3]+d)/l}%`,r===0?(t.width=`${100*p/o}%`,t.height=`${100*g/l}%`):this.setRotation(r)};let St=qw;var ni,Xo,LC,MC;class PC extends St{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});C(this,ni);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(x(this,ni,LC).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(x(this,ni,MC).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&x(this,ni,Xo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),x(this,ni,Xo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=r.get(o);l&&(t[l]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),x(this,ni,Xo).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),x(this,ni,Xo).call(this),!this._fieldObjects){De('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var v;r==null||r();const{fields:o,refs:l,include:h}=n,d=[];if(o.length!==0||l.length!==0){const y=new Set(l);for(const _ of o){const S=this._fieldObjects[_]||[];for(const{id:b}of S)y.add(b)}for(const _ of Object.values(this._fieldObjects))for(const S of _)y.has(S.id)===h&&d.push(S)}else for(const y of Object.values(this._fieldObjects))d.push(...y);const p=this.annotationStorage,g=[];for(const y of d){const{id:_}=y;switch(g.push(_),y.type){case"text":{const b=y.defaultValue||"";p.setValue(_,{value:b});break}case"checkbox":case"radiobutton":{const b=y.defaultValue===y.exportValues;p.setValue(_,{value:b});break}case"combobox":case"listbox":{const b=y.defaultValue||"";p.setValue(_,{value:b});break}default:continue}const S=document.querySelector(`[data-element-id="${_}"]`);if(S){if(!ll.has(S)){De(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ni=new WeakSet,Xo=function(){this.container.setAttribute("data-internal-link","")},LC=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},x(this,ni,Xo).call(this)},MC=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),x(this,ni,Xo).call(this)};class FN extends St{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ul extends St{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return An.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,l=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var h;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}}))})}_setEventListeners(e,t,n,r){var o,l,h;for(const[d,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":_e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||DN,o=e.style;let l;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(Ly*r))||1,v=p/g;l=Math.min(r,d(v/Ly))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(r,d(p/Ly))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=_e.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class UN extends ul{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[r]:n})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let h=l.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let p=l.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ll.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=hf,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(n,"value",y.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",y=>{const _=this.data.defaultFieldValue??"";n.value=g.userValue=_,g.formattedValue=null});let v=y=>{const{formattedValue:_}=g;_!=null&&(y.target.value=_),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var b;if(g.focused)return;const{target:S}=_;g.userValue&&(S.value=g.userValue),g.lastCommittedValue=S.value,g.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const S={value(b){g.userValue=b.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),b.target.value=g.userValue},formattedValue(b){const{formattedValue:k}=b.detail;g.formattedValue=k,k!=null&&b.target!==document.activeElement&&(b.target.value=k),e.setValue(t,{formattedValue:k})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var L;const{charLimit:k}=b.detail,{target:T}=b;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let P=g.userValue;!P||P.length<=k||(P=P.slice(0,k),T.value=g.userValue=P,e.setValue(t,{value:P}),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(S,_)}),n.addEventListener("keydown",_=>{var k;g.commitKey=1;let S=-1;if(_.key==="Escape"?S=0:_.key==="Enter"&&!this.data.multiLine?S=2:_.key==="Tab"&&(g.commitKey=3),S===-1)return;const{value:b}=_.target;g.lastCommittedValue!==b&&(g.lastCommittedValue=b,g.userValue=b,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:S,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const y=v;v=null,n.addEventListener("blur",_=>{var b,k;if(!g.focused||!_.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(g.focused=!1);const{value:S}=_.target;g.userValue=S,g.lastCommittedValue!==S&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:g.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),y(_)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",_=>{var j;g.lastCommittedValue=null;const{data:S,target:b}=_,{value:k,selectionStart:T,selectionEnd:P}=b;let L=T,D=P;switch(_.inputType){case"deleteWordBackward":{const G=k.substring(0,T).match(/\w*[^\w]*$/);G&&(L-=G[0].length);break}case"deleteWordForward":{const G=k.substring(T).match(/^[^\w]*\w*/);G&&(D+=G[0].length);break}case"deleteContentBackward":T===P&&(L-=1);break;case"deleteContentForward":T===P&&(D+=1);break}_.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,change:S||"",willCommit:!1,selStart:L,selEnd:D}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class BN extends ul{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class jN extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ll.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=hf,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n)){const g=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue||"Off";l.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class NC extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(ll.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=hf,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n))e.setValue(p.id,{value:!1});e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue;l.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const g=l===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const y=g&&v.id===n;v.domElement&&(v.domElement.checked=y),e.setValue(v.id,{value:y})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class zN extends PC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class HN extends ul{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");ll.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=hf;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===v});for(const g of this.data.options){const v=document.createElement("option");v.textContent=g.displayValue,v.value=g.exportValue,n.value.includes(g.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const h=g=>{const v=g?"value":"textContent",{options:y,multiple:_}=r;return _?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[v]):y.selectedIndex===-1?null:y[y.selectedIndex][v]};let d=h(!1);const p=g=>{const v=g.target.options;return Array.prototype.map.call(v,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const v={value(y){l==null||l();const _=y.detail.value,S=new Set(Array.isArray(_)?_:[_]);for(const b of r.options)b.selected=S.has(b.value);e.setValue(t,{value:h(!0)}),d=h(!1)},multipleSelection(y){r.multiple=!0},remove(y){const _=r.options,S=y.detail.remove;_[S].selected=!1,r.remove(S),_.length>0&&Array.prototype.findIndex.call(_,k=>k.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:h(!0),items:p(y)}),d=h(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=h(!1)},insert(y){const{index:_,displayValue:S,exportValue:b}=y.detail.insert,k=r.children[_],T=document.createElement("option");T.textContent=S,T.value=b,k?k.before(T):r.append(T),e.setValue(t,{value:h(!0),items:p(y)}),d=h(!1)},items(y){const{items:_}=y.detail;for(;r.length!==0;)r.remove(0);for(const S of _){const{displayValue:b,exportValue:k}=S,T=document.createElement("option");T.textContent=b,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:p(y)}),d=h(!1)},indices(y){const _=new Set(y.detail.indices);for(const S of y.target.options)S.selected=_.has(S.index);e.setValue(t,{value:h(!0)}),d=h(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(v,g)}),r.addEventListener("input",g=>{var _;const v=h(!0),y=h(!1);e.setValue(t,{value:v}),g.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:y,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class L0 extends St{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:St._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new $N({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Dw}${n}`).join(",")),this.container}}var Ic,Ug,Bg,Rc,Na,vt,Jr,Pc,_d,Ad,Lc,Zr,Di,es,Sd,ts,bd,Da,Oa,Je,Kp,M0,DC,OC,FC,UC,Yp,Qp,N0;class $N{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:p,parentRect:g,open:v}){C(this,Je);C(this,Ic,x(this,Je,FC).bind(this));C(this,Ug,x(this,Je,N0).bind(this));C(this,Bg,x(this,Je,Qp).bind(this));C(this,Rc,x(this,Je,Yp).bind(this));C(this,Na,null);C(this,vt,null);C(this,Jr,null);C(this,Pc,null);C(this,_d,null);C(this,Ad,null);C(this,Lc,null);C(this,Zr,!1);C(this,Di,null);C(this,es,null);C(this,Sd,null);C(this,ts,null);C(this,bd,null);C(this,Da,null);C(this,Oa,!1);var y;A(this,vt,e),A(this,bd,r),A(this,Jr,l),A(this,ts,h),A(this,Ad,d),A(this,Na,t),A(this,Sd,p),A(this,Lc,g),A(this,_d,n),A(this,Pc,Uw.toDateObject(o)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",c(this,Rc)),_.addEventListener("mouseenter",c(this,Bg)),_.addEventListener("mouseleave",c(this,Ug)),_.classList.add("popupTriggerArea");for(const _ of n)(y=_.container)==null||y.addEventListener("keydown",c(this,Ic));c(this,vt).hidden=!0,v&&x(this,Je,Yp).call(this)}render(){if(c(this,Di))return;const e=A(this,Di,document.createElement("div"));if(e.className="popup",c(this,Na)){const o=e.style.outlineColor=_e.makeHexColor(...c(this,Na));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=_e.makeHexColor(...c(this,Na).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=c(this,bd),e.append(t),c(this,Pc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Pc).valueOf()})),t.append(o)}const r=c(this,Je,Kp);if(r)RC.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(c(this,Jr));e.append(o)}c(this,vt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,l=r.length;o<l;++o){const h=r[o];n.append(document.createTextNode(h)),o<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;c(this,Da)||A(this,Da,{contentsObj:c(this,Jr),richText:c(this,ts)}),e&&A(this,es,null),t&&(A(this,ts,x(this,Je,OC).call(this,t)),A(this,Jr,null)),(n=c(this,Di))==null||n.remove(),A(this,Di,null)}resetEdited(){var e;c(this,Da)&&({contentsObj:gn(this,Jr)._,richText:gn(this,ts)._}=c(this,Da),A(this,Da,null),(e=c(this,Di))==null||e.remove(),A(this,Di,null),A(this,es,null))}forceHide(){A(this,Oa,this.isVisible),c(this,Oa)&&(c(this,vt).hidden=!0)}maybeShow(){c(this,Oa)&&(c(this,Di)||x(this,Je,Qp).call(this),A(this,Oa,!1),c(this,vt).hidden=!1)}get isVisible(){return c(this,vt).hidden===!1}}Ic=new WeakMap,Ug=new WeakMap,Bg=new WeakMap,Rc=new WeakMap,Na=new WeakMap,vt=new WeakMap,Jr=new WeakMap,Pc=new WeakMap,_d=new WeakMap,Ad=new WeakMap,Lc=new WeakMap,Zr=new WeakMap,Di=new WeakMap,es=new WeakMap,Sd=new WeakMap,ts=new WeakMap,bd=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Je=new WeakSet,Kp=function(){const e=c(this,ts),t=c(this,Jr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,ts).html||null},M0=function(){var e,t,n;return((n=(t=(e=c(this,Je,Kp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},DC=function(){var e,t,n;return((n=(t=(e=c(this,Je,Kp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},OC=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Je,DC),fontSize:c(this,Je,M0)?`calc(${c(this,Je,M0)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n},FC=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Zr))&&x(this,Je,Yp).call(this)},UC=function(){if(c(this,es)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=c(this,Ad);let l=!!c(this,Lc),h=l?c(this,Lc):c(this,Sd);for(const S of c(this,_d))if(!h||_e.intersect(S.data.rect,h)!==null){h=S.data.rect,l=!0;break}const d=_e.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),g=l?h[2]-h[0]+5:0,v=d[0]+g,y=d[1];A(this,es,[100*(v-r)/t,100*(y-o)/n]);const{style:_}=c(this,vt);_.left=`${c(this,es)[0]}%`,_.top=`${c(this,es)[1]}%`},Yp=function(){A(this,Zr,!c(this,Zr)),c(this,Zr)?(x(this,Je,Qp).call(this),c(this,vt).addEventListener("click",c(this,Rc)),c(this,vt).addEventListener("keydown",c(this,Ic))):(x(this,Je,N0).call(this),c(this,vt).removeEventListener("click",c(this,Rc)),c(this,vt).removeEventListener("keydown",c(this,Ic)))},Qp=function(){c(this,Di)||this.render(),this.isVisible?c(this,Zr)&&c(this,vt).classList.add("focused"):(x(this,Je,UC).call(this),c(this,vt).hidden=!1,c(this,vt).style.zIndex=parseInt(c(this,vt).style.zIndex)+1e3)},N0=function(){c(this,vt).classList.remove("focused"),!(c(this,Zr)||!this.isVisible)&&(c(this,vt).hidden=!0,c(this,vt).style.zIndex=parseInt(c(this,vt).style.zIndex)-1e3)};class BC extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ed;class VN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Ed,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=ko(t.rect),o=this.svgFactory.create(n,r,!0),l=A(this,Ed,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ed=new WeakMap;var Cd;class WN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Cd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=ko(t.rect),o=this.svgFactory.create(n,r,!0),l=t.borderStyle.width,h=A(this,Cd,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",l/2),h.setAttribute("y",l/2),h.setAttribute("width",n-l),h.setAttribute("height",r-l),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap;var xd;class GN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,xd,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=ko(t.rect),o=this.svgFactory.create(n,r,!0),l=t.borderStyle.width,h=A(this,xd,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-l/2),h.setAttribute("ry",r/2-l/2),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;var kd;class jC extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,kd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:o}}=this;if(!n)return this.container;const{width:l,height:h}=ko(t),d=this.svgFactory.create(l,h,!0);let p=[];for(let v=0,y=n.length;v<y;v+=2){const _=n[v]-t[0],S=t[3]-n[v+1];p.push(`${_},${S}`)}p=p.join(" ");const g=A(this,kd,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,kd)}addHighlightArea(){this.container.classList.add("highlightArea")}}kd=new WeakMap;class qN extends jC{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class XN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Td,Fa,Id,D0;class $w extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Id);C(this,Td,null);C(this,Fa,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ne.HIGHLIGHT:Ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:o,popupRef:l}}=this,{transform:h,width:d,height:p}=x(this,Id,D0).call(this,n,t),g=this.svgFactory.create(d,p,!0),v=A(this,Td,this.svgFactory.createElement("svg:g"));g.append(v),v.setAttribute("stroke-width",o.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",h);for(let y=0,_=r.length;y<_;y++){const S=this.svgFactory.createElement(this.svgElementName);c(this,Fa).push(S),S.setAttribute("points",r[y].join(",")),v.append(S)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:o}=t,l=c(this,Td);if(n>=0&&l.setAttribute("stroke-width",n||1),r)for(let h=0,d=c(this,Fa).length;h<d;h++)c(this,Fa)[h].setAttribute("points",r[h].join(","));if(o){const{transform:h,width:d,height:p}=x(this,Id,D0).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${d} ${p}`),l.setAttribute("transform",h)}}getElementsToTriggerPopup(){return c(this,Fa)}addHighlightArea(){this.container.classList.add("highlightArea")}}Td=new WeakMap,Fa=new WeakMap,Id=new WeakSet,D0=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class zC extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ne.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class KN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class YN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class QN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class HC extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rd,Pd,O0;class JN extends St{constructor(t){var r;super(t,{isRenderable:!0});C(this,Pd);C(this,Rd,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",x(this,Pd,O0).bind(this)),A(this,Rd,r);const{isMac:o}=An.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&x(this,Pd,O0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Rd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rd=new WeakMap,Pd=new WeakSet,O0=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ld,Ua,Ba,Md,cl,$C,F0;class ZN{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:h}){C(this,cl);C(this,Ld,null);C(this,Ua,null);C(this,Ba,new Map);C(this,Md,null);this.div=e,A(this,Ld,t),A(this,Ua,n),A(this,Md,h||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return c(this,Ba).size>0}async render(e){var l;const{annotations:t}=e,n=this.div;ol(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Hw,annotationStorage:e.annotationStorage||new jw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const d=h.annotationType===It.POPUP;if(d){const v=r.get(h.id);if(!v)continue;o.elements=v}else{const{width:v,height:y}=ko(h.rect);if(v<=0||y<=0)continue}o.data=h;const p=ON.create(o);if(!p.isRenderable)continue;if(!d&&h.popupRef){const v=r.get(h.popupRef);v?v.push(p):r.set(h.popupRef,[p])}const g=p.render();h.hidden&&(g.style.visibility="hidden"),await x(this,cl,$C).call(this,g,h.id),p._isEditable&&(c(this,Ba).set(p.data.id,p),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(p))}x(this,cl,F0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ol(t,{rotation:e.rotation}),x(this,cl,F0).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Ba).values())}getEditableAnnotation(e){return c(this,Ba).get(e)}}Ld=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,Md=new WeakMap,cl=new WeakSet,$C=async function(e,t){var l,h;const n=e.firstChild||e,r=n.id=`${Dw}${t}`,o=await((l=c(this,Md))==null?void 0:l.getAriaAttributes(r));if(o)for(const[d,p]of o)n.setAttribute(d,p);this.div.append(e),(h=c(this,Ld))==null||h.moveElementInDOM(this.div,e,n,!1)},F0=function(){if(!c(this,Ua))return;const e=this.div;for(const[t,n]of c(this,Ua)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n)}c(this,Ua).clear()};const xp=/\r\n?|\n/g;var Oi,qn,Nd,ja,Xn,xt,VC,WC,GC,Jp,ms,Zp,eg,qC,B0,XC;const nt=class nt extends gt{constructor(t){super({...t,name:"freeTextEditor"});C(this,xt);C(this,Oi);C(this,qn,"");C(this,Nd,`${this.id}-editor`);C(this,ja,null);C(this,Xn);A(this,Oi,t.color||nt._defaultColor||gt._defaultLineColor),A(this,Xn,t.fontSize||nt._defaultFontSize)}static get _keyboardManager(){const t=nt.prototype,n=l=>l.isEmpty(),r=al.TRANSLATE_SMALL,o=al.TRANSLATE_BIG;return Be(this,"_keyboardManager",new uf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){gt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case je.FREETEXT_SIZE:nt._defaultFontSize=n;break;case je.FREETEXT_COLOR:nt._defaultColor=n;break}}updateParams(t,n){switch(t){case je.FREETEXT_SIZE:x(this,xt,VC).call(this,n);break;case je.FREETEXT_COLOR:x(this,xt,WC).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[je.FREETEXT_SIZE,nt._defaultFontSize],[je.FREETEXT_COLOR,nt._defaultColor||gt._defaultLineColor]]}get propertiesToUpdate(){return[[je.FREETEXT_SIZE,c(this,Xn)],[je.FREETEXT_COLOR,c(this,Oi)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-nt._internalPadding*t,-(nt._internalPadding+c(this,Xn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ne.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,ja,new AbortController);const t=this._uiManager.combinedSignal(c(this,ja));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Nd)),this._isDraggable=!0,(t=c(this,ja))==null||t.abort(),A(this,ja,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,qn),n=A(this,qn,x(this,xt,GC).call(this).trimEnd());if(t===n)return;const r=o=>{if(A(this,qn,o),!o){this.remove();return}x(this,xt,eg).call(this),this._uiManager.rebuild(this),x(this,xt,Jp).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),x(this,xt,Jp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){nt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Nd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Xn)}px * var(--scale-factor))`,r.color=c(this,Oi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),wg(this,this.div,["dblclick","keydown"]),this.width){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,v]=this.pageDimensions,[y,_]=this.pageTranslation;let S,b;switch(this.rotation){case 0:S=t+(h[0]-y)/g,b=n+this.height-(h[1]-_)/v;break;case 90:S=t+(h[0]-y)/g,b=n-(h[1]-_)/v,[d,p]=[p,-d];break;case 180:S=t-this.width+(h[0]-y)/g,b=n-(h[1]-_)/v,[d,p]=[-d,-p];break;case 270:S=t+(h[0]-y-this.height*v)/g,b=n+(h[1]-_-this.width*g)/v,[d,p]=[-p,d];break}this.setAt(S*o,b*l,d,p)}else this.setAt(t*o,n*l,this.width*o,this.height*l);x(this,xt,eg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,b,k;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=x(S=nt,ms,B0).call(S,n.getData("text")||"").replaceAll(xp,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:p}=h,g=[],v=[];if(d.nodeType===Node.TEXT_NODE){const T=d.parentElement;if(v.push(d.nodeValue.slice(p).replaceAll(xp,"")),T!==this.editorDiv){let P=g;for(const L of this.editorDiv.childNodes){if(L===T){P=v;continue}P.push(x(b=nt,ms,Zp).call(b,L))}}g.push(d.nodeValue.slice(0,p).replaceAll(xp,""))}else if(d===this.editorDiv){let T=g,P=0;for(const L of this.editorDiv.childNodes)P++===p&&(T=v),T.push(x(k=nt,ms,Zp).call(k,L))}A(this,qn,`${g.join(`
`)}${o}${v.join(`
`)}`),x(this,xt,eg).call(this);const y=new Range;let _=g.reduce((T,P)=>T+P.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const P=T.nodeValue.length;if(_<=P){y.setStart(T,_),y.setEnd(T,_);break}_-=P}l.removeAllRanges(),l.addRange(y)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var h;let o=null;if(t instanceof BC){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:v,id:y,popupRef:_},textContent:S,textPosition:b,parent:{page:{pageNumber:k}}}=t;if(!S||S.length===0)return null;o=t={annotationType:Ne.FREETEXT,color:Array.from(p),fontSize:d,value:S.join(`
`),position:b,pageIndex:k-1,rect:g.slice(0),rotation:v,id:y,deleted:!1,popupRef:_}}const l=await super.deserialize(t,n,r);return A(l,Xn,t.fontSize),A(l,Oi,_e.makeHexColor(...t.color)),A(l,qn,x(h=nt,ms,B0).call(h,t.value)),l.annotationElementId=t.id||null,l._initialData=o,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=nt._internalPadding*this.parentScale,r=this.getRect(n,n),o=gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Oi)),l={annotationType:Ne.FREETEXT,color:o,fontSize:c(this,Xn),value:x(this,xt,qC).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!x(this,xt,XC).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${c(this,Xn)}px * var(--scale-factor))`,r.color=c(this,Oi),n.replaceChildren();for(const l of c(this,qn).split(`
`)){const h=document.createElement("div");h.append(l?document.createTextNode(l):document.createElement("br")),n.append(h)}const o=nt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:c(this,qn)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Oi=new WeakMap,qn=new WeakMap,Nd=new WeakMap,ja=new WeakMap,Xn=new WeakMap,xt=new WeakSet,VC=function(t){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-c(this,Xn))*this.parentScale),A(this,Xn,o),x(this,xt,Jp).call(this)},r=c(this,Xn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:je.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},WC=function(t){const n=o=>{A(this,Oi,this.editorDiv.style.color=o)},r=c(this,Oi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:je.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},GC=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(x(r=nt,ms,Zp).call(r,o)),n=o);return t.join(`
`)},Jp=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,h=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),r=l.getBoundingClientRect(),l.remove(),l.style.display=h,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},ms=new WeakSet,Zp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xp,"")},eg=function(){if(this.editorDiv.replaceChildren(),!!c(this,qn))for(const t of c(this,qn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},qC=function(){return c(this,qn).replaceAll(" "," ")},B0=function(t){return t.replaceAll(" "," ")},XC=function(t){const{value:n,fontSize:r,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((h,d)=>h!==o[d])||t.pageIndex!==l},C(nt,ms),xe(nt,"_freeTextDefaultContent",""),xe(nt,"_internalPadding",0),xe(nt,"_defaultColor",null),xe(nt,"_defaultFontSize",10),xe(nt,"_type","freetext"),xe(nt,"_editorType",Ne.FREETEXT);let U0=nt;class de{toSVGPath(){et("Abstract method `toSVGPath` must be implemented.")}get box(){et("Abstract getter `box` must be implemented.")}serialize(e,t){et("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,o,l){l||(l=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)l[h]=t+e[h]*r,l[h+1]=n+e[h+1]*o;return l}static _rescaleAndSwap(e,t,n,r,o,l){l||(l=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)l[h]=t+e[h+1]*r,l[h+1]=n+e[h]*o;return l}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)r[o]=t+e[o],r[o+1]=n+e[o+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,o){switch(o){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,o,l){return[(e+5*n)/6,(t+5*r)/6,(5*n+o)/6,(5*r+l)/6,(n+o)/2,(r+l)/2]}}xe(de,"PRECISION",1e-4);var Kn,Fi,Mc,Nc,fr,Ue,za,Ha,Dd,Od,Dc,Oc,po,Fd,jg,zg,Mt,fh,KC,YC,QC,JC,ZC,ex;const Fr=class Fr{constructor({x:e,y:t},n,r,o,l,h=0){C(this,Mt);C(this,Kn);C(this,Fi,[]);C(this,Mc);C(this,Nc);C(this,fr,[]);C(this,Ue,new Float32Array(18));C(this,za);C(this,Ha);C(this,Dd);C(this,Od);C(this,Dc);C(this,Oc);C(this,po,[]);A(this,Kn,n),A(this,Oc,o*r),A(this,Nc,l),c(this,Ue).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Mc,h),A(this,Od,c(Fr,Fd)*r),A(this,Dd,c(Fr,zg)*r),A(this,Dc,r),c(this,po).push(e,t)}isEmpty(){return isNaN(c(this,Ue)[8])}add({x:e,y:t}){var J;A(this,za,e),A(this,Ha,t);const[n,r,o,l]=c(this,Kn);let[h,d,p,g]=c(this,Ue).subarray(8,12);const v=e-p,y=t-g,_=Math.hypot(v,y);if(_<c(this,Dd))return!1;const S=_-c(this,Od),b=S/_,k=b*v,T=b*y;let P=h,L=d;h=p,d=g,p+=k,g+=T,(J=c(this,po))==null||J.push(e,t);const D=-T/S,j=k/S,G=D*c(this,Oc),V=j*c(this,Oc);return c(this,Ue).set(c(this,Ue).subarray(2,8),0),c(this,Ue).set([p+G,g+V],4),c(this,Ue).set(c(this,Ue).subarray(14,18),12),c(this,Ue).set([p-G,g-V],16),isNaN(c(this,Ue)[6])?(c(this,fr).length===0&&(c(this,Ue).set([h+G,d+V],2),c(this,fr).push(NaN,NaN,NaN,NaN,(h+G-n)/o,(d+V-r)/l),c(this,Ue).set([h-G,d-V],14),c(this,Fi).push(NaN,NaN,NaN,NaN,(h-G-n)/o,(d-V-r)/l)),c(this,Ue).set([P,L,h,d,p,g],6),!this.isEmpty()):(c(this,Ue).set([P,L,h,d,p,g],6),Math.abs(Math.atan2(L-d,P-h)-Math.atan2(T,k))<Math.PI/2?([h,d,p,g]=c(this,Ue).subarray(2,6),c(this,fr).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((d+g)/2-r)/l),[h,d,P,L]=c(this,Ue).subarray(14,18),c(this,Fi).push(NaN,NaN,NaN,NaN,((P+h)/2-n)/o,((L+d)/2-r)/l),!0):([P,L,h,d,p,g]=c(this,Ue).subarray(0,6),c(this,fr).push(((P+5*h)/6-n)/o,((L+5*d)/6-r)/l,((5*h+p)/6-n)/o,((5*d+g)/6-r)/l,((h+p)/2-n)/o,((d+g)/2-r)/l),[p,g,h,d,P,L]=c(this,Ue).subarray(12,18),c(this,Fi).push(((P+5*h)/6-n)/o,((L+5*d)/6-r)/l,((5*h+p)/6-n)/o,((5*d+g)/6-r)/l,((h+p)/2-n)/o,((d+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,fr),t=c(this,Fi);if(isNaN(c(this,Ue)[6])&&!this.isEmpty())return x(this,Mt,KC).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);x(this,Mt,QC).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return x(this,Mt,YC).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,o,l){return new tx(e,t,n,r,o,l)}getOutlines(){var v;const e=c(this,fr),t=c(this,Fi),n=c(this,Ue),[r,o,l,h]=c(this,Kn),d=new Float32Array((((v=c(this,po))==null?void 0:v.length)??0)+2);for(let y=0,_=d.length-2;y<_;y+=2)d[y]=(c(this,po)[y]-r)/l,d[y+1]=(c(this,po)[y+1]-o)/h;if(d[d.length-2]=(c(this,za)-r)/l,d[d.length-1]=(c(this,Ha)-o)/h,isNaN(n[6])&&!this.isEmpty())return x(this,Mt,JC).call(this,d);const p=new Float32Array(c(this,fr).length+24+c(this,Fi).length);let g=e.length;for(let y=0;y<g;y+=2){if(isNaN(e[y])){p[y]=p[y+1]=NaN;continue}p[y]=e[y],p[y+1]=e[y+1]}g=x(this,Mt,ex).call(this,p,g);for(let y=t.length-6;y>=6;y-=6)for(let _=0;_<6;_+=2){if(isNaN(t[y+_])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[y+_],p[g+1]=t[y+_+1],g+=2}return x(this,Mt,ZC).call(this,p,g),this.newFreeDrawOutline(p,d,c(this,Kn),c(this,Dc),c(this,Mc),c(this,Nc))}};Kn=new WeakMap,Fi=new WeakMap,Mc=new WeakMap,Nc=new WeakMap,fr=new WeakMap,Ue=new WeakMap,za=new WeakMap,Ha=new WeakMap,Dd=new WeakMap,Od=new WeakMap,Dc=new WeakMap,Oc=new WeakMap,po=new WeakMap,Fd=new WeakMap,jg=new WeakMap,zg=new WeakMap,Mt=new WeakSet,fh=function(){const e=c(this,Ue).subarray(4,6),t=c(this,Ue).subarray(16,18),[n,r,o,l]=c(this,Kn);return[(c(this,za)+(e[0]-t[0])/2-n)/o,(c(this,Ha)+(e[1]-t[1])/2-r)/l,(c(this,za)+(t[0]-e[0])/2-n)/o,(c(this,Ha)+(t[1]-e[1])/2-r)/l]},KC=function(){const[e,t,n,r]=c(this,Kn),[o,l,h,d]=x(this,Mt,fh).call(this);return`M${(c(this,Ue)[2]-e)/n} ${(c(this,Ue)[3]-t)/r} L${(c(this,Ue)[4]-e)/n} ${(c(this,Ue)[5]-t)/r} L${o} ${l} L${h} ${d} L${(c(this,Ue)[16]-e)/n} ${(c(this,Ue)[17]-t)/r} L${(c(this,Ue)[14]-e)/n} ${(c(this,Ue)[15]-t)/r} Z`},YC=function(e){const t=c(this,Fi);e.push(`L${t[4]} ${t[5]} Z`)},QC=function(e){const[t,n,r,o]=c(this,Kn),l=c(this,Ue).subarray(4,6),h=c(this,Ue).subarray(16,18),[d,p,g,v]=x(this,Mt,fh).call(this);e.push(`L${(l[0]-t)/r} ${(l[1]-n)/o} L${d} ${p} L${g} ${v} L${(h[0]-t)/r} ${(h[1]-n)/o}`)},JC=function(e){const t=c(this,Ue),[n,r,o,l]=c(this,Kn),[h,d,p,g]=x(this,Mt,fh).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/l],0),this.newFreeDrawOutline(v,e,c(this,Kn),c(this,Dc),c(this,Mc),c(this,Nc))},ZC=function(e,t){const n=c(this,Fi);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},ex=function(e,t){const n=c(this,Ue).subarray(4,6),r=c(this,Ue).subarray(16,18),[o,l,h,d]=c(this,Kn),[p,g,v,y]=x(this,Mt,fh).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-l)/d],t),t+=24},C(Fr,Fd,8),C(Fr,jg,2),C(Fr,zg,c(Fr,Fd)+c(Fr,jg));let Sg=Fr;var Fc,$a,ns,Ud,Yn,Bd,At,Hg,nx;class tx extends de{constructor(t,n,r,o,l,h){super();C(this,Hg);C(this,Fc);C(this,$a,new Float32Array(4));C(this,ns);C(this,Ud);C(this,Yn);C(this,Bd);C(this,At);A(this,At,t),A(this,Yn,n),A(this,Fc,r),A(this,Bd,o),A(this,ns,l),A(this,Ud,h),this.lastPoint=[NaN,NaN],x(this,Hg,nx).call(this,h);const[d,p,g,v]=c(this,$a);for(let y=0,_=t.length;y<_;y+=2)t[y]=(t[y]-d)/g,t[y+1]=(t[y+1]-p)/v;for(let y=0,_=n.length;y<_;y+=2)n[y]=(n[y]-d)/g,n[y+1]=(n[y+1]-p)/v}toSVGPath(){const t=[`M${c(this,At)[4]} ${c(this,At)[5]}`];for(let n=6,r=c(this,At).length;n<r;n+=6){if(isNaN(c(this,At)[n])){t.push(`L${c(this,At)[n+4]} ${c(this,At)[n+5]}`);continue}t.push(`C${c(this,At)[n]} ${c(this,At)[n+1]} ${c(this,At)[n+2]} ${c(this,At)[n+3]} ${c(this,At)[n+4]} ${c(this,At)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,o],l){const h=r-t,d=o-n;let p,g;switch(l){case 0:p=de._rescale(c(this,At),t,o,h,-d),g=de._rescale(c(this,Yn),t,o,h,-d);break;case 90:p=de._rescaleAndSwap(c(this,At),t,n,h,d),g=de._rescaleAndSwap(c(this,Yn),t,n,h,d);break;case 180:p=de._rescale(c(this,At),r,n,-h,d),g=de._rescale(c(this,Yn),r,n,-h,d);break;case 270:p=de._rescaleAndSwap(c(this,At),r,o,-h,-d),g=de._rescaleAndSwap(c(this,Yn),r,o,-h,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return c(this,$a)}newOutliner(t,n,r,o,l,h=0){return new Sg(t,n,r,o,l,h)}getNewOutline(t,n){const[r,o,l,h]=c(this,$a),[d,p,g,v]=c(this,Fc),y=l*g,_=h*v,S=r*g+d,b=o*v+p,k=this.newOutliner({x:c(this,Yn)[0]*y+S,y:c(this,Yn)[1]*_+b},c(this,Fc),c(this,Bd),t,c(this,Ud),n??c(this,ns));for(let T=2;T<c(this,Yn).length;T+=2)k.add({x:c(this,Yn)[T]*y+S,y:c(this,Yn)[T+1]*_+b});return k.getOutlines()}}Fc=new WeakMap,$a=new WeakMap,ns=new WeakMap,Ud=new WeakMap,Yn=new WeakMap,Bd=new WeakMap,At=new WeakMap,Hg=new WeakSet,nx=function(t){const n=c(this,At);let r=n[4],o=n[5],l=r,h=o,d=r,p=o,g=r,v=o;const y=t?Math.max:Math.min;for(let S=6,b=n.length;S<b;S+=6){if(isNaN(n[S]))l=Math.min(l,n[S+4]),h=Math.min(h,n[S+5]),d=Math.max(d,n[S+4]),p=Math.max(p,n[S+5]),v<n[S+5]?(g=n[S+4],v=n[S+5]):v===n[S+5]&&(g=y(g,n[S+4]));else{const k=_e.bezierBoundingBox(r,o,...n.slice(S,S+6));l=Math.min(l,k[0]),h=Math.min(h,k[1]),d=Math.max(d,k[2]),p=Math.max(p,k[3]),v<k[3]?(g=k[2],v=k[3]):v===k[3]&&(g=y(g,k[2]))}r=n[S+4],o=n[S+5]}const _=c(this,$a);_[0]=l-c(this,ns),_[1]=h-c(this,ns),_[2]=d-l+2*c(this,ns),_[3]=p-h+2*c(this,ns),this.lastPoint=[g,v]};var jd,zd,go,Ui,bn,ix,tg,rx,sx,z0;class j0{constructor(e,t=0,n=0,r=!0){C(this,bn);C(this,jd);C(this,zd);C(this,go,[]);C(this,Ui,[]);let o=1/0,l=-1/0,h=1/0,d=-1/0;const p=10**-4;for(const{x:k,y:T,width:P,height:L}of e){const D=Math.floor((k-t)/p)*p,j=Math.ceil((k+P+t)/p)*p,G=Math.floor((T-t)/p)*p,V=Math.ceil((T+L+t)/p)*p,Y=[D,G,V,!0],J=[j,G,V,!1];c(this,go).push(Y,J),o=Math.min(o,D),l=Math.max(l,j),h=Math.min(h,G),d=Math.max(d,V)}const g=l-o+2*n,v=d-h+2*n,y=o-n,_=h-n,S=c(this,go).at(r?-1:-2),b=[S[0],S[2]];for(const k of c(this,go)){const[T,P,L]=k;k[0]=(T-y)/g,k[1]=(P-_)/v,k[2]=(L-_)/v}A(this,jd,new Float32Array([y,_,g,v])),A(this,zd,b)}getOutlines(){c(this,go).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,go))t[3]?(e.push(...x(this,bn,z0).call(this,t)),x(this,bn,rx).call(this,t)):(x(this,bn,sx).call(this,t),e.push(...x(this,bn,z0).call(this,t)));return x(this,bn,ix).call(this,e)}}jd=new WeakMap,zd=new WeakMap,go=new WeakMap,Ui=new WeakMap,bn=new WeakSet,ix=function(e){const t=[],n=new Set;for(const l of e){const[h,d,p]=l;t.push([h,d,l],[h,p,l])}t.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=t.length;l<h;l+=2){const d=t[l][2],p=t[l+1][2];d.push(p),p.push(d),n.add(d),n.add(p)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[h,d,p,g,v]=l;n.delete(l);let y=h,_=d;for(o=[h,p],r.push(o);;){let S;if(n.has(g))S=g;else if(n.has(v))S=v;else break;n.delete(S),[h,d,p,g,v]=S,y!==h&&(o.push(y,_,h,_===d?d:p),y=h),_=_===d?p:d}o.push(y,_)}return new eD(r,c(this,jd),c(this,zd))},tg=function(e){const t=c(this,Ui);let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:r=o-1}return r+1},rx=function([,e,t]){const n=x(this,bn,tg).call(this,e);c(this,Ui).splice(n,0,[e,t])},sx=function([,e,t]){const n=x(this,bn,tg).call(this,e);for(let r=n;r<c(this,Ui).length;r++){const[o,l]=c(this,Ui)[r];if(o!==e)break;if(o===e&&l===t){c(this,Ui).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=c(this,Ui)[r];if(o!==e)break;if(o===e&&l===t){c(this,Ui).splice(r,1);return}}},z0=function(e){const[t,n,r]=e,o=[[t,n,r]],l=x(this,bn,tg).call(this,r);for(let h=0;h<l;h++){const[d,p]=c(this,Ui)[h];for(let g=0,v=o.length;g<v;g++){const[,y,_]=o[g];if(!(p<=y||_<=d)){if(y>=d){if(_>p)o[g][1]=p;else{if(v===1)return[];o.splice(g,1),g--,v--}continue}o[g][2]=d,_>p&&o.push([t,p,_])}}}return o};var Hd,Uc;class eD extends de{constructor(t,n,r){super();C(this,Hd);C(this,Uc);A(this,Uc,t),A(this,Hd,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of c(this,Uc)){let[r,o]=n;t.push(`M${r} ${o}`);for(let l=2;l<n.length;l+=2){const h=n[l],d=n[l+1];h===r?(t.push(`V${d}`),o=d):d===o&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")}serialize([t,n,r,o],l){const h=[],d=r-t,p=o-n;for(const g of c(this,Uc)){const v=new Array(g.length);for(let y=0;y<g.length;y+=2)v[y]=t+g[y]*d,v[y+1]=o-g[y+1]*p;h.push(v)}return h}get box(){return c(this,Hd)}get classNamesForOutlining(){return["highlightOutline"]}}Hd=new WeakMap,Uc=new WeakMap;class H0 extends Sg{newFreeDrawOutline(e,t,n,r,o,l){return new tD(e,t,n,r,o,l)}}class tD extends tx{newOutliner(e,t,n,r,o,l=0){return new H0(e,t,n,r,o,l)}}var Bi,Va,Bc,Lt,$d,jc,Vd,Wd,mo,ji,zc,Gd,Qe,$0,V0,W0,Ko,ox,$s;const Nn=class Nn{constructor({editor:e=null,uiManager:t=null}){C(this,Qe);C(this,Bi,null);C(this,Va,null);C(this,Bc);C(this,Lt,null);C(this,$d,!1);C(this,jc,!1);C(this,Vd,null);C(this,Wd);C(this,mo,null);C(this,ji,null);C(this,zc);var n;e?(A(this,jc,!1),A(this,zc,je.HIGHLIGHT_COLOR),A(this,Vd,e)):(A(this,jc,!0),A(this,zc,je.HIGHLIGHT_DEFAULT_COLOR)),A(this,ji,(e==null?void 0:e._uiManager)||t),A(this,Wd,c(this,ji)._eventBus),A(this,Bc,(e==null?void 0:e.color)||((n=c(this,ji))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Nn,Gd)||A(Nn,Gd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Be(this,"_keyboardManager",new uf([[["Escape","mac+Escape"],Nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nn.prototype._moveToPrevious],[["Home","mac+Home"],Nn.prototype._moveToBeginning],[["End","mac+End"],Nn.prototype._moveToEnd]]))}renderButton(){const e=A(this,Bi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,ji)._signal;e.addEventListener("click",x(this,Qe,Ko).bind(this),{signal:t}),e.addEventListener("keydown",x(this,Qe,W0).bind(this),{signal:t});const n=A(this,Va,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,Bc),e.append(n),e}renderMainDropdown(){const e=A(this,Lt,x(this,Qe,$0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,Bi)){x(this,Qe,Ko).call(this,e);return}const t=e.target.getAttribute("data-color");t&&x(this,Qe,V0).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Qe,$s)){x(this,Qe,Ko).call(this,e);return}if(e.target===c(this,Bi)){(t=c(this,Lt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,Lt))==null?void 0:t.firstChild)||e.target===c(this,Bi)){c(this,Qe,$s)&&this._hideDropdownFromKeyboard();return}c(this,Qe,$s)||x(this,Qe,Ko).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Qe,$s)){x(this,Qe,Ko).call(this,e);return}(t=c(this,Lt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Qe,$s)){x(this,Qe,Ko).call(this,e);return}(t=c(this,Lt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Lt))==null||e.classList.add("hidden"),(t=c(this,mo))==null||t.abort(),A(this,mo,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,jc)){if(!c(this,Qe,$s)){(e=c(this,Vd))==null||e.unselect();return}this.hideDropdown(),c(this,Bi).focus({preventScroll:!0,focusVisible:c(this,$d)})}}updateColor(e){if(c(this,Va)&&(c(this,Va).style.backgroundColor=e),!c(this,Lt))return;const t=c(this,ji).highlightColors.values();for(const n of c(this,Lt).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,Bi))==null||e.remove(),A(this,Bi,null),A(this,Va,null),(t=c(this,Lt))==null||t.remove(),A(this,Lt,null)}};Bi=new WeakMap,Va=new WeakMap,Bc=new WeakMap,Lt=new WeakMap,$d=new WeakMap,jc=new WeakMap,Vd=new WeakMap,Wd=new WeakMap,mo=new WeakMap,ji=new WeakMap,zc=new WeakMap,Gd=new WeakMap,Qe=new WeakSet,$0=function(){const e=document.createElement("div"),t=c(this,ji)._signal;e.addEventListener("contextmenu",Gi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of c(this,ji).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",c(Nn,Gd)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.setAttribute("aria-selected",r===c(this,Bc)),o.addEventListener("click",x(this,Qe,V0).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",x(this,Qe,W0).bind(this),{signal:t}),e},V0=function(e,t){t.stopPropagation(),c(this,Wd).dispatch("switchannotationeditorparams",{source:this,type:c(this,zc),value:e})},W0=function(e){Nn._keyboardManager.exec(this,e)},Ko=function(e){if(c(this,Qe,$s)){this.hideDropdown();return}if(A(this,$d,e.detail===0),c(this,mo)||(A(this,mo,new AbortController),window.addEventListener("pointerdown",x(this,Qe,ox).bind(this),{signal:c(this,ji).combinedSignal(c(this,mo))})),c(this,Lt)){c(this,Lt).classList.remove("hidden");return}const t=A(this,Lt,x(this,Qe,$0).call(this));c(this,Bi).append(t)},ox=function(e){var t;(t=c(this,Lt))!=null&&t.contains(e.target)||this.hideDropdown()},$s=function(){return c(this,Lt)&&!c(this,Lt).classList.contains("hidden")},C(Nn,Gd,null);let bg=Nn;var Hc,qd,is,Wa,$c,Fn,Xd,Kd,Ga,gi,Qn,Xt,Vc,rs,ln,Wc,mi,Yd,Le,G0,ng,ax,lx,cx,q0,Yo,_i,Hl,ux,ig,ph,hx,dx,fx,px,gx;const Ge=class Ge extends gt{constructor(t){super({...t,name:"highlightEditor"});C(this,Le);C(this,Hc,null);C(this,qd,0);C(this,is);C(this,Wa,null);C(this,$c,null);C(this,Fn,null);C(this,Xd,null);C(this,Kd,0);C(this,Ga,null);C(this,gi,null);C(this,Qn,null);C(this,Xt,!1);C(this,Vc,null);C(this,rs);C(this,ln,null);C(this,Wc,"");C(this,mi);C(this,Yd,"");this.color=t.color||Ge._defaultColor,A(this,mi,t.thickness||Ge._defaultThickness),A(this,rs,t.opacity||Ge._defaultOpacity),A(this,is,t.boxes||null),A(this,Yd,t.methodOfCreation||""),A(this,Wc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(A(this,Xt,!0),x(this,Le,ng).call(this,t),x(this,Le,Yo).call(this)):c(this,is)&&(A(this,Hc,t.anchorNode),A(this,qd,t.anchorOffset),A(this,Xd,t.focusNode),A(this,Kd,t.focusOffset),x(this,Le,G0).call(this),x(this,Le,Yo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ge.prototype;return Be(this,"_keyboardManager",new uf([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Xt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,mi),methodOfCreation:c(this,Yd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;gt.initialize(t,n),Ge._defaultColor||(Ge._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case je.HIGHLIGHT_DEFAULT_COLOR:Ge._defaultColor=n;break;case je.HIGHLIGHT_THICKNESS:Ge._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,Vc)}updateParams(t,n){switch(t){case je.HIGHLIGHT_COLOR:x(this,Le,ax).call(this,n);break;case je.HIGHLIGHT_THICKNESS:x(this,Le,lx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[je.HIGHLIGHT_DEFAULT_COLOR,Ge._defaultColor],[je.HIGHLIGHT_THICKNESS,Ge._defaultThickness]]}get propertiesToUpdate(){return[[je.HIGHLIGHT_COLOR,this.color||Ge._defaultColor],[je.HIGHLIGHT_THICKNESS,c(this,mi)||Ge._defaultThickness],[je.HIGHLIGHT_FREE,c(this,Xt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(A(this,$c,new bg({editor:this})),t.addColorPicker(c(this,$c))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Le,ph).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,x(this,Le,ph).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){x(this,Le,q0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Le,Yo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?x(this,Le,q0).call(this):t&&(x(this,Le,Yo).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,l,h;const{drawLayer:n}=this.parent;let r;c(this,Xt)?(t=(t-this.rotation+360)%360,r=x(o=Ge,_i,Hl).call(o,c(this,gi).box,t)):r=x(l=Ge,_i,Hl).call(l,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,Qn),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(c(this,ln),{bbox:x(h=Ge,_i,Hl).call(h,c(this,Fn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Wc)&&(t.setAttribute("aria-label",c(this,Wc)),t.setAttribute("role","mark")),c(this,Xt)?t.classList.add("free"):this.div.addEventListener("keydown",x(this,Le,ux).bind(this),{signal:this._uiManager._signal});const n=A(this,Ga,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,Wa);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),wg(this,c(this,Ga),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ln),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ln),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:x(this,Le,ig).call(this,!0);break;case 1:case 3:x(this,Le,ig).call(this,!1);break}}select(){var t;super.select(),c(this,ln)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,ln),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,ln)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,ln),{rootClass:{selected:!1}}),c(this,Xt)||x(this,Le,ig).call(this,!1))}get _mustFixPosition(){return!c(this,Xt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Qn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,ln),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:o,y:l}){const{x:h,y:d,width:p,height:g}=r.getBoundingClientRect(),v=new AbortController,y=t.combinedSignal(v),_=S=>{v.abort(),x(this,_i,px).call(this,t,S)};window.addEventListener("blur",_,{signal:y}),window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("pointerdown",ii,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Gi,{signal:y}),r.addEventListener("pointermove",x(this,_i,fx).bind(this,t),{signal:y}),this._freeHighlight=new H0({x:o,y:l},[h,d,p,g],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var b,k,T,P;let o=null;if(t instanceof zC){const{data:{quadPoints:L,rect:D,rotation:j,id:G,color:V,opacity:Y,popupRef:J},parent:{page:{pageNumber:ue}}}=t;o=t={annotationType:Ne.HIGHLIGHT,color:Array.from(V),opacity:Y,quadPoints:L,boxes:null,pageIndex:ue-1,rect:D.slice(0),rotation:j,id:G,deleted:!1,popupRef:J}}else if(t instanceof $w){const{data:{inkLists:L,rect:D,rotation:j,id:G,color:V,borderStyle:{rawWidth:Y},popupRef:J},parent:{page:{pageNumber:ue}}}=t;o=t={annotationType:Ne.HIGHLIGHT,color:Array.from(V),thickness:Y,inkLists:L,boxes:null,pageIndex:ue-1,rect:D.slice(0),rotation:j,id:G,deleted:!1,popupRef:J}}const{color:l,quadPoints:h,inkLists:d,opacity:p}=t,g=await super.deserialize(t,n,r);g.color=_e.makeHexColor(...l),A(g,rs,p||1),d&&A(g,mi,t.thickness),g.annotationElementId=t.id||null,g._initialData=o;const[v,y]=g.pageDimensions,[_,S]=g.pageTranslation;if(h){const L=A(g,is,[]);for(let D=0;D<h.length;D+=8)L.push({x:(h[D]-_)/v,y:1-(h[D+1]-S)/y,width:(h[D+2]-h[D])/v,height:(h[D+1]-h[D+5])/y});x(b=g,Le,G0).call(b),x(k=g,Le,Yo).call(k),g.rotate(g.rotation)}else if(d){A(g,Xt,!0);const L=d[0],D={x:L[0]-_,y:y-(L[1]-S)},j=new H0(D,[0,0,v,y],1,c(g,mi)/2,!0,.001);for(let Y=0,J=L.length;Y<J;Y+=2)D.x=L[Y]-_,D.y=y-(L[Y+1]-S),j.add(D);const{id:G,clipPathId:V}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);x(T=g,Le,ng).call(T,{highlightOutlines:j.getOutlines(),highlightId:G,clipPathId:V}),x(P=g,Le,Yo).call(P)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=gt._colorManager.convert(this.color),o={annotationType:Ne.HIGHLIGHT,color:r,opacity:c(this,rs),thickness:c(this,mi),quadPoints:x(this,Le,hx).call(this),outlines:x(this,Le,dx).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:x(this,Le,ph).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Le,gx).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Hc=new WeakMap,qd=new WeakMap,is=new WeakMap,Wa=new WeakMap,$c=new WeakMap,Fn=new WeakMap,Xd=new WeakMap,Kd=new WeakMap,Ga=new WeakMap,gi=new WeakMap,Qn=new WeakMap,Xt=new WeakMap,Vc=new WeakMap,rs=new WeakMap,ln=new WeakMap,Wc=new WeakMap,mi=new WeakMap,Yd=new WeakMap,Le=new WeakSet,G0=function(){const t=new j0(c(this,is),.001);A(this,gi,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,gi).box;const n=new j0(c(this,is),.0025,.001,this._uiManager.direction==="ltr");A(this,Fn,n.getOutlines());const{lastPoint:r}=c(this,Fn);A(this,Vc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},ng=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var v,y;if(A(this,gi,t),A(this,Fn,t.getNewOutline(c(this,mi)/2+1.5,.0025)),n>=0)A(this,Qn,n),A(this,Wa,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),A(this,ln,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Fn).box,path:{d:c(this,Fn).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Qn),{bbox:x(v=Ge,_i,Hl).call(v,c(this,gi).box,(_-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,ln),{bbox:x(y=Ge,_i,Hl).call(y,c(this,Fn).box,_),path:{d:c(this,Fn).toSVGPath()}})}const[l,h,d,p]=t.box;switch(this.rotation){case 0:this.x=l,this.y=h,this.width=d,this.height=p;break;case 90:{const[_,S]=this.parentDimensions;this.x=h,this.y=1-l,this.width=d*S/_,this.height=p*_/S;break}case 180:this.x=1-l,this.y=1-h,this.width=d,this.height=p;break;case 270:{const[_,S]=this.parentDimensions;this.x=1-h,this.y=l,this.width=d*S/_,this.height=p*_/S;break}}const{lastPoint:g}=c(this,Fn);A(this,Vc,[(g[0]-l)/d,(g[1]-h)/p])},ax=function(t){const n=(l,h)=>{var d,p;this.color=l,A(this,rs,h),(d=this.parent)==null||d.drawLayer.updateProperties(c(this,Qn),{root:{fill:l,"fill-opacity":h}}),(p=c(this,$c))==null||p.updateColor(l)},r=this.color,o=c(this,rs);this.addCommands({cmd:n.bind(this,t,Ge._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:je.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},lx=function(t){const n=c(this,mi),r=o=>{A(this,mi,o),x(this,Le,cx).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:je.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},cx=function(t){if(!c(this,Xt))return;x(this,Le,ng).call(this,{highlightOutlines:c(this,gi).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},q0=function(){c(this,Qn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Qn)),A(this,Qn,null),this.parent.drawLayer.remove(c(this,ln)),A(this,ln,null))},Yo=function(t=this.parent){c(this,Qn)===null&&({id:gn(this,Qn)._,clipPathId:gn(this,Wa)._}=t.drawLayer.draw({bbox:c(this,gi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,rs)},rootClass:{highlight:!0,free:c(this,Xt)},path:{d:c(this,gi).toSVGPath()}},!1,!0),A(this,ln,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Xt)},bbox:c(this,Fn).box,path:{d:c(this,Fn).toSVGPath()}},c(this,Xt))),c(this,Ga)&&(c(this,Ga).style.clipPath=c(this,Wa)))},_i=new WeakSet,Hl=function([t,n,r,o],l){switch(l){case 90:return[1-n-o,t,o,r];case 180:return[1-t-r,1-n-o,r,o];case 270:return[n,1-t-r,o,r]}return[t,n,r,o]},ux=function(t){Ge._keyboardManager.exec(this,t)},ig=function(t){if(!c(this,Hc))return;const n=window.getSelection();t?n.setPosition(c(this,Hc),c(this,qd)):n.setPosition(c(this,Xd),c(this,Kd))},ph=function(){return c(this,Xt)?this.rotation:0},hx=function(){if(c(this,Xt))return null;const[t,n]=this.pageDimensions,[r,o]=this.pageTranslation,l=c(this,is),h=new Float32Array(l.length*8);let d=0;for(const{x:p,y:g,width:v,height:y}of l){const _=p*t+r,S=(1-g)*n+o;h[d]=h[d+4]=_,h[d+1]=h[d+3]=S,h[d+2]=h[d+6]=_+v*t,h[d+5]=h[d+7]=S-y*n,d+=8}return h},dx=function(t){return c(this,gi).serialize(t,x(this,Le,ph).call(this))},fx=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},px=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},gx=function(t){const{color:n}=this._initialData;return t.color.some((r,o)=>r!==n[o])},C(Ge,_i),xe(Ge,"_defaultColor",null),xe(Ge,"_defaultOpacity",1),xe(Ge,"_defaultThickness",12),xe(Ge,"_type","highlight"),xe(Ge,"_editorType",Ne.HIGHLIGHT),xe(Ge,"_freeHighlightId",-1),xe(Ge,"_freeHighlight",null),xe(Ge,"_freeHighlightClipId","");let Eg=Ge;var qa;class nD{constructor(){C(this,qa,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,qa)[e]=t}toSVGProperties(){const e=c(this,qa);return A(this,qa,Object.create(null)),{root:e}}reset(){A(this,qa,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){et("Not implemented")}}qa=new WeakMap;var Jn,Gc,jt,Xa,Ka,vo,yo,wo,Ya,$e,K0,Y0,Q0,gh,mx,rg,mh,$l;const pe=class pe extends gt{constructor(t){super(t);C(this,$e);C(this,Jn,null);C(this,Gc);xe(this,"_drawId",null);A(this,Gc,t.mustBeCommitted||!1),t.drawOutlines&&(x(this,$e,K0).call(this,t),x(this,$e,gh).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[o,l]of Object.entries(n))r.has(o)?Object.assign(t[o],l):t[o]=l;return t}static getDefaultDrawingOptions(t){et("Not implemented")}static get typesMap(){et("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(c(pe,jt).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)t.push([r,n[o]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,o]of this.constructor.typesMap)t.push([r,n[o]]);return t}_updateProperty(t,n,r){const o=this._drawingOptions,l=o[n],h=d=>{var g;o.updateProperty(n,d);const p=c(this,Jn).updateProperty(n,d);p&&x(this,$e,mh).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,pe._mergeSVGProperties(c(this,Jn).getPathResizingSVGProperties(x(this,$e,rg).call(this)),{bbox:x(this,$e,$l).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,pe._mergeSVGProperties(c(this,Jn).getPathResizedSVGProperties(x(this,$e,rg).call(this)),{bbox:x(this,$e,$l).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:x(this,$e,$l).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,pe._mergeSVGProperties(c(this,Jn).getPathTranslatedSVGProperties(x(this,$e,rg).call(this),this.parentDimensions),{bbox:x(this,$e,$l).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Gc)&&(A(this,Gc,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){x(this,$e,Q0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,$e,gh).call(this),x(this,$e,mh).call(this,c(this,Jn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),x(this,$e,Q0).call(this)):t&&(this._uiManager.addShouldRescale(this),x(this,$e,gh).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,pe._mergeSVGProperties({bbox:x(this,$e,$l).call(this)},c(this,Jn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,$e,mh).call(this,c(this,Jn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,r,o,l){et("Not implemented")}static startDrawing(t,n,r,o){var k;const{target:l,offsetX:h,offsetY:d,pointerId:p,pointerType:g}=o;if(c(pe,yo)&&c(pe,yo)!==g)return;const{viewport:{rotation:v}}=t,{width:y,height:_}=l.getBoundingClientRect(),S=A(pe,Xa,new AbortController),b=t.combinedSignal(S);if(c(pe,vo)||A(pe,vo,p),c(pe,yo)??A(pe,yo,g),window.addEventListener("pointerup",T=>{var P;c(pe,vo)===T.pointerId?this._endDraw(T):(P=c(pe,wo))==null||P.delete(T.pointerId)},{signal:b}),window.addEventListener("pointercancel",T=>{var P;c(pe,vo)===T.pointerId?this._currentParent.endDrawingSession():(P=c(pe,wo))==null||P.delete(T.pointerId)},{signal:b}),window.addEventListener("pointerdown",T=>{c(pe,yo)===T.pointerType&&((c(pe,wo)||A(pe,wo,new Set)).add(T.pointerId),c(pe,jt).isCancellable()&&(c(pe,jt).removeLastElement(),c(pe,jt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Gi,{signal:b}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),l.addEventListener("touchmove",T=>{T.timeStamp===c(pe,Ya)&&ii(T)},{signal:b}),t.toggleDrawing(),(k=n._editorUndoBar)==null||k.hide(),c(pe,jt)){t.drawLayer.updateProperties(this._currentDrawId,c(pe,jt).startNew(h,d,y,_,v));return}n.updateUIForDefaultProperties(this),A(pe,jt,this.createDrawerInstance(h,d,y,_,v)),A(pe,Ka,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(pe,Ka).toSVGProperties(),c(pe,jt).defaultSVGProperties),!0,!1)}static _drawMove(t){var l;if(A(pe,Ya,-1),!c(pe,jt))return;const{offsetX:n,offsetY:r,pointerId:o}=t;if(c(pe,vo)===o){if(((l=c(pe,wo))==null?void 0:l.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(pe,jt).add(n,r)),A(pe,Ya,t.timeStamp),ii(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,A(pe,jt,null),A(pe,Ka,null),A(pe,yo,null),A(pe,Ya,NaN)),c(pe,Xa)&&(c(pe,Xa).abort(),A(pe,Xa,null),A(pe,vo,NaN),A(pe,wo,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,c(pe,jt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(pe,jt),o=this._currentDrawId,l=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,r.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:je.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(je.DRAW_STEP),!c(pe,jt).isEmpty()){const{pageDimensions:[r,o],scale:l}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(pe,jt).getOutlines(r*l,o*l,l,this._INNER_MARGIN),drawingOptions:c(pe,Ka),mustBeCommitted:!t});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,o,l,h){et("Not implemented")}static async deserialize(t,n,r){var v,y;const{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}=n.viewport,p=this.deserializeDraw(h,d,o,l,this._INNER_MARGIN,t),g=await super.deserialize(t,n,r);return g.createDrawingOptions(t),x(v=g,$e,K0).call(v,{drawOutlines:p}),x(y=g,$e,gh).call(y),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[n,r]=this.pageTranslation,[o,l]=this.pageDimensions;return c(this,Jn).serialize([n,r,o,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Jn=new WeakMap,Gc=new WeakMap,jt=new WeakMap,Xa=new WeakMap,Ka=new WeakMap,vo=new WeakMap,yo=new WeakMap,wo=new WeakMap,Ya=new WeakMap,$e=new WeakSet,K0=function({drawOutlines:t,drawId:n,drawingOptions:r}){A(this,Jn,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=x(this,$e,Y0).call(this,t,this.parent),x(this,$e,mh).call(this,t.box)},Y0=function(t,n){const{id:r}=n.drawLayer.draw(pe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Q0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},gh=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,$e,Y0).call(this,c(this,Jn),t)}},mx=function([t,n,r,o]){const{parentDimensions:[l,h],rotation:d}=this;switch(d){case 90:return[n,1-t,r*(h/l),o*(l/h)];case 180:return[1-t,1-n,r,o];case 270:return[1-n,t,r*(h/l),o*(l/h)];default:return[t,n,r,o]}},rg=function(){const{x:t,y:n,width:r,height:o,parentDimensions:[l,h],rotation:d}=this;switch(d){case 90:return[1-n,t,r*(l/h),o*(h/l)];case 180:return[1-t,1-n,r,o];case 270:return[n,1-t,r*(l/h),o*(h/l)];default:return[t,n,r,o]}},mh=function(t){if([this.x,this.y,this.width,this.height]=x(this,$e,mx).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},$l=function(){const{x:t,y:n,width:r,height:o,rotation:l,parentRotation:h,parentDimensions:[d,p]}=this;switch((l*4+h)/90){case 1:return[1-n-o,t,o,r];case 2:return[1-t-r,1-n-o,r,o];case 3:return[n,1-t-r,o,r];case 4:return[t,n-r*(d/p),o*(p/d),r*(d/p)];case 5:return[1-n,t,r*(d/p),o*(p/d)];case 6:return[1-t-o*(p/d),1-n,o*(p/d),r*(d/p)];case 7:return[n-r*(d/p),1-t-o*(p/d),r*(d/p),o*(p/d)];case 8:return[t-r,n-o,r,o];case 9:return[1-n,t-r,o,r];case 10:return[1-t,1-n,r,o];case 11:return[n-o,1-t,o,r];case 12:return[t-o*(p/d),n,o*(p/d),r*(d/p)];case 13:return[1-n-r*(d/p),t-o*(p/d),r*(d/p),o*(p/d)];case 14:return[1-t,1-n-r*(d/p),o*(p/d),r*(d/p)];case 15:return[n,1-t,r*(d/p),o*(p/d)];default:return[t,n,r,o]}},xe(pe,"_currentDrawId",-1),xe(pe,"_currentParent",null),C(pe,jt,null),C(pe,Xa,null),C(pe,Ka,null),C(pe,vo,NaN),C(pe,yo,null),C(pe,wo,null),C(pe,Ya,NaN),xe(pe,"_INNER_MARGIN",3);let X0=pe;var pr,zt,Ht,Qa,qc,yn,Kt,vi,Ja,Za,el,Xc,sg;class iD{constructor(e,t,n,r,o,l){C(this,Xc);C(this,pr,new Float64Array(6));C(this,zt);C(this,Ht);C(this,Qa);C(this,qc);C(this,yn);C(this,Kt,"");C(this,vi,0);C(this,Ja,new Cg);C(this,Za);C(this,el);A(this,Za,n),A(this,el,r),A(this,Qa,o),A(this,qc,l),[e,t]=x(this,Xc,sg).call(this,e,t);const h=A(this,zt,[NaN,NaN,NaN,NaN,e,t]);A(this,yn,[e,t]),A(this,Ht,[{line:h,points:c(this,yn)}]),c(this,pr).set(h,0)}updateProperty(e,t){e==="stroke-width"&&A(this,qc,t)}isEmpty(){return!c(this,Ht)||c(this,Ht).length===0}isCancellable(){return c(this,yn).length<=10}add(e,t){[e,t]=x(this,Xc,sg).call(this,e,t);const[n,r,o,l]=c(this,pr).subarray(2,6),h=e-o,d=t-l;return Math.hypot(c(this,Za)*h,c(this,el)*d)<=2?null:(c(this,yn).push(e,t),isNaN(n)?(c(this,pr).set([o,l,e,t],2),c(this,zt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,pr)[0])&&c(this,zt).splice(6,6),c(this,pr).set([n,r,o,l,e,t],0),c(this,zt).push(...de.createBezierPoints(n,r,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,yn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,o){A(this,Za,n),A(this,el,r),A(this,Qa,o),[e,t]=x(this,Xc,sg).call(this,e,t);const l=A(this,zt,[NaN,NaN,NaN,NaN,e,t]);A(this,yn,[e,t]);const h=c(this,Ht).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),c(this,Ht).push({line:l,points:c(this,yn)}),c(this,pr).set(l,0),A(this,vi,0),this.toSVGPath(),null}getLastElement(){return c(this,Ht).at(-1)}setLastElement(e){return c(this,Ht)?(c(this,Ht).push(e),A(this,zt,e.line),A(this,yn,e.points),A(this,vi,0),{path:{d:this.toSVGPath()}}):c(this,Ja).setLastElement(e)}removeLastElement(){if(!c(this,Ht))return c(this,Ja).removeLastElement();c(this,Ht).pop(),A(this,Kt,"");for(let e=0,t=c(this,Ht).length;e<t;e++){const{line:n,points:r}=c(this,Ht)[e];A(this,zt,n),A(this,yn,r),A(this,vi,0),this.toSVGPath()}return{path:{d:c(this,Kt)}}}toSVGPath(){const e=de.svgRound(c(this,zt)[4]),t=de.svgRound(c(this,zt)[5]);if(c(this,yn).length===2)return A(this,Kt,`${c(this,Kt)} M ${e} ${t} Z`),c(this,Kt);if(c(this,yn).length<=6){const r=c(this,Kt).lastIndexOf("M");A(this,Kt,`${c(this,Kt).slice(0,r)} M ${e} ${t}`),A(this,vi,6)}if(c(this,yn).length===4){const r=de.svgRound(c(this,zt)[10]),o=de.svgRound(c(this,zt)[11]);return A(this,Kt,`${c(this,Kt)} L ${r} ${o}`),A(this,vi,12),c(this,Kt)}const n=[];c(this,vi)===0&&(n.push(`M ${e} ${t}`),A(this,vi,6));for(let r=c(this,vi),o=c(this,zt).length;r<o;r+=6){const[l,h,d,p,g,v]=c(this,zt).slice(r,r+6).map(de.svgRound);n.push(`C${l} ${h} ${d} ${p} ${g} ${v}`)}return A(this,Kt,c(this,Kt)+n.join(" ")),A(this,vi,c(this,zt).length),c(this,Kt)}getOutlines(e,t,n,r){const o=c(this,Ht).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,Ja).build(c(this,Ht),e,t,n,c(this,Qa),c(this,qc),r),A(this,pr,null),A(this,zt,null),A(this,Ht,null),A(this,Kt,null),c(this,Ja)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}pr=new WeakMap,zt=new WeakMap,Ht=new WeakMap,Qa=new WeakMap,qc=new WeakMap,yn=new WeakMap,Kt=new WeakMap,vi=new WeakMap,Ja=new WeakMap,Za=new WeakMap,el=new WeakMap,Xc=new WeakSet,sg=function(e,t){return de._normalizePoint(e,t,c(this,Za),c(this,el),c(this,Qa))};var wn,Qd,Jd,Zn,gr,mr,Kc,Yc,Qc,Qt,Dr,vx,yx,wx;const Xw=class Xw extends de{constructor(){super(...arguments);C(this,Qt);C(this,wn);C(this,Qd,0);C(this,Jd);C(this,Zn);C(this,gr);C(this,mr);C(this,Kc);C(this,Yc);C(this,Qc)}build(t,n,r,o,l,h,d){A(this,gr,n),A(this,mr,r),A(this,Kc,o),A(this,Yc,l),A(this,Qc,h),A(this,Jd,d??0),A(this,Zn,t),x(this,Qt,yx).call(this)}setLastElement(t){return c(this,Zn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,Zn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,Zn)){if(t.push(`M${de.svgRound(n[4])} ${de.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${de.svgRound(n[10])} ${de.svgRound(n[11])}`);continue}for(let r=6,o=n.length;r<o;r+=6){const[l,h,d,p,g,v]=n.subarray(r,r+6).map(de.svgRound);t.push(`C${l} ${h} ${d} ${p} ${g} ${v}`)}}return t.join("")}serialize([t,n,r,o],l){const h=[],d=[],[p,g,v,y]=x(this,Qt,vx).call(this);let _,S,b,k,T,P,L,D,j;switch(c(this,Yc)){case 0:j=de._rescale,_=t,S=n+o,b=r,k=-o,T=t+p*r,P=n+(1-g-y)*o,L=t+(p+v)*r,D=n+(1-g)*o;break;case 90:j=de._rescaleAndSwap,_=t,S=n,b=r,k=o,T=t+g*r,P=n+p*o,L=t+(g+y)*r,D=n+(p+v)*o;break;case 180:j=de._rescale,_=t+r,S=n,b=-r,k=o,T=t+(1-p-v)*r,P=n+g*o,L=t+(1-p)*r,D=n+(g+y)*o;break;case 270:j=de._rescaleAndSwap,_=t+r,S=n+o,b=-r,k=-o,T=t+(1-g-y)*r,P=n+(1-p-v)*o,L=t+(1-g)*r,D=n+(1-p)*o;break}for(const{line:G,points:V}of c(this,Zn))h.push(j(G,_,S,b,k,l?new Array(G.length):null)),d.push(j(V,_,S,b,k,l?new Array(V.length):null));return{lines:h,points:d,rect:[T,P,L,D]}}static deserialize(t,n,r,o,l,{paths:{lines:h,points:d},rotation:p,thickness:g}){const v=[];let y,_,S,b,k;switch(p){case 0:k=de._rescale,y=-t/r,_=n/o+1,S=1/r,b=-1/o;break;case 90:k=de._rescaleAndSwap,y=-n/o,_=-t/r,S=1/o,b=1/r;break;case 180:k=de._rescale,y=t/r+1,_=-n/o,S=-1/r,b=1/o;break;case 270:k=de._rescaleAndSwap,y=n/o+1,_=t/r+1,S=-1/o,b=-1/r;break}if(!h){h=[];for(const P of d){const L=P.length;if(L===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1]]));continue}if(L===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1],NaN,NaN,NaN,NaN,P[2],P[3]]));continue}const D=new Float32Array(3*(L-2));h.push(D);let[j,G,V,Y]=P.subarray(0,4);D.set([NaN,NaN,NaN,NaN,j,G],0);for(let J=4;J<L;J+=2){const ue=P[J],ae=P[J+1];D.set(de.createBezierPoints(j,G,V,Y,ue,ae),(J-2)*3),[j,G,V,Y]=[V,Y,ue,ae]}}}for(let P=0,L=h.length;P<L;P++)v.push({line:k(h[P].map(D=>D??NaN),y,_,S,b),points:k(d[P].map(D=>D??NaN),y,_,S,b)});const T=new Xw;return T.build(v,r,o,1,p,g,l),T}get box(){return c(this,wn)}updateProperty(t,n){return t==="stroke-width"?x(this,Qt,wx).call(this,n):null}updateParentDimensions([t,n],r){const[o,l]=x(this,Qt,Dr).call(this);A(this,gr,t),A(this,mr,n),A(this,Kc,r);const[h,d]=x(this,Qt,Dr).call(this),p=h-o,g=d-l,v=c(this,wn);return v[0]-=p,v[1]-=g,v[2]+=2*p,v[3]+=2*g,v}updateRotation(t){return A(this,Qd,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,wn).map(de.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,wn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(t)} ${de.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,wn);let r=0,o=0,l=0,h=0,d=0,p=0;switch(c(this,Qd)){case 90:o=n/t,l=-t/n,d=t;break;case 180:r=-1,h=-1,d=t,p=n;break;case 270:o=-n/t,l=t/n,p=n;break;default:return""}return`matrix(${r} ${o} ${l} ${h} ${de.svgRound(d)} ${de.svgRound(p)})`}getPathResizingSVGProperties([t,n,r,o]){const[l,h]=x(this,Qt,Dr).call(this),[d,p,g,v]=c(this,wn);if(Math.abs(g-l)<=de.PRECISION||Math.abs(v-h)<=de.PRECISION){const k=t+r/2-(d+g/2),T=n+o/2-(p+v/2);return{path:{"transform-origin":`${de.svgRound(t)} ${de.svgRound(n)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const y=(r-2*l)/(g-2*l),_=(o-2*h)/(v-2*h),S=g/r,b=v/o;return{path:{"transform-origin":`${de.svgRound(d)} ${de.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${b}) translate(${de.svgRound(l)} ${de.svgRound(h)}) scale(${y} ${_}) translate(${de.svgRound(-l)} ${de.svgRound(-h)})`}}}getPathResizedSVGProperties([t,n,r,o]){const[l,h]=x(this,Qt,Dr).call(this),d=c(this,wn),[p,g,v,y]=d;if(d[0]=t,d[1]=n,d[2]=r,d[3]=o,Math.abs(v-l)<=de.PRECISION||Math.abs(y-h)<=de.PRECISION){const T=t+r/2-(p+v/2),P=n+o/2-(g+y/2);for(const{line:L,points:D}of c(this,Zn))de._translate(L,T,P,L),de._translate(D,T,P,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(t)} ${de.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _=(r-2*l)/(v-2*l),S=(o-2*h)/(y-2*h),b=-_*(p+l)+t+l,k=-S*(g+h)+n+h;if(_!==1||S!==1||b!==0||k!==0)for(const{line:T,points:P}of c(this,Zn))de._rescale(T,b,k,_,S,T),de._rescale(P,b,k,_,S,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${de.svgRound(t)} ${de.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[o,l]=r,h=c(this,wn),d=t-h[0],p=n-h[1];if(c(this,gr)===o&&c(this,mr)===l)for(const{line:g,points:v}of c(this,Zn))de._translate(g,d,p,g),de._translate(v,d,p,v);else{const g=c(this,gr)/o,v=c(this,mr)/l;A(this,gr,o),A(this,mr,l);for(const{line:y,points:_}of c(this,Zn))de._rescale(y,d,p,g,v,y),de._rescale(_,d,p,g,v,_);h[2]*=g,h[3]*=v}return h[0]=t,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(t)} ${de.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,wn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${de.svgRound(t[0])} ${de.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};wn=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Zn=new WeakMap,gr=new WeakMap,mr=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Qt=new WeakSet,Dr=function(t=c(this,Qc)){const n=c(this,Jd)+t/2*c(this,Kc);return c(this,Yc)%180===0?[n/c(this,gr),n/c(this,mr)]:[n/c(this,mr),n/c(this,gr)]},vx=function(){const[t,n,r,o]=c(this,wn),[l,h]=x(this,Qt,Dr).call(this,0);return[t+l,n+h,r-2*l,o-2*h]},yx=function(){const t=A(this,wn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,Zn)){if(o.length<=12){for(let d=4,p=o.length;d<p;d+=6){const[g,v]=o.subarray(d,d+2);t[0]=Math.min(t[0],g),t[1]=Math.min(t[1],v),t[2]=Math.max(t[2],g),t[3]=Math.max(t[3],v)}continue}let l=o[4],h=o[5];for(let d=6,p=o.length;d<p;d+=6){const[g,v,y,_,S,b]=o.subarray(d,d+6);_e.bezierBoundingBox(l,h,g,v,y,_,S,b,t),l=S,h=b}}const[n,r]=x(this,Qt,Dr).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},wx=function(t){const[n,r]=x(this,Qt,Dr).call(this);A(this,Qc,t);const[o,l]=x(this,Qt,Dr).call(this),[h,d]=[o-n,l-r],p=c(this,wn);return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p};let Cg=Xw;var Jc;const Kw=class Kw extends nD{constructor(t){super();C(this,Jc);A(this,Jc,t),super.updateProperties({fill:"none",stroke:gt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=c(this,Jc).realScale),super.updateSVGProperty(t,n)}clone(){const t=new Kw(c(this,Jc));return t.updateAll(this),t}};Jc=new WeakMap;let J0=Kw;var $g,_x;const Wl=class Wl extends X0{constructor(t){super({...t,name:"inkEditor"});C(this,$g);this._willKeepAspectRatio=!0}static initialize(t,n){gt.initialize(t,n),this._defaultDrawingOptions=new J0(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Be(this,"typesMap",new Map([[je.INK_THICKNESS,"stroke-width"],[je.INK_COLOR,"stroke"],[je.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,o,l){return new iD(t,n,r,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,o,l,h){return Cg.deserialize(t,n,r,o,l,h)}static async deserialize(t,n,r){let o=null;if(t instanceof $w){const{data:{inkLists:h,rect:d,rotation:p,id:g,color:v,opacity:y,borderStyle:{rawWidth:_},popupRef:S},parent:{page:{pageNumber:b}}}=t;o=t={annotationType:Ne.INK,color:Array.from(v),thickness:_,opacity:y,paths:{points:h},boxes:null,pageIndex:b-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:S}}const l=await super.deserialize(t,n,r);return l.annotationElementId=t.id||null,l._initialData=o,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=Wl.getDefaultDrawingOptions({stroke:_e.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:o}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":h,"stroke-width":d}}=this,p={annotationType:Ne.INK,color:gt._colorManager.convert(l),opacity:h,thickness:d,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?p:this.annotationElementId&&!x(this,$g,_x).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};$g=new WeakSet,_x=function(t){const{color:n,thickness:r,opacity:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((h,d)=>h!==n[d])||t.thickness!==r||t.opacity!==o||t.pageIndex!==l},xe(Wl,"_type","ink"),xe(Wl,"_editorType",Ne.INK),xe(Wl,"_defaultDrawingOptions",null);let Z0=Wl;var pt,Yt,_o,ss,Ao,Zc,vr,yr,ei,eu,We,vh,yh,og,tw,ag,nw,lg,Ax;const Ah=class Ah extends gt{constructor(t){super({...t,name:"stampEditor"});C(this,We);C(this,pt,null);C(this,Yt,null);C(this,_o,null);C(this,ss,null);C(this,Ao,null);C(this,Zc,"");C(this,vr,null);C(this,yr,null);C(this,ei,!1);C(this,eu,!1);A(this,ss,t.bitmapUrl),A(this,Ao,t.bitmapFile)}static initialize(t,n){gt.initialize(t,n)}static get supportedTypes(){return Be(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Be(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Ne.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:h}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:o,width:l,height:h,channels:o.length/(l*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t;c(this,Yt)&&(A(this,pt,null),this._uiManager.imageManager.deleteId(c(this,Yt)),(t=c(this,vr))==null||t.remove(),A(this,vr,null),c(this,yr)&&(clearTimeout(c(this,yr)),A(this,yr,null))),super.remove()}rebuild(){if(!this.parent){c(this,Yt)&&x(this,We,og).call(this);return}super.rebuild(),this.div!==null&&(c(this,Yt)&&c(this,vr)===null&&x(this,We,og).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,_o)||c(this,pt)||c(this,ss)||c(this,Ao)||c(this,Yt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,pt)?x(this,We,tw).call(this):x(this,We,og).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,n*o,this.width*r,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,yr)!==null&&clearTimeout(c(this,yr)),A(this,yr,setTimeout(()=>{A(this,yr,null),x(this,We,nw).call(this)},200))}copyCanvas(t,n,r=!1){var _;t||(t=224);const{width:o,height:l}=c(this,pt),h=new Jy;let d=c(this,pt),p=o,g=l,v=null;if(n){if(o>n||l>n){const Y=Math.min(n/o,n/l);p=Math.floor(o*Y),g=Math.floor(l*Y)}v=document.createElement("canvas");const S=v.width=Math.ceil(p*h.sx),b=v.height=Math.ceil(g*h.sy);c(this,ei)||(d=x(this,We,ag).call(this,S,b));const k=v.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",P="#42414d");const L=15,D=L*h.sx,j=L*h.sy,G=new OffscreenCanvas(D*2,j*2),V=G.getContext("2d");V.fillStyle=T,V.fillRect(0,0,D*2,j*2),V.fillStyle=P,V.fillRect(0,0,D,j),V.fillRect(D,j,D,j),k.fillStyle=k.createPattern(G,"repeat"),k.fillRect(0,0,S,b),k.drawImage(d,0,0,d.width,d.height,0,0,S,b)}let y=null;if(r){let S,b;if(h.symmetric&&d.width<t&&d.height<t)S=d.width,b=d.height;else if(d=c(this,pt),o>t||l>t){const P=Math.min(t/o,t/l);S=Math.floor(o*P),b=Math.floor(l*P),c(this,ei)||(d=x(this,We,ag).call(this,S,b))}const T=new OffscreenCanvas(S,b).getContext("2d",{willReadFrequently:!0});T.drawImage(d,0,0,d.width,d.height,0,0,S,b),y={width:S,height:b,data:T.getImageData(0,0,S,b).data}}return{canvas:v,width:p,height:g,imageData:y}}getImageForAltText(){return c(this,vr)}static async deserialize(t,n,r){var b;let o=null;if(t instanceof HC){const{data:{rect:k,rotation:T,id:P,structParent:L,popupRef:D},container:j,parent:{page:{pageNumber:G}}}=t,V=j.querySelector("canvas"),Y=r.imageManager.getFromCanvas(j.id,V);V.remove();const J=((b=await n._structTree.getAriaAttributes(`${Dw}${P}`))==null?void 0:b.get("aria-label"))||"";o=t={annotationType:Ne.STAMP,bitmapId:Y.id,bitmap:Y.bitmap,pageIndex:G-1,rect:k.slice(0),rotation:T,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:J},isSvg:!1,structParent:L,popupRef:D}}const l=await super.deserialize(t,n,r),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:v,accessibilityData:y}=t;g&&r.imageManager.isValidId(g)?(A(l,Yt,g),d&&A(l,pt,d)):A(l,ss,p),A(l,ei,v);const[_,S]=l.pageDimensions;return l.width=(h[2]-h[0])/_,l.height=(h[3]-h[1])/S,l.annotationElementId=t.id||null,y&&(l.altTextData=y),l._initialData=o,A(l,eu,!!o),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Ne.STAMP,bitmapId:c(this,Yt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,ei),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=x(this,We,lg).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(r.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=x(this,We,Ax).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const h=c(this,ei)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(c(this,Yt)))n.stamps.set(c(this,Yt),{area:h,serialized:r}),r.bitmap=x(this,We,lg).call(this,!1);else if(c(this,ei)){const d=n.stamps.get(c(this,Yt));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=x(this,We,lg).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};pt=new WeakMap,Yt=new WeakMap,_o=new WeakMap,ss=new WeakMap,Ao=new WeakMap,Zc=new WeakMap,vr=new WeakMap,yr=new WeakMap,ei=new WeakMap,eu=new WeakMap,We=new WeakSet,vh=function(t,n=!1){if(!t){this.remove();return}A(this,pt,t.bitmap),n||(A(this,Yt,t.id),A(this,ei,t.isSvg)),t.file&&A(this,Zc,t.file.name),x(this,We,tw).call(this)},yh=function(){if(A(this,_o,null),this._uiManager.enableWaiting(!1),!!c(this,vr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,pt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,pt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},og=function(){if(c(this,Yt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Yt)).then(r=>x(this,We,vh).call(this,r,!0)).finally(()=>x(this,We,yh).call(this));return}if(c(this,ss)){const r=c(this,ss);A(this,ss,null),this._uiManager.enableWaiting(!0),A(this,_o,this._uiManager.imageManager.getFromUrl(r).then(o=>x(this,We,vh).call(this,o)).finally(()=>x(this,We,yh).call(this)));return}if(c(this,Ao)){const r=c(this,Ao);A(this,Ao,null),this._uiManager.enableWaiting(!0),A(this,_o,this._uiManager.imageManager.getFromFile(r).then(o=>x(this,We,vh).call(this,o)).finally(()=>x(this,We,yh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ah.supportedTypesStr;const n=this._uiManager._signal;A(this,_o,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,We,vh).call(this,o)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>x(this,We,yh).call(this))),t.click()},tw=function(){var v;const{div:t}=this;let{width:n,height:r}=c(this,pt);const[o,l]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,r=this.height*l;else if(n>h*o||r>h*l){const y=Math.min(h*o/n,h*l/r);n*=y,r*=y}const[d,p]=this.parentDimensions;this.setDims(n*d/o,r*p/l),this._uiManager.enableWaiting(!1);const g=A(this,vr,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/o,this.height=r/l,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),x(this,We,nw).call(this),c(this,eu)||(this.parent.addUndoableEditor(this),A(this,eu,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Zc)&&g.setAttribute("aria-label",c(this,Zc))},ag=function(t,n){const{width:r,height:o}=c(this,pt);let l=r,h=o,d=c(this,pt);for(;l>2*t||h>2*n;){const p=l,g=h;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const v=new OffscreenCanvas(l,h);v.getContext("2d").drawImage(d,0,0,p,g,0,0,l,h),d=v.transferToImageBitmap()}return d},nw=function(){const[t,n]=this.parentDimensions,{width:r,height:o}=this,l=new Jy,h=Math.ceil(r*t*l.sx),d=Math.ceil(o*n*l.sy),p=c(this,vr);if(!p||p.width===h&&p.height===d)return;p.width=h,p.height=d;const g=c(this,ei)?c(this,pt):x(this,We,ag).call(this,h,d),v=p.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(g,0,0,g.width,g.height,0,0,h,d)},lg=function(t){if(t){if(c(this,ei)){const o=this._uiManager.imageManager.getSvgUrl(c(this,Yt));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,pt),n.getContext("2d").drawImage(c(this,pt),0,0),n.toDataURL()}if(c(this,ei)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*Ro.PDF_TO_CSS_UNITS),l=Math.round(this.height*r*Ro.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,l);return h.getContext("2d").drawImage(c(this,pt),0,0,c(this,pt).width,c(this,pt).height,0,0,o,l),h.transferToImageBitmap()}return structuredClone(c(this,pt))},Ax=function(t){var h;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,o=t.pageIndex===n,l=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},xe(Ah,"_type","stamp"),xe(Ah,"_editorType",Ne.STAMP);let ew=Ah;var tl,tu,wr,So,os,yi,bo,nu,nl,zi,as,cn,ls,we,Eo,ct,Sx,nr,rw,sw,cg;const Ii=class Ii{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:p,l10n:g}){C(this,ct);C(this,tl);C(this,tu,!1);C(this,wr,null);C(this,So,null);C(this,os,null);C(this,yi,new Map);C(this,bo,!1);C(this,nu,!1);C(this,nl,!1);C(this,zi,null);C(this,as,null);C(this,cn,null);C(this,ls,null);C(this,we);const v=[...c(Ii,Eo).values()];if(!Ii._initialized){Ii._initialized=!0;for(const y of v)y.initialize(g,e)}e.registerEditorTypes(v),A(this,we,e),this.pageIndex=t,this.div=n,A(this,tl,o),A(this,wr,l),this.viewport=p,A(this,cn,d),this.drawLayer=h,this._structTree=r,c(this,we).addLayer(this)}get isEmpty(){return c(this,yi).size===0}get isInvisible(){return this.isEmpty&&c(this,we).getMode()===Ne.NONE}updateToolbar(e){c(this,we).updateToolbar(e)}updateMode(e=c(this,we).getMode()){switch(x(this,ct,cg).call(this),e){case Ne.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of c(Ii,Eo).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,cn))==null?void 0:t.div)}setEditingState(e){c(this,we).setEditingState(e)}addCommands(e){c(this,we).addCommands(e)}cleanUndoStack(e){c(this,we).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,wr))==null||t.div.classList.toggle("disabled",!e)}async enable(){A(this,nl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of c(this,yi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,we).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(this,wr)){A(this,nl,!1);return}const t=c(this,wr).getEditableAnnotations();for(const n of t){if(n.hide(),c(this,we).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,nl,!1)}disable(){var r;A(this,nu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of c(this,yi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(c(this,wr)){const o=c(this,wr).getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(c(this,we).isDeletedAnnotationElement(h))continue;let d=t.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=e.get(h),d&&(c(this,we).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}x(this,ct,cg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(Ii,Eo).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,nu,!1)}getEditableAnnotation(e){var t;return((t=c(this,wr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,we).getActive()!==e&&c(this,we).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,cn))!=null&&e.div&&!c(this,ls)){A(this,ls,new AbortController);const t=c(this,we).combinedSignal(c(this,ls));c(this,cn).div.addEventListener("pointerdown",x(this,ct,Sx).bind(this),{signal:t}),c(this,cn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,cn))!=null&&e.div&&c(this,ls)&&(c(this,ls).abort(),A(this,ls,null),c(this,cn).div.classList.remove("highlighting"))}enableClick(){if(c(this,So))return;A(this,So,new AbortController);const e=c(this,we).combinedSignal(c(this,So));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,So))==null||e.abort(),A(this,So,null)}attach(e){c(this,yi).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,we).isDeletedAnnotationElement(t)&&c(this,we).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,yi).delete(e.id),(t=c(this,tl))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,nu)&&e.annotationElementId&&c(this,we).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,we).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,we).addDeletedAnnotationElement(e.annotationElementId),gt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,we).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,nl)),c(this,we).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,os)&&(e._focusEventsAllowed=!1,A(this,os,setTimeout(()=>{A(this,os,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,we)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,tl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return c(this,we).getId()}combinedSignal(e){return c(this,we).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,ct,nr))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,we).updateToolbar(e),c(this,we).updateMode(e);const{offsetX:n,offsetY:r}=x(this,ct,sw).call(this),o=this.getNextId(),l=x(this,ct,rw).call(this,{parent:this,id:o,x:n,y:r,uiManager:c(this,we),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=c(Ii,Eo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,we)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),o=x(this,ct,rw).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,we),isCentered:t,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(x(this,ct,sw).call(this),!0)}setSelected(e){c(this,we).setSelected(e)}toggleSelected(e){c(this,we).toggleSelected(e)}unselect(e){c(this,we).unselect(e)}pointerup(e){var n;const{isMac:t}=An.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,bo)&&(A(this,bo,!1),!((n=c(this,ct,nr))!=null&&n.isDrawer&&c(this,ct,nr).supportMultipleDrawings))){if(!c(this,tu)){A(this,tu,!0);return}if(c(this,we).getMode()===Ne.STAMP){c(this,we).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(c(this,we).getMode()===Ne.HIGHLIGHT&&this.enableTextSelection(),c(this,bo)){A(this,bo,!1);return}const{isMac:t}=An.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(A(this,bo,!0),(r=c(this,ct,nr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=c(this,we).getActive();A(this,tu,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),c(this,zi)){c(this,ct,nr).startDrawing(this,c(this,we),!1,e);return}c(this,we).setCurrentDrawingSession(this),A(this,zi,new AbortController);const t=c(this,we).combinedSignal(c(this,zi));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,as,null),this.commitOrRemove())},{signal:t}),c(this,ct,nr).startDrawing(this,c(this,we),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&A(this,as,t);return}c(this,as)&&setTimeout(()=>{var t;(t=c(this,as))==null||t.focus(),A(this,as,null)},0)}endDrawingSession(e=!1){return c(this,zi)?(c(this,we).setCurrentDrawingSession(null),c(this,zi).abort(),A(this,zi,null),A(this,as,null),c(this,ct,nr).endDrawing(e)):null}findNewParent(e,t,n){const r=c(this,we).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,zi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,zi)&&c(this,ct,nr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,we).getActive())==null?void 0:e.parent)===this&&(c(this,we).commitOrRemove(),c(this,we).setActiveEditor(null)),c(this,os)&&(clearTimeout(c(this,os)),A(this,os,null));for(const n of c(this,yi).values())(t=c(this,tl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,yi).clear(),c(this,we).removeLayer(this)}render({viewport:e}){this.viewport=e,ol(this.div,e);for(const t of c(this,we).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,we).commitOrRemove(),x(this,ct,cg).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,ol(this.div,{rotation:n}),t!==n)for(const r of c(this,yi).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,we).viewParameters.realScale}};tl=new WeakMap,tu=new WeakMap,wr=new WeakMap,So=new WeakMap,os=new WeakMap,yi=new WeakMap,bo=new WeakMap,nu=new WeakMap,nl=new WeakMap,zi=new WeakMap,as=new WeakMap,cn=new WeakMap,ls=new WeakMap,we=new WeakMap,Eo=new WeakMap,ct=new WeakSet,Sx=function(e){c(this,we).unselectAll();const{target:t}=e;if(t===c(this,cn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,cn).div.contains(t)){const{isMac:n}=An.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,we).showAllEditors("highlight",!0,!0),c(this,cn).div.classList.add("free"),this.toggleDrawing(),Eg.startHighlighting(this,c(this,we).direction==="ltr",{target:c(this,cn).div,x:e.x,y:e.y}),c(this,cn).div.addEventListener("pointerup",()=>{c(this,cn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,we)._signal}),e.preventDefault()}},nr=function(){return c(Ii,Eo).get(c(this,we).getMode())},rw=function(e){const t=c(this,ct,nr);return t?new t.prototype.constructor(e):null},sw=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),l=Math.max(0,t),h=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),p=(o+h)/2-e,g=(l+d)/2-t,[v,y]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:v,offsetY:y}},cg=function(){for(const e of c(this,yi).values())e.isEmpty()&&e.remove()},xe(Ii,"_initialized",!1),C(Ii,Eo,new Map([U0,Z0,ew,Eg].map(e=>[e._editorType,e])));let iw=Ii;var Hi,Zd,_n,il,Vg,bx,br,aw,Ex,lw;const sn=class sn{constructor({pageIndex:e}){C(this,br);C(this,Hi,null);C(this,Zd,0);C(this,_n,new Map);C(this,il,new Map);this.pageIndex=e}setParent(e){if(!c(this,Hi)){A(this,Hi,e);return}if(c(this,Hi)!==e){if(c(this,_n).size>0)for(const t of c(this,_n).values())t.remove(),e.append(t);A(this,Hi,e)}}static get _svgFactory(){return Be(this,"_svgFactory",new Hw)}draw(e,t=!1,n=!1){const r=gn(this,Zd)._++,o=x(this,br,aw).call(this),l=sn._svgFactory.createElement("defs");o.append(l);const h=sn._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,il).set(r,h);const p=n?x(this,br,Ex).call(this,l,d):null,g=sn._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,e),c(this,_n).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(e,t){const n=gn(this,Zd)._++,r=x(this,br,aw).call(this),o=sn._svgFactory.createElement("defs");r.append(o);const l=sn._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const v=sn._svgFactory.createElement("mask");o.append(v),d=`mask_p${this.pageIndex}_${n}`,v.setAttribute("id",d),v.setAttribute("maskUnits","objectBoundingBox");const y=sn._svgFactory.createElement("rect");v.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const _=sn._svgFactory.createElement("use");v.append(_),_.setAttribute("href",`#${h}`),_.setAttribute("stroke","none"),_.setAttribute("fill","black"),_.setAttribute("fill-rule","nonzero"),_.classList.add("mask")}const p=sn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,_n).set(n,r),n}finalizeDraw(e,t){c(this,il).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:r,rootClass:o,path:l}=t,h=typeof e=="number"?c(this,_n).get(e):e;if(h){if(n&&x(this,br,lw).call(this,h,n),r&&x(d=sn,Vg,bx).call(d,h,r),o){const{classList:p}=h;for(const[g,v]of Object.entries(o))p.toggle(g,v)}if(l){const g=h.firstChild.firstChild;x(this,br,lw).call(this,g,l)}}}updateParent(e,t){if(t===this)return;const n=c(this,_n).get(e);n&&(c(t,Hi).append(n),c(this,_n).delete(e),c(t,_n).set(e,n))}remove(e){c(this,il).delete(e),c(this,Hi)!==null&&(c(this,_n).get(e).remove(),c(this,_n).delete(e))}destroy(){A(this,Hi,null);for(const e of c(this,_n).values())e.remove();c(this,_n).clear(),c(this,il).clear()}};Hi=new WeakMap,Zd=new WeakMap,_n=new WeakMap,il=new WeakMap,Vg=new WeakSet,bx=function(e,[t,n,r,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*r}%`,l.height=`${100*o}%`},br=new WeakSet,aw=function(){const e=sn._svgFactory.create(1,1,!0);return c(this,Hi).append(e),e.setAttribute("aria-hidden",!0),e},Ex=function(e,t){const n=sn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=sn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},lw=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},C(sn,Vg);let ow=sn;globalThis.pdfjsTestingUtils={HighlightOutliner:j0};Pe.AbortException;Pe.AnnotationEditorLayer;Pe.AnnotationEditorParamsType;Pe.AnnotationEditorType;Pe.AnnotationEditorUIManager;Pe.AnnotationLayer;Pe.AnnotationMode;Pe.ColorPicker;Pe.DOMSVGFactory;Pe.DrawLayer;Pe.FeatureTest;Pe.GlobalWorkerOptions;Pe.ImageKind;Pe.InvalidPDFException;Pe.MissingPDFException;Pe.OPS;Pe.OutputScale;Pe.PDFDataRangeTransport;Pe.PDFDateString;Pe.PDFWorker;Pe.PasswordResponses;Pe.PermissionFlag;Pe.PixelsPerInch;Pe.RenderingCancelledException;Pe.TextLayer;Pe.TouchManager;Pe.UnexpectedResponseException;Pe.Util;Pe.VerbosityLevel;Pe.XfaLayer;Pe.build;Pe.createValidAbsoluteUrl;Pe.fetchData;var rD=Pe.getDocument;Pe.getFilenameFromUrl;Pe.getPdfFilenameFromUrl;Pe.getXfaPageViewport;Pe.isDataScheme;Pe.isPdfFile;Pe.noContextMenu;Pe.normalizeUnicode;Pe.setLayerDimensions;Pe.shadow;Pe.stopEvent;Pe.version;function sD(){const[a,e]=W.useState(null),[t,n]=W.useState(""),[r,o]=W.useState(""),[l,h]=W.useState(""),[d,p]=W.useState([]),[g,v]=W.useState(!1),[y,_]=W.useState(!1),[S,b]=W.useState("1"),[k,T]=W.useState(""),P=W.useRef(null),[L,D]=W.useState([]),[j,G]=W.useState(!1);W.useEffect(()=>{const U=JSON.parse(localStorage.getItem("history"))||[];D(U)},[]);const V={en:{ocr:"eng",speech:"en-US"},ar:{ocr:"ara",speech:"ar-SA"}},Y=U=>{var I;const N=U.target.files[0];e(N),ER.recognize(N,((I=V[S])==null?void 0:I.ocr)||"eng").then(({data:{text:F}})=>{n(F.toLowerCase())}).catch(F=>{console.error("OCR error:",F)})},J=async U=>{const N=U.target.files[0],I=new FileReader;I.onload=async function(){const F=new Uint8Array(this.result),q=await rD(F).promise;let ne="";for(let ge=1;ge<=q.numPages;ge++)(await(await q.getPage(ge)).getTextContent()).items.forEach(Se=>{ne+=Se.str+" "});n(ne.toLowerCase())},I.readAsArrayBuffer(N)},ue=U=>{const I=U.target.value.replace(/[^a-zA-Z0-9\s.,\u0600-\u06FF]/g,"").trim();o(I.toLowerCase()),T("")},ae=()=>{var I;if(r.trim()==="")return T("Select A Language To Continue");if(!("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){alert("Speech Recognition is not supported in your browser. Please use Google Chrome.");return}const U=window.SpeechRecognition||window.webkitSpeechRecognition,N=new U;N.lang=((I=V[S])==null?void 0:I.speech)||"en-US",N.interimResults=!0,N.continuous=!0,N.onstart=()=>{v(!0)},N.onresult=F=>{const q=Array.from(F.results).map(ge=>ge[0].transcript.toLowerCase()).join(" ");h(q);const ne=Te(r.toLowerCase(),q);p(ne)},N.onerror=F=>{console.error("Speech recognition error:",F.error)},N.onend=()=>{g&&N.start()},N.start(),P.current=N},Me=()=>{P.current&&(P.current.onend=null,P.current.stop(),v(!1))},Te=(U,N)=>{const I=U.split(" "),F=N.split(" "),q=[];return I.forEach((ne,ge)=>{ne!==F[ge]&&q.push(ge)}),q},Ae=(U,N)=>U.split(" ").map((F,q)=>$.jsx("span",{className:`${N.includes(q)?"bg-red-500 rounded-md text-white":"bg-transparent"} px-1`,children:F},q)),ze=U=>{const N=[...L,U];D(N),localStorage.setItem("history",JSON.stringify(N))},te=U=>{const N=L.filter((I,F)=>F!==U);D(N),localStorage.setItem("history",JSON.stringify(N))},ie=()=>{if(r.trim()===""){T("Must insert text");return}_(!0),ze({providedText:r,spokenText:l,errors:d})},Z=()=>{_(!1)};return $.jsxs($.Fragment,{children:[$.jsx(x1,{}),$.jsx(ww,{}),$.jsxs("div",{className:"flex justify-center items-start mt-10",children:[$.jsx(CR,{handleImageUpload:Y,handlePDFUpload:J}),$.jsxs("div",{className:"App card bg-white w-96 mx-2 p-5 shadow-lg border-4 border-gray-400",children:[!y&&$.jsx("div",{className:"LangSelector text-center my-3 space-x-3",children:$.jsxs("select",{className:"select select-primary",value:S,onChange:U=>b(U.target.value),children:[$.jsx("option",{disabled:!0,value:"1",children:"Pick A language"}),$.jsx("option",{value:"en",children:"English"}),$.jsx("option",{value:"ar",children:"Arabic"})]})}),$.jsx("div",{children:a&&$.jsxs("p",{children:["Text:"," ",$.jsx("pre",{className:"stat-value text-sm flex flex-wrap overflow-y-auto whitespace-normal max-h-24",children:t})]})}),!g&&!y&&$.jsxs("div",{className:"my-3 py-3",children:[$.jsx("textarea",{className:"textarea textarea-bordered w-full text-sm",placeholder:"Type or paste text here...",rows:"4",value:r,onChange:ue}),k&&$.jsx("p",{className:"text-red-500 mt-2",children:k})]}),$.jsxs("div",{className:"flex flex-col items-center",children:[g&&$.jsx(r2,{})," ",!y&&$.jsx("div",{className:"btn btn-outline mt-3 mb-3 ",children:g?$.jsx("button",{onClick:Me,children:"Stop Listening"}):$.jsx("button",{onClick:ae,children:"Start Listening"})}),!g&&!y&&$.jsx("button",{className:"btn btn-outline",onClick:ie,children:"Check Result"}),y&&$.jsxs($.Fragment,{children:[$.jsxs("div",{className:"mx",children:[$.jsx("div",{className:"stats-vertical",children:$.jsxs("div",{className:"stat",children:[$.jsx("div",{className:"stat-title text-center text-lg m-2 underline bg-gray-400 rounded-lg",children:"Spoken Words"}),$.jsx("div",{className:"stat-value text-sm flex flex-wrap overflow-y-auto whitespace-normal max-h-48",children:l})]})}),$.jsxs("div",{className:"stat",children:[$.jsx("div",{className:"stat-title text-center text-lg m-2 underline bg-gray-400 rounded-lg",children:"Highlighted Mistakes"}),$.jsx("div",{className:"stat-value text-sm flex flex-wrap overflow-y-auto whitespace-normal max-h-48",children:Ae(r,d)})]})]}),$.jsx("button",{className:"btn btn-secondary mt-5",onClick:Z,children:"Go Back"})]})]})]})]}),$.jsx(xR,{history:L,showHistory:j,setShowHistory:G,removeHistoryItem:te})]})}const oD=()=>$.jsxs($.Fragment,{children:[$.jsx(ww,{}),$.jsx("div",{class:"px-4 py-4 mx-auto sm:px-6 lg:px-8 max-w-7xl",children:$.jsxs("div",{class:"grid grid-cols-1 gap-y-8 lg:items-center lg:grid-cols-2 sm:gap-y-20 xl:grid-cols-5",children:[$.jsxs("div",{class:"text-center xl:col-span-2 lg:text-left md:px-16 lg:px-0",children:[$.jsxs("div",{class:"max-w-sm mx-auto sm:max-w-md md:max-w-full",children:[$.jsx("h1",{class:"text-4xl font-bold leading-tight text-black sm:text-5xl sm:leading-tight lg:text-6xl lg:leading-tight font-pj",children:"Your Parter That Listenes"}),$.jsx("p",{children:"With Brainser Memorizing Was Never Easy"})]}),$.jsx("div",{class:"mt-8 sm:flex sm:items-center sm:justify-center lg:justify-start sm:space-x-5 lg:mt-12",children:$.jsx("a",{href:"#",title:"",class:"btn btn-lg hover:bg-black hover:text-white",role:"button",children:"How It Works"})})]}),$.jsx("div",{class:"xl:col-span-3",children:$.jsx("img",{class:"w-full mx-auto scale-110 left-4",src:"https://d33wubrfki0l68.cloudfront.net/29c501c64b21014b3f2e225abe02fe31fd8f3a5c/f866d/images/hero/3/illustration.png",alt:""})})]})})]}),aD=()=>$.jsxs("footer",{className:"footer footer-center p-10 bg-base-200 text-base-content rounded",children:[$.jsxs("nav",{className:"grid grid-flow-col gap-4",children:[$.jsx("a",{className:"link link-hover",children:"About us"}),$.jsx("a",{className:"link link-hover",children:"Contact"})]}),$.jsx("nav",{children:$.jsxs("div",{className:"grid grid-flow-col gap-4",children:[$.jsx("a",{children:$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:$.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),$.jsx("a",{children:$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:$.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),$.jsx("a",{children:$.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:$.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})}),$.jsx("aside",{children:$.jsx("p",{children:"Copyright © 2025 - All rights Belong To Brainser"})})]}),lD=()=>$.jsxs("div",{children:[$.jsx(x1,{}),$.jsx(oD,{}),$.jsx(aD,{})]});var cD="firebase",uD="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(cD,uD,"app");const hD={apiKey:"AIzaSyC9qc2vfYWjGVWKbuduisXklf4GhdztxtU",authDomain:"brainser-69030.firebaseapp.com",projectId:"brainser-69030",storageBucket:"brainser-69030.appspot.com",messagingSenderId:"528403819663",appId:"1:528403819663:web:8e2b8e8e8e8e8e8e8e8e8"},dD=VE(hD),Cx=Mw(dD),fD=new cs;$L(Cx,g1).then(()=>{}).catch(a=>{console.error("Error setting persistence: ",a)});const pD=()=>{const a=Gg(),e=()=>{dM(Cx,fD).then(t=>{console.log(t.user),a("/Home")}).catch(t=>{console.error("Error signing in with Google: ",t)})};return $.jsxs($.Fragment,{children:[$.jsx(ww,{}),$.jsx("div",{className:"flex justify-center items-center h-screen",children:$.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl text-center",children:[$.jsx("img",{className:"mb-4",src:C1}),$.jsx("button",{className:"btn px-4 py-2 rounded text-black hover:bg-black hover:text-white",onClick:e,children:"Sign in with Google"})]})})]})},gD=({children:a,redirectTo:e})=>Mw().currentUser?a:$.jsx(SI,{to:e}),mD=()=>$.jsx(XI,{children:$.jsxs(EI,{children:[$.jsx(kp,{path:"/",element:$.jsx(lD,{})}),$.jsx(kp,{path:"/Home",element:$.jsx(gD,{redirectTo:"/Sign",children:$.jsx(sD,{})})}),$.jsx(kp,{path:"/Sign",element:$.jsx(pD,{})})]})});MT.createRoot(document.getElementById("root")).render($.jsx(W.StrictMode,{children:$.jsx(mD,{})}));
